{"version":3,"sources":["webpack:///C:/Users/eammann/Projects/generator-nitro/node_modules/lottie-web/build/player/lottie_light.js"],"names":["window","expressionsPlugin","svgNS","locationHref","initialDefaultFrame","subframeEnabled","bm_pow","test","navigator","userAgent","Math","round","pow","bm_sqrt","sqrt","bm_floor","abs","floor","bm_min","max","min","BMMath","i","propertyNames","len","length","random","val","absArr","createSizedArray","defaultCurveSegments","degToRads","PI","roundValues","flag","BMEnterFrameEvent","type","currentTime","totalTime","frameMultiplier","this","direction","BMCompleteEvent","BMCompleteLoopEvent","totalLoops","currentLoop","BMSegmentStartEvent","firstFrame","totalFrames","BMDestroyEvent","target","BMRenderFrameErrorEvent","nativeError","BMConfigErrorEvent","_count","createElementID","HSVtoRGB","h","s","v","r","g","b","f","p","q","t","RGBtoHSV","d","addSaturationToRGB","color","offset","hsv","addBrightnessToRGB","addHueToRGB","rgbToHex","hex","colorMap","toString","BaseEvent","prototype","triggerEvent","eventName","args","_cbs","addEventListener","callback","push","removeEventListener","bind","splice","createTypedArray","Uint8ClampedArray","Float32Array","Int16Array","value","arr","Array","apply","createNS","document","createElementNS","createTag","createElement","DynamicPropertyContainer","addDynamicProperty","prop","dynamicProperties","indexOf","container","_isAnimated","iterateDynamicProperties","_mdf","getValue","initDynamicPropertyContainer","blendModeEnums","getBlendMode","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","mode","Matrix","_cos","cos","_sin","sin","_tan","tan","_rnd","reset","props","rotate","angle","mCos","mSin","_t","rotateX","rotateY","rotateZ","shear","sx","sy","skew","ax","ay","skewFromAxis","scale","sz","setTransform","a","c","e","j","k","l","m","n","o","translate","tx","ty","tz","transform","a2","b2","c2","d2","e2","f2","g2","h2","i2","j2","k2","l2","m2","n2","o2","p2","_p","_identityCalculated","a1","b1","c1","d1","e1","f1","g1","h1","i1","j1","k1","l1","m1","n1","o1","p1","isIdentity","_identity","equals","matr","clone","cloneFromProps","applyToPoint","x","y","z","applyToX","applyToY","applyToZ","inversePoint","pt","determinant","inversePoints","pts","retPts","applyToTriplePoints","pt1","pt2","pt3","p0","p4","p5","p12","p13","applyToPointArray","applyToPointStringified","toCSS","cssValue","roundMatrixProperty","to2dCSS","pool","math","nodecrypto","global","width","chunks","rngname","startdenom","significance","overflow","mask","ARC4","key","keylen","me","S","count","copy","slice","mixkey","seed","smear","stringseed","charCodeAt","tostring","String","fromCharCode","options","shortseed","flatten","obj","depth","result","typ","entropy","randomBytes","out","Uint8Array","crypto","msCrypto","getRandomValues","browser","plugins","Date","screen","autoseed","arc4","prng","int32","quick","double","pass","is_math_call","state","BezierFactory","ob","nm","str","replace","beziers","bezEasing","BezierEasing","NEWTON_ITERATIONS","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","kSplineTableSize","kSampleStepSize","float32ArraySupported","A","aA1","aA2","B","C","calcBezier","aT","getSlope","points","_mSampleValues","_precomputed","get","mX1","mY1","mX2","mY2","_precompute","_getTForX","_calcSampleValues","aX","mSampleValues","intervalStart","currentSample","lastSample","guessForT","initialSlope","aGuessT","currentSlope","newtonRaphsonIterate","aA","aB","currentX","currentT","binarySubdivide","extendPrototype","sources","destination","sourcePrototype","attr","hasOwnProperty","createProxyFunction","ProxyFunction","lastTime","vendors","requestAnimationFrame","cancelAnimationFrame","element","currTime","getTime","timeToCall","id","setTimeout","clearTimeout","bez","pointOnLine2D","x1","y1","x2","y2","x3","y3","det1","getBezierLength","pt4","ptCoord","perc","ptDistance","curveSegments","addedLength","point","lastPoint","lengthData","bezier_length_pool","newElement","percents","lengths","BezierData","segmentLength","PointData","partial","partialLength","storedData","buildBezierData","bezierName","bezierData","getDistancePerc","initPos","lengthPos","lPerc","dir","bezier_segment_points","getSegmentsLength","shapeData","segmentsLength","segments_length_pool","closed","pathV","pathO","pathI","_length","totalLength","getNewSegment","startPerc","endPerc","t0","t1","u0","u1","u0u0u0","t0u0u0_3","t0t0u0_3","t0t0t0","u0u0u1","t0u0u1_3","t0t0u1_3","t0t0t1","u0u1u1","t0u1u1_3","t0t1u1_3","t0t1t1","u1u1u1","t1u1u1_3","t1t1u1_3","t1t1t1","getPointInSegment","percent","pointOnLine3D","z1","z2","z3","diffDist","dist1","dist2","dist3","bezFunction","dataManager","findCompLayers","comps","layers","__used","JSON","parse","stringify","completeShapes","jLen","ks","convertPathsToAbsoluteValues","it","path","checkVersion","minimum","animVersionString","animVersion","split","minimumVersion","checkText","iterateLayers","textLayer","documentData","animationData","assets","checkChars","chars","pathData","paths","data","shapes","__converted","checkColors","iterateShapes","checkShapes","layerData","kLen","hasMask","maskProps","masksProperties","cl","moduleOb","fontManager","__complete","completeLayers","completed","tt","td","refId","singleShape","dataFunctionManager","FontManager","maxWaitingTime","emptyChar","w","size","combinedCharacters","setUpNode","font","family","parentNode","style","fontFamily","node","innerHTML","position","left","top","fontSize","fontVariant","fontStyle","fontWeight","letterSpacing","appendChild","body","offsetWidth","parent","createHelper","def","fontData","tHelper","setAttribute","fFamily","fStyle","fWeight","textContent","fClass","getContext","concat","Font","fonts","typekitLoaded","isLoaded","initTime","now","getCombinedCharacterCodes","addChars","found","ch","addFonts","defs","list","fontArr","_pendingFonts","loadedSelector","shouldLoadFont","loaded","monoCase","sansCase","fPath","fOrigin","origin","querySelectorAll","href","rel","src","sc","helper","cache","checkLoadedFonts","getCharData","char","console","warn","getFontByName","name","fName","measureText","fontName","index","doubleSize","getComputedTextLength","singleSize","loadedCount","removeChild","PropertyFactory","initFrame","math_abs","interpolateValue","frameNum","caching","newValue","offsetTime","propType","pv","keyData","nextKeyData","fnc","iterationIndex","lastIndex","keyframes","endValue","omega","cosom","sinom","scale0","scale1","az","aw","bx","by","bz","bw","nextKeyTime","keyTime","to","ti","ind","__fnct","getBezierEasing","segmentPerc","distanceInLine","lastFrame","_lastKeyframeIndex","_lastAddedLength","_lastPoint","outX","outY","inX","inY","keyValue","sh","quat","qx","qy","qz","qw","heading","atan2","attitude","asin","bank","quaternionToEuler","createQuaternion","acos","constructor","values","c3","s1","s2","s3","getValueAtCurrentTime","comp","renderedFrame","endTime","_caching","renderResult","setVValue","multipliedValue","mult","processEffectsSequence","elem","globalData","frameId","effectsSequence","lock","_isFirstFrame","finalValue","kf","addEffect","effectFunction","ValueProperty","vel","MultiDimensionalProperty","KeyframedValueProperty","st","KeyframedMultidimensionalProperty","arrLen","getProp","TransformPropertyFactory","TransformProperty","pre","appliedTransformations","px","py","pz","rx","ry","rz","or","sk","sa","_isDirty","applyToMatrix","mat","forceRender","precalculateMatrix","autoOriented","v1","v2","frameRate","getValueAtTime","autoOrient","_addDynamicProperty","getTransformProperty","ShapePath","_maxLength","setPathData","setLength","point_pool","doubleArrayLength","setXYAt","pos","setTripleAt","vX","vY","oX","oY","iX","iY","reverse","newPath","vertices","outPoints","inPoints","init","cnt","modifiers","ShapePropertyFactory","interpolateShape","previousValue","keyPropS","keyPropE","isHold","vertexValue","interpolateShapeCurrentTime","resetShape","localShapeCollection","shape1","shape2","shapesEqual","shape_pool","releaseShapes","addShape","ShapeProperty","shapeCollection_pool","newShapeCollection","KeyframedShapeProperty","EllShapeProperty","convertEllToPath","s0","_cw","_v","StarShapeProperty","ir","is","convertToPath","convertStarToPath","convertPolygonToPath","os","rad","roundness","perimSegment","numPts","longFlag","longRad","shortRad","longRound","shortRound","longPerimSegment","shortPerimSegment","currentAng","ox","oy","RectShapeProperty","convertRectToPath","v0","cPoint","ShapeModifiers","registerModifier","factory","getModifier","ShapeModifier","TrimModifier","RoundCornersModifier","RepeaterModifier","ShapeCollection","DashProperty","renderer","dataProps","dashStr","dashArray","dashoffset","GradientProperty","cLength","_cmdf","_omdf","_collapsable","checkCollapsable","_hasOpacity","initModifierProperties","addShapeToModifier","shape","setAsAnimated","processKeys","sValue","eValue","pathsData","calculateShapeEdges","shapeLength","totalModifierLength","segments","segmentOb","shapeSegments","shapeS","shapeE","releasePathsData","release","processShapes","shapePaths","_s","totalShapeLength","edges","newShapesData","addShapes","lastShape","pop","addPaths","newPaths","addSegment","shapePath","newShape","addSegmentFromArray","shapeSegment","currentLengthData","segmentCount","segment","rd","processPath","cloned_path","currentV","currentI","currentO","closerV","distance","newPosPerc","tr","so","eo","pMatrix","rMatrix","sMatrix","tMatrix","matrix","applyTransforms","inv","scaleX","scaleY","elemsData","_currentCopies","_elements","_groups","unshift","resetElements","elements","_processed","cloneElements","newElements","changeGroupRender","renderFlag","_render","items","itemsTransform","cont","copies","ceil","group","reloadShapes","offsetModulo","roundOffset","pProps","rProps","sProps","iteration","mProps","op","comparePoints","buildShapeString","pathNodes","_o","_i","shapeString","ImagePreloader","proxyImage","canvas","height","ctx","fillStyle","fillRect","imageLoaded","loadedAssets","totalImages","imagesLoadedCb","createImageData","assetData","assetsPath","original_path","imagePath","u","getAssetsPath","img","crossOrigin","_imageLoaded","loadAssets","cb","images","_createImageData","setPath","setAssetsPath","getImage","destroy","featureSupport","maskType","filtersFactory","filId","fil","feColorMatrix","assetLoader","formatResponse","xhr","response","responseText","load","errorCallback","XMLHttpRequest","open","responseType","err","send","onreadystatechange","readyState","status","TextAnimatorProperty","textData","renderType","_hasMaskedPath","_frameId","_textData","_renderType","_elem","_animatorsData","_pathData","_moreOptions","alignment","renderedLetters","lettersChangedFlag","TextAnimatorDataProperty","animatorProps","defaultData","textAnimator_animatables","sw","fc","fh","fs","fb","TextSelectorProp","getTextSelectorProp","LetterProps","TextProperty","keysIndex","canResize","minimumFontSize","currentData","ascent","boxWidth","defaultBoxWidth","justifyOffset","lh","lineWidths","ls","of","ps","fillColorAnim","strokeColorAnim","strokeWidthAnim","yOffset","finalSize","finalText","finalLineHeight","copyData","searchProperty","completeTextData","searchProperties","maskManager","getMaskProperty","getMeasures","xPos","yPos","pathInfo","currentLength","currentPoint","pointInd","segmentInd","prevPoint","tanAngle","animators","matrixHelper","mHelper","renderedLettersCount","letters","tLength","pi","letterValue","yOff","firstLine","offf","xPathPos","yPathPos","elemOpacity","letterSw","letterSc","letterFc","letterO","initPathPos","initSegmentInd","initPointInd","currentLine","letterM","letterP","defaultPropsArray","animatorJustifyOffset","animatorFirstCharOffset","justifyOffsetMult","isNewLine","getMult","anIndexes","totalChars","line","extra","an","animatorOffset","add","rot","atan","update","updated","setCurrentData","searchKeyframes","getKeyframeValue","_finalValue","currentValue","currentIndex","textKeys","buildFinalText","text","charCode","charactersArray","charAt","substr","newLineFlag","charData","anchorGrouping","currentSize","currentPos","lineWidth","maxLineWidth","styles","toLowerCase","trackingOffset","currentHeight","boxHeight","lastSpaceIndex","currentChar","uncollapsedSpaces","animatorData","letterData","based","indexes","rn","newInd","currentInd","updateDocumentData","newData","undefined","dData","recalculate","canResizeFont","_canResize","setMinimumFontSize","_fontValue","_currentTextLength","finalS","finalE","xe","ne","textProperty","easer","tot","newCharsFlag","divisor","pool_factory","initialLength","_create","_release","_clone","pooling","cloned","shapeCollection","BaseRenderer","SVGRenderer","animationItem","config","svgElement","ariaLabel","title","titleElement","titleId","description","descElement","descId","maskElement","layerElement","renderConfig","preserveAspectRatio","imagePreserveAspectRatio","progressiveLoad","hideOnTransparent","viewBoxOnly","viewBoxSize","className","focusable","pendingElements","destroyed","rendererType","MaskElement","viewData","solidPath","rect","expansor","feMorph","properties","currentMasks","layerId","maskRef","filterID","expan","lastPath","lastOperator","filterId","lastRadius","createLayerSolidPath","getShapeProp","invRect","drawPath","maskedElement","addRenderableComponent","HierarchyElement","FrameElement","TransformElement","RenderableElement","RenderableDOMElement","ProcessedElement","SVGStyleData","level","lvl","hd","pElem","msElem","SVGShapeData","transformers","caches","lStr","SVGTransformData","SVGStrokeStyleData","styleOb","SVGFillStyleData","SVGGradientFillStyleData","initGradientData","SVGGradientStrokeStyleData","ShapeGroupData","prevViewData","gr","checkLayers","num","ip","buildItem","checkPendingElements","createItem","layer","createImage","createComp","createSolid","createNull","createShape","createText","createCamera","Error","buildAllItems","includeLayers","newLayers","setProjectInterface","pInterface","projectInterface","initItems","buildElementParenting","parentName","hierarchy","setAsParent","setHierarchy","addPendingElement","searchExtraCompositions","xt","initExpressions","registerComposition","setupGlobalData","animData","fontsContainer","getAssetData","imageLoader","imagePreloader","fr","compSize","NullElement","SVGShapeElement","SVGTextElement","IImageElement","SVGCompElement","ISolidElement","configAnimation","wrapper","maskId","updateContainerSize","appendElementInPos","setMatte","checkParenting","renderFrame","currentFrame","prepareFrame","getBaseElement","nextElement","insertBefore","hide","display","show","isFirstFrame","finalMat","finalTransform","mProp","getMaskelement","pathString","pathShapeValue","initHierarchy","_isParent","prepareProperties","isVisible","initTransform","_matMdf","_opMdf","ao","renderTransform","globalToLocal","transforms","ptNew","initRenderable","isInRange","hidden","isTransparent","renderableComponents","component","removeRenderableComponent","prepareRenderableFrame","checkLayerLimits","checkTransparency","renderRenderable","sourceRectAtTime","getLayerSize","initElement","initBaseData","initRendererElement","createContainerElements","createRenderableComponents","createContent","baseElement","renderElement","renderInnerContent","innerElem","destroyBaseElement","stops","setGradientData","setGradientOpacity","pathElement","gradientId","gfill","stop","gf","cst","opacityId","opFill","ms","ost","SVGElementsRenderer","_identityMatrix","_matrixHelper","renderContentTransform","styleData","itemData","renderPath","pathStringTransformed","redraw","iterations","lLen","renderFill","styleElem","renderGradientStroke","renderGradient","renderStroke","hasOpacity","attr1","attr2","cValues","oValues","ang","dist","createRenderFunction","BaseElement","SVGBaseElement","IShapeElement","ITextElement","ICompElement","sourceRect","supports3d","tm","_placeholder","textSpans","shapesData","stylesList","shapeModifiers","itemsData","processedElements","animatedContents","SVGTintFilter","filter","filterManager","matrixFilter","effectElements","feMergeNode","feMerge","SVGFillFilter","SVGGaussianBlurEffect","feGaussianBlur","SVGStrokeEffect","initialized","SVGTritoneFilter","feComponentTransfer","feFuncR","feFuncG","feFuncB","SVGProLevelsFilter","createFeFunc","feFuncA","feFuncRComposed","feFuncGComposed","feFuncBComposed","SVGDropShadowEffect","feOffset","feFlood","feComposite","originalNodeAdded","checkMasks","layerInterface","LayerExpressionInterface","registerMaskInterface","effectsInterface","EffectsExpressionInterface","createEffectsInterface","registerEffectsInterface","compInterface","CompExpressionInterface","shapeInterface","ShapeExpressionInterface","content","textInterface","TextExpressionInterface","setBlendMode","blendModeValue","bm","sr","effectsManager","EffectsManager","getType","matteElement","transformedElement","_sizeChanged","gg","layerElementParent","masker","createFilter","createAlphaToLuminanceFilter","maskGroup","maskGrouper","feCTr","feFunc","alphaRect","ln","cp","clipId","cpGroup","renderableEffectsManager","SVGEffects","addShapeToModifiers","isShapeInAnimatedModifiers","isAnimatedWithShape","renderModifiers","lcEnum","ljEnum","searchProcessedElement","addProcessedElement","textAnimator","buildNewText","createPathShape","shapeStr","_fontSize","applyTextPropertiesToMatrix","lineNumber","buildColor","colorData","emptyProp","timeRemapped","setElements","elems","getElements","destroyElements","assetPath","pr","setAttributeNS","textContainer","buildTextContents","textArray","textContents","currentTextContent","tSpan","usesGlyphs","cachedSpansLength","tElement","justify","time","textBox","getBBox","bbox","renderedLetter","textSpan","initSecondaryElement","identityMatrix","buildExpressionInterface","searchShapes","filterUniqueShapes","tempShapes","areAnimated","setShapesAsAnimated","createStyleElement","elementData","lc","lj","ml","addToAnimatedContents","createGroupElement","createTransformElement","transformProperty","createShapeElement","ownTransformers","fn","setElementStyles","render","currentTransform","modifier","processedPos","ownStyles","ownModifiers","renderShape","animatedContent","colorBlack","colorWhite","opacity","sigma","dimensions","sigmaX","sigmaY","edgeMode","initialize","groupPath","elemChildren","children","childNodes","removeAttribute","pathMasker","dasharrayValue","getTotalLength","lineLength","units","color1","color2","color3","tableR","tableG","tableB","getTableValue","inputBlack","inputWhite","gamma","outputBlack","outputWhite","colorValue","table","call","outputDelta","inputDelta","join","col","_svgMatteSymbols","SVGMatte3Effect","filterElem","ef","filters","findSymbol","replaceInParent","symbolId","nextChild","useElem","setElementAsMask","symbol","animationManager","registeredAnimations","playingAnimationsNum","_stopped","_isFrozen","removeElement","ev","animItem","animation","isPaused","subtractPlayingCount","registerAnimation","AnimationItem","setupAnimation","setData","addPlayingCount","activate","resume","nowTime","elapsedTime","advanceTime","first","loadAnimation","params","setParams","setSpeed","setDirection","play","pause","togglePause","searchAnimations","standalone","animElements","getElementsByClassName","getElementsByTagName","div","resize","goToAndStop","isFrame","freeze","unfreeze","getRegisteredAnimations","animations","currentRawFrame","frameMult","playSpeed","playDirection","playCount","autoplay","loop","animationID","timeCompleted","segmentPos","_idle","_completedLoop","context","animType","CanvasRenderer","rendererSettings","HybridRenderer","parseInt","autoloadSegments","lastIndexOf","fileName","trigger","wrapperAttributes","attributes","getNamedItem","prerender","completeData","loadNextSegment","shift","segmentPath","loadSegments","imagesLoaded","checkLoaded","preloadImages","updaFrameModifier","waitForFontsLoaded","error","triggerConfigError","gotoFrame","setSubframe","triggerRenderFrameError","setCurrentRawFrameValue","frameModifier","goToAndPlay","nextValue","_isComplete","checkSegments","adjustSegment","setSegment","end","pendingFrame","playSegments","forceFlag","resetSegments","onEnterFrame","onLoopComplete","onComplete","onSegmentStart","onDestroy","getPath","getDuration","onError","lottiejs","setLocationHref","setSubframeRendering","setQuality","isNaN","inBrowser","installPlugin","plugin","__getFactory","version","scripts","queryString","variable","vars","pair","decodeURIComponent","getQueryVariable","readyStateCheckInterval","setInterval","clearInterval","root"],"mappings":"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","file":"js/dynamic/lottie-fe58266.min.js","sourcesContent":["(typeof navigator !== \"undefined\") && (function(root, factory) {\r\n    if (typeof define === \"function\" && define.amd) {\r\n        define(function() {\r\n            return factory(root);\r\n        });\r\n    } else if (typeof module === \"object\" && module.exports) {\r\n        module.exports = factory(root);\r\n    } else {\r\n        root.lottie = factory(root);\r\n        root.bodymovin = root.lottie;\r\n    }\r\n}((window || {}), function(window) {\r\n    \"use strict\";\r\n    var svgNS = \"http://www.w3.org/2000/svg\";\r\n\r\nvar locationHref = '';\r\n\r\nvar initialDefaultFrame = -999999;\r\n\r\nvar subframeEnabled = true;\r\nvar expressionsPlugin;\r\nvar isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\r\nvar cachedColors = {};\r\nvar bm_rounder = Math.round;\r\nvar bm_rnd;\r\nvar bm_pow = Math.pow;\r\nvar bm_sqrt = Math.sqrt;\r\nvar bm_abs = Math.abs;\r\nvar bm_floor = Math.floor;\r\nvar bm_max = Math.max;\r\nvar bm_min = Math.min;\r\nvar blitter = 10;\r\n\r\nvar BMMath = {};\r\n(function(){\r\n    var propertyNames = [\"abs\", \"acos\", \"acosh\", \"asin\", \"asinh\", \"atan\", \"atanh\", \"atan2\", \"ceil\", \"cbrt\", \"expm1\", \"clz32\", \"cos\", \"cosh\", \"exp\", \"floor\", \"fround\", \"hypot\", \"imul\", \"log\", \"log1p\", \"log2\", \"log10\", \"max\", \"min\", \"pow\", \"random\", \"round\", \"sign\", \"sin\", \"sinh\", \"sqrt\", \"tan\", \"tanh\", \"trunc\", \"E\", \"LN10\", \"LN2\", \"LOG10E\", \"LOG2E\", \"PI\", \"SQRT1_2\", \"SQRT2\"];\r\n    var i, len = propertyNames.length;\r\n    for(i=0;i<len;i+=1){\r\n        BMMath[propertyNames[i]] = Math[propertyNames[i]];\r\n    }\r\n}());\r\n\r\nfunction ProjectInterface(){return {};}\r\n\r\nBMMath.random = Math.random;\r\nBMMath.abs = function(val){\r\n    var tOfVal = typeof val;\r\n    if(tOfVal === 'object' && val.length){\r\n        var absArr = createSizedArray(val.length);\r\n        var i, len = val.length;\r\n        for(i=0;i<len;i+=1){\r\n            absArr[i] = Math.abs(val[i]);\r\n        }\r\n        return absArr;\r\n    }\r\n    return Math.abs(val);\r\n\r\n};\r\nvar defaultCurveSegments = 150;\r\nvar degToRads = Math.PI/180;\r\nvar roundCorner = 0.5519;\r\n\r\nfunction roundValues(flag){\r\n    if(flag){\r\n        bm_rnd = Math.round;\r\n    }else{\r\n        bm_rnd = function(val){\r\n            return val;\r\n        };\r\n    }\r\n}\r\nroundValues(false);\r\n\r\nfunction styleDiv(element){\r\n    element.style.position = 'absolute';\r\n    element.style.top = 0;\r\n    element.style.left = 0;\r\n    element.style.display = 'block';\r\n    element.style.transformOrigin = element.style.webkitTransformOrigin = '0 0';\r\n    element.style.backfaceVisibility  = element.style.webkitBackfaceVisibility = 'visible';\r\n    element.style.transformStyle = element.style.webkitTransformStyle = element.style.mozTransformStyle = \"preserve-3d\";\r\n}\r\n\r\nfunction BMEnterFrameEvent(type, currentTime, totalTime, frameMultiplier){\r\n    this.type = type;\r\n    this.currentTime = currentTime;\r\n    this.totalTime = totalTime;\r\n    this.direction = frameMultiplier < 0 ? -1 : 1;\r\n}\r\n\r\nfunction BMCompleteEvent(type, frameMultiplier){\r\n    this.type = type;\r\n    this.direction = frameMultiplier < 0 ? -1 : 1;\r\n}\r\n\r\nfunction BMCompleteLoopEvent(type, totalLoops, currentLoop, frameMultiplier){\r\n    this.type = type;\r\n    this.currentLoop = currentLoop;\r\n    this.totalLoops = totalLoops;\r\n    this.direction = frameMultiplier < 0 ? -1 : 1;\r\n}\r\n\r\nfunction BMSegmentStartEvent(type, firstFrame, totalFrames){\r\n    this.type = type;\r\n    this.firstFrame = firstFrame;\r\n    this.totalFrames = totalFrames;\r\n}\r\n\r\nfunction BMDestroyEvent(type, target){\r\n    this.type = type;\r\n    this.target = target;\r\n}\r\n\r\nfunction BMRenderFrameErrorEvent(nativeError, currentTime) {\r\n    this.type = 'renderFrameError';\r\n    this.nativeError = nativeError;\r\n    this.currentTime = currentTime;\r\n}\r\n\r\nfunction BMConfigErrorEvent(nativeError) {\r\n    this.type = 'configError';\r\n    this.nativeError = nativeError;\r\n}\r\n\r\nfunction BMAnimationConfigErrorEvent(type, nativeError) {\r\n    this.type = type;\r\n    this.nativeError = nativeError;\r\n    this.currentTime = currentTime;\r\n}\r\n\r\nvar createElementID = (function(){\r\n    var _count = 0;\r\n    return function createID() {\r\n        return '__lottie_element_' + ++_count\r\n    }\r\n}())\r\n\r\nfunction HSVtoRGB(h, s, v) {\r\n    var r, g, b, i, f, p, q, t;\r\n    i = Math.floor(h * 6);\r\n    f = h * 6 - i;\r\n    p = v * (1 - s);\r\n    q = v * (1 - f * s);\r\n    t = v * (1 - (1 - f) * s);\r\n    switch (i % 6) {\r\n        case 0: r = v; g = t; b = p; break;\r\n        case 1: r = q; g = v; b = p; break;\r\n        case 2: r = p; g = v; b = t; break;\r\n        case 3: r = p; g = q; b = v; break;\r\n        case 4: r = t; g = p; b = v; break;\r\n        case 5: r = v; g = p; b = q; break;\r\n    }\r\n    return [ r,\r\n        g,\r\n         b ];\r\n}\r\n\r\nfunction RGBtoHSV(r, g, b) {\r\n    var max = Math.max(r, g, b), min = Math.min(r, g, b),\r\n        d = max - min,\r\n        h,\r\n        s = (max === 0 ? 0 : d / max),\r\n        v = max / 255;\r\n\r\n    switch (max) {\r\n        case min: h = 0; break;\r\n        case r: h = (g - b) + d * (g < b ? 6: 0); h /= 6 * d; break;\r\n        case g: h = (b - r) + d * 2; h /= 6 * d; break;\r\n        case b: h = (r - g) + d * 4; h /= 6 * d; break;\r\n    }\r\n\r\n    return [\r\n         h,\r\n         s,\r\n         v\r\n    ];\r\n}\r\n\r\nfunction addSaturationToRGB(color,offset){\r\n    var hsv = RGBtoHSV(color[0]*255,color[1]*255,color[2]*255);\r\n    hsv[1] += offset;\r\n    if (hsv[1] > 1) {\r\n        hsv[1] = 1;\r\n    }\r\n    else if (hsv[1] <= 0) {\r\n        hsv[1] = 0;\r\n    }\r\n    return HSVtoRGB(hsv[0],hsv[1],hsv[2]);\r\n}\r\n\r\nfunction addBrightnessToRGB(color,offset){\r\n    var hsv = RGBtoHSV(color[0]*255,color[1]*255,color[2]*255);\r\n    hsv[2] += offset;\r\n    if (hsv[2] > 1) {\r\n        hsv[2] = 1;\r\n    }\r\n    else if (hsv[2] < 0) {\r\n        hsv[2] = 0;\r\n    }\r\n    return HSVtoRGB(hsv[0],hsv[1],hsv[2]);\r\n}\r\n\r\nfunction addHueToRGB(color,offset) {\r\n    var hsv = RGBtoHSV(color[0]*255,color[1]*255,color[2]*255);\r\n    hsv[0] += offset/360;\r\n    if (hsv[0] > 1) {\r\n        hsv[0] -= 1;\r\n    }\r\n    else if (hsv[0] < 0) {\r\n        hsv[0] += 1;\r\n    }\r\n    return HSVtoRGB(hsv[0],hsv[1],hsv[2]);\r\n}\r\n\r\nvar rgbToHex = (function(){\r\n    var colorMap = [];\r\n    var i;\r\n    var hex;\r\n    for(i=0;i<256;i+=1){\r\n        hex = i.toString(16);\r\n        colorMap[i] = hex.length == 1 ? '0' + hex : hex;\r\n    }\r\n\r\n    return function(r, g, b) {\r\n        if(r<0){\r\n            r = 0;\r\n        }\r\n        if(g<0){\r\n            g = 0;\r\n        }\r\n        if(b<0){\r\n            b = 0;\r\n        }\r\n        return '#' + colorMap[r] + colorMap[g] + colorMap[b];\r\n    };\r\n}());\r\nfunction BaseEvent(){}\r\nBaseEvent.prototype = {\r\n\ttriggerEvent: function (eventName, args) {\r\n\t    if (this._cbs[eventName]) {\r\n\t        var len = this._cbs[eventName].length;\r\n\t        for (var i = 0; i < len; i++){\r\n\t            this._cbs[eventName][i](args);\r\n\t        }\r\n\t    }\r\n\t},\r\n\taddEventListener: function (eventName, callback) {\r\n\t    if (!this._cbs[eventName]){\r\n\t        this._cbs[eventName] = [];\r\n\t    }\r\n\t    this._cbs[eventName].push(callback);\r\n\r\n\t\treturn function() {\r\n\t\t\tthis.removeEventListener(eventName, callback);\r\n\t\t}.bind(this);\r\n\t},\r\n\tremoveEventListener: function (eventName,callback){\r\n\t    if (!callback){\r\n\t        this._cbs[eventName] = null;\r\n\t    }else if(this._cbs[eventName]){\r\n\t        var i = 0, len = this._cbs[eventName].length;\r\n\t        while(i<len){\r\n\t            if(this._cbs[eventName][i] === callback){\r\n\t                this._cbs[eventName].splice(i,1);\r\n\t                i -=1;\r\n\t                len -= 1;\r\n\t            }\r\n\t            i += 1;\r\n\t        }\r\n\t        if(!this._cbs[eventName].length){\r\n\t            this._cbs[eventName] = null;\r\n\t        }\r\n\t    }\r\n\t}\r\n};\r\nvar createTypedArray = (function(){\r\n\tfunction createRegularArray(type, len){\r\n\t\tvar i = 0, arr = [], value;\r\n\t\tswitch(type) {\r\n\t\t\tcase 'int16':\r\n\t\t\tcase 'uint8c':\r\n\t\t\t\tvalue = 1;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tvalue = 1.1;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\tarr.push(value);\r\n\t\t}\r\n\t\treturn arr;\r\n\t}\r\n\tfunction createTypedArray(type, len){\r\n\t\tif(type === 'float32') {\r\n\t\t\treturn new Float32Array(len);\r\n\t\t} else if(type === 'int16') {\r\n\t\t\treturn new Int16Array(len);\r\n\t\t} else if(type === 'uint8c') {\r\n\t\t\treturn new Uint8ClampedArray(len);\r\n\t\t}\r\n\t}\r\n\tif(typeof Uint8ClampedArray === 'function' && typeof Float32Array === 'function') {\r\n\t\treturn createTypedArray;\r\n\t} else {\r\n\t\treturn createRegularArray;\r\n\t}\r\n}());\r\n\r\nfunction createSizedArray(len) {\r\n\treturn Array.apply(null,{length:len});\r\n}\r\nfunction createNS(type) {\r\n\t//return {appendChild:function(){},setAttribute:function(){},style:{}}\r\n\treturn document.createElementNS(svgNS, type);\r\n}\r\nfunction createTag(type) {\r\n\t//return {appendChild:function(){},setAttribute:function(){},style:{}}\r\n\treturn document.createElement(type);\r\n}\r\nfunction DynamicPropertyContainer(){};\r\nDynamicPropertyContainer.prototype = {\r\n\taddDynamicProperty: function(prop) {\r\n\t\tif(this.dynamicProperties.indexOf(prop) === -1) {\r\n\t        this.dynamicProperties.push(prop);\r\n\t        this.container.addDynamicProperty(this);\r\n\t    \tthis._isAnimated = true;\r\n\t    }\r\n\t},\r\n\titerateDynamicProperties: function(){\r\n\t    this._mdf = false;\r\n\t    var i, len = this.dynamicProperties.length;\r\n\t    for(i=0;i<len;i+=1){\r\n\t        this.dynamicProperties[i].getValue();\r\n\t        if(this.dynamicProperties[i]._mdf) {\r\n\t            this._mdf = true;\r\n\t        }\r\n\t    }\r\n\t},\r\n\tinitDynamicPropertyContainer: function(container){\r\n\t    this.container = container;\r\n\t    this.dynamicProperties = [];\r\n\t    this._mdf = false;\r\n\t    this._isAnimated = false;\r\n\t}\r\n}\r\nvar getBlendMode = (function() {\r\n\r\n\tvar blendModeEnums = {\r\n        0:'source-over',\r\n        1:'multiply',\r\n        2:'screen',\r\n        3:'overlay',\r\n        4:'darken',\r\n        5:'lighten',\r\n        6:'color-dodge',\r\n        7:'color-burn',\r\n        8:'hard-light',\r\n        9:'soft-light',\r\n        10:'difference',\r\n        11:'exclusion',\r\n        12:'hue',\r\n        13:'saturation',\r\n        14:'color',\r\n        15:'luminosity'\r\n    }\r\n\r\n\treturn function(mode) {\r\n\t\treturn blendModeEnums[mode] || '';\r\n\t}\r\n}())\r\n/*!\r\n Transformation Matrix v2.0\r\n (c) Epistemex 2014-2015\r\n www.epistemex.com\r\n By Ken Fyrstenberg\r\n Contributions by leeoniya.\r\n License: MIT, header required.\r\n */\r\n\r\n/**\r\n * 2D transformation matrix object initialized with identity matrix.\r\n *\r\n * The matrix can synchronize a canvas context by supplying the context\r\n * as an argument, or later apply current absolute transform to an\r\n * existing context.\r\n *\r\n * All values are handled as floating point values.\r\n *\r\n * @param {CanvasRenderingContext2D} [context] - Optional context to sync with Matrix\r\n * @prop {number} a - scale x\r\n * @prop {number} b - shear y\r\n * @prop {number} c - shear x\r\n * @prop {number} d - scale y\r\n * @prop {number} e - translate x\r\n * @prop {number} f - translate y\r\n * @prop {CanvasRenderingContext2D|null} [context=null] - set or get current canvas context\r\n * @constructor\r\n */\r\n\r\nvar Matrix = (function(){\r\n\r\n    var _cos = Math.cos;\r\n    var _sin = Math.sin;\r\n    var _tan = Math.tan;\r\n    var _rnd = Math.round;\r\n\r\n    function reset(){\r\n        this.props[0] = 1;\r\n        this.props[1] = 0;\r\n        this.props[2] = 0;\r\n        this.props[3] = 0;\r\n        this.props[4] = 0;\r\n        this.props[5] = 1;\r\n        this.props[6] = 0;\r\n        this.props[7] = 0;\r\n        this.props[8] = 0;\r\n        this.props[9] = 0;\r\n        this.props[10] = 1;\r\n        this.props[11] = 0;\r\n        this.props[12] = 0;\r\n        this.props[13] = 0;\r\n        this.props[14] = 0;\r\n        this.props[15] = 1;\r\n        return this;\r\n    }\r\n\r\n    function rotate(angle) {\r\n        if(angle === 0){\r\n            return this;\r\n        }\r\n        var mCos = _cos(angle);\r\n        var mSin = _sin(angle);\r\n        return this._t(mCos, -mSin,  0, 0, mSin,  mCos, 0, 0, 0,  0,  1, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function rotateX(angle){\r\n        if(angle === 0){\r\n            return this;\r\n        }\r\n        var mCos = _cos(angle);\r\n        var mSin = _sin(angle);\r\n        return this._t(1, 0, 0, 0, 0, mCos, -mSin, 0, 0, mSin,  mCos, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function rotateY(angle){\r\n        if(angle === 0){\r\n            return this;\r\n        }\r\n        var mCos = _cos(angle);\r\n        var mSin = _sin(angle);\r\n        return this._t(mCos,  0,  mSin, 0, 0, 1, 0, 0, -mSin,  0,  mCos, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function rotateZ(angle){\r\n        if(angle === 0){\r\n            return this;\r\n        }\r\n        var mCos = _cos(angle);\r\n        var mSin = _sin(angle);\r\n        return this._t(mCos, -mSin,  0, 0, mSin,  mCos, 0, 0, 0,  0,  1, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function shear(sx,sy){\r\n        return this._t(1, sy, sx, 1, 0, 0);\r\n    }\r\n\r\n    function skew(ax, ay){\r\n        return this.shear(_tan(ax), _tan(ay));\r\n    }\r\n\r\n    function skewFromAxis(ax, angle){\r\n        var mCos = _cos(angle);\r\n        var mSin = _sin(angle);\r\n        return this._t(mCos, mSin,  0, 0, -mSin,  mCos, 0, 0, 0,  0,  1, 0, 0, 0, 0, 1)\r\n            ._t(1, 0,  0, 0, _tan(ax),  1, 0, 0, 0,  0,  1, 0, 0, 0, 0, 1)\r\n            ._t(mCos, -mSin,  0, 0, mSin,  mCos, 0, 0, 0,  0,  1, 0, 0, 0, 0, 1);\r\n        //return this._t(mCos, mSin, -mSin, mCos, 0, 0)._t(1, 0, _tan(ax), 1, 0, 0)._t(mCos, -mSin, mSin, mCos, 0, 0);\r\n    }\r\n\r\n    function scale(sx, sy, sz) {\r\n        if(!sz && sz !== 0) {\r\n            sz = 1;\r\n        }\r\n        if(sx === 1 && sy === 1 && sz === 1){\r\n            return this;\r\n        }\r\n        return this._t(sx, 0, 0, 0, 0, sy, 0, 0, 0, 0, sz, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function setTransform(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {\r\n        this.props[0] = a;\r\n        this.props[1] = b;\r\n        this.props[2] = c;\r\n        this.props[3] = d;\r\n        this.props[4] = e;\r\n        this.props[5] = f;\r\n        this.props[6] = g;\r\n        this.props[7] = h;\r\n        this.props[8] = i;\r\n        this.props[9] = j;\r\n        this.props[10] = k;\r\n        this.props[11] = l;\r\n        this.props[12] = m;\r\n        this.props[13] = n;\r\n        this.props[14] = o;\r\n        this.props[15] = p;\r\n        return this;\r\n    }\r\n\r\n    function translate(tx, ty, tz) {\r\n        tz = tz || 0;\r\n        if(tx !== 0 || ty !== 0 || tz !== 0){\r\n            return this._t(1,0,0,0,0,1,0,0,0,0,1,0,tx,ty,tz,1);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    function transform(a2, b2, c2, d2, e2, f2, g2, h2, i2, j2, k2, l2, m2, n2, o2, p2) {\r\n\r\n        var _p = this.props;\r\n\r\n        if(a2 === 1 && b2 === 0 && c2 === 0 && d2 === 0 && e2 === 0 && f2 === 1 && g2 === 0 && h2 === 0 && i2 === 0 && j2 === 0 && k2 === 1 && l2 === 0){\r\n            //NOTE: commenting this condition because TurboFan deoptimizes code when present\r\n            //if(m2 !== 0 || n2 !== 0 || o2 !== 0){\r\n                _p[12] = _p[12] * a2 + _p[15] * m2;\r\n                _p[13] = _p[13] * f2 + _p[15] * n2;\r\n                _p[14] = _p[14] * k2 + _p[15] * o2;\r\n                _p[15] = _p[15] * p2;\r\n            //}\r\n            this._identityCalculated = false;\r\n            return this;\r\n        }\r\n\r\n        var a1 = _p[0];\r\n        var b1 = _p[1];\r\n        var c1 = _p[2];\r\n        var d1 = _p[3];\r\n        var e1 = _p[4];\r\n        var f1 = _p[5];\r\n        var g1 = _p[6];\r\n        var h1 = _p[7];\r\n        var i1 = _p[8];\r\n        var j1 = _p[9];\r\n        var k1 = _p[10];\r\n        var l1 = _p[11];\r\n        var m1 = _p[12];\r\n        var n1 = _p[13];\r\n        var o1 = _p[14];\r\n        var p1 = _p[15];\r\n\r\n        /* matrix order (canvas compatible):\r\n         * ace\r\n         * bdf\r\n         * 001\r\n         */\r\n        _p[0] = a1 * a2 + b1 * e2 + c1 * i2 + d1 * m2;\r\n        _p[1] = a1 * b2 + b1 * f2 + c1 * j2 + d1 * n2 ;\r\n        _p[2] = a1 * c2 + b1 * g2 + c1 * k2 + d1 * o2 ;\r\n        _p[3] = a1 * d2 + b1 * h2 + c1 * l2 + d1 * p2 ;\r\n\r\n        _p[4] = e1 * a2 + f1 * e2 + g1 * i2 + h1 * m2 ;\r\n        _p[5] = e1 * b2 + f1 * f2 + g1 * j2 + h1 * n2 ;\r\n        _p[6] = e1 * c2 + f1 * g2 + g1 * k2 + h1 * o2 ;\r\n        _p[7] = e1 * d2 + f1 * h2 + g1 * l2 + h1 * p2 ;\r\n\r\n        _p[8] = i1 * a2 + j1 * e2 + k1 * i2 + l1 * m2 ;\r\n        _p[9] = i1 * b2 + j1 * f2 + k1 * j2 + l1 * n2 ;\r\n        _p[10] = i1 * c2 + j1 * g2 + k1 * k2 + l1 * o2 ;\r\n        _p[11] = i1 * d2 + j1 * h2 + k1 * l2 + l1 * p2 ;\r\n\r\n        _p[12] = m1 * a2 + n1 * e2 + o1 * i2 + p1 * m2 ;\r\n        _p[13] = m1 * b2 + n1 * f2 + o1 * j2 + p1 * n2 ;\r\n        _p[14] = m1 * c2 + n1 * g2 + o1 * k2 + p1 * o2 ;\r\n        _p[15] = m1 * d2 + n1 * h2 + o1 * l2 + p1 * p2 ;\r\n\r\n        this._identityCalculated = false;\r\n        return this;\r\n    }\r\n\r\n    function isIdentity() {\r\n        if(!this._identityCalculated){\r\n            this._identity = !(this.props[0] !== 1 || this.props[1] !== 0 || this.props[2] !== 0 || this.props[3] !== 0 || this.props[4] !== 0 || this.props[5] !== 1 || this.props[6] !== 0 || this.props[7] !== 0 || this.props[8] !== 0 || this.props[9] !== 0 || this.props[10] !== 1 || this.props[11] !== 0 || this.props[12] !== 0 || this.props[13] !== 0 || this.props[14] !== 0 || this.props[15] !== 1);\r\n            this._identityCalculated = true;\r\n        }\r\n        return this._identity;\r\n    }\r\n\r\n    function equals(matr){\r\n        var i = 0;\r\n        while (i < 16) {\r\n            if(matr.props[i] !== this.props[i]) {\r\n                return false;\r\n            }\r\n            i+=1;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    function clone(matr){\r\n        var i;\r\n        for(i=0;i<16;i+=1){\r\n            matr.props[i] = this.props[i];\r\n        }\r\n    }\r\n\r\n    function cloneFromProps(props){\r\n        var i;\r\n        for(i=0;i<16;i+=1){\r\n            this.props[i] = props[i];\r\n        }\r\n    }\r\n\r\n    function applyToPoint(x, y, z) {\r\n\r\n        return {\r\n            x: x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12],\r\n            y: x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13],\r\n            z: x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14]\r\n        };\r\n        /*return {\r\n         x: x * me.a + y * me.c + me.e,\r\n         y: x * me.b + y * me.d + me.f\r\n         };*/\r\n    }\r\n    function applyToX(x, y, z) {\r\n        return x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12];\r\n    }\r\n    function applyToY(x, y, z) {\r\n        return x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13];\r\n    }\r\n    function applyToZ(x, y, z) {\r\n        return x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14];\r\n    }\r\n\r\n    function inversePoint(pt) {\r\n        var determinant = this.props[0] * this.props[5] - this.props[1] * this.props[4];\r\n        var a = this.props[5]/determinant;\r\n        var b = - this.props[1]/determinant;\r\n        var c = - this.props[4]/determinant;\r\n        var d = this.props[0]/determinant;\r\n        var e = (this.props[4] * this.props[13] - this.props[5] * this.props[12])/determinant;\r\n        var f = - (this.props[0] * this.props[13] - this.props[1] * this.props[12])/determinant;\r\n        return [pt[0] * a + pt[1] * c + e, pt[0] * b + pt[1] * d + f, 0];\r\n    }\r\n\r\n    function inversePoints(pts){\r\n        var i, len = pts.length, retPts = [];\r\n        for(i=0;i<len;i+=1){\r\n            retPts[i] = inversePoint(pts[i]);\r\n        }\r\n        return retPts;\r\n    }\r\n\r\n    function applyToTriplePoints(pt1, pt2, pt3) {\r\n        var arr = createTypedArray('float32', 6);\r\n        if(this.isIdentity()) {\r\n            arr[0] = pt1[0];\r\n            arr[1] = pt1[1];\r\n            arr[2] = pt2[0];\r\n            arr[3] = pt2[1];\r\n            arr[4] = pt3[0];\r\n            arr[5] = pt3[1];\r\n        } else {\r\n            var p0 = this.props[0], p1 = this.props[1], p4 = this.props[4], p5 = this.props[5], p12 = this.props[12], p13 = this.props[13];\r\n            arr[0] = pt1[0] * p0 + pt1[1] * p4 + p12;\r\n            arr[1] = pt1[0] * p1 + pt1[1] * p5 + p13;\r\n            arr[2] = pt2[0] * p0 + pt2[1] * p4 + p12;\r\n            arr[3] = pt2[0] * p1 + pt2[1] * p5 + p13;\r\n            arr[4] = pt3[0] * p0 + pt3[1] * p4 + p12;\r\n            arr[5] = pt3[0] * p1 + pt3[1] * p5 + p13;\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    function applyToPointArray(x,y,z){\r\n        var arr;\r\n        if(this.isIdentity()) {\r\n            arr = [x,y,z];\r\n        } else {\r\n            arr = [x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12],x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13],x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14]];\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    function applyToPointStringified(x, y) {\r\n        if(this.isIdentity()) {\r\n            return x + ',' + y;\r\n        }\r\n        var _p = this.props;\r\n        return Math.round((x * _p[0] + y * _p[4] + _p[12]) * 100) / 100+','+ Math.round((x * _p[1] + y * _p[5] + _p[13]) * 100) / 100;\r\n    }\r\n\r\n    function toCSS() {\r\n        //Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\r\n        /*if(this.isIdentity()) {\r\n            return '';\r\n        }*/\r\n        var i = 0;\r\n        var props = this.props;\r\n        var cssValue = 'matrix3d(';\r\n        var v = 10000;\r\n        while(i<16){\r\n            cssValue += _rnd(props[i]*v)/v;\r\n            cssValue += i === 15 ? ')':',';\r\n            i += 1;\r\n        }\r\n        return cssValue;\r\n    }\r\n\r\n    function roundMatrixProperty(val) {\r\n        var v = 10000;\r\n        if((val < 0.000001 && val > 0) || (val > -0.000001 && val < 0)) {\r\n            return _rnd(val * v) / v;\r\n        }\r\n        return val;\r\n    }\r\n\r\n    function to2dCSS() {\r\n        //Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\r\n        /*if(this.isIdentity()) {\r\n            return '';\r\n        }*/\r\n        var props = this.props;\r\n        var _a = roundMatrixProperty(props[0]);\r\n        var _b = roundMatrixProperty(props[1]);\r\n        var _c = roundMatrixProperty(props[4]);\r\n        var _d = roundMatrixProperty(props[5]);\r\n        var _e = roundMatrixProperty(props[12]);\r\n        var _f = roundMatrixProperty(props[13]);\r\n        return \"matrix(\" + _a + ',' + _b + ',' + _c + ',' + _d + ',' + _e + ',' + _f + \")\";\r\n    }\r\n\r\n    return function(){\r\n        this.reset = reset;\r\n        this.rotate = rotate;\r\n        this.rotateX = rotateX;\r\n        this.rotateY = rotateY;\r\n        this.rotateZ = rotateZ;\r\n        this.skew = skew;\r\n        this.skewFromAxis = skewFromAxis;\r\n        this.shear = shear;\r\n        this.scale = scale;\r\n        this.setTransform = setTransform;\r\n        this.translate = translate;\r\n        this.transform = transform;\r\n        this.applyToPoint = applyToPoint;\r\n        this.applyToX = applyToX;\r\n        this.applyToY = applyToY;\r\n        this.applyToZ = applyToZ;\r\n        this.applyToPointArray = applyToPointArray;\r\n        this.applyToTriplePoints = applyToTriplePoints;\r\n        this.applyToPointStringified = applyToPointStringified;\r\n        this.toCSS = toCSS;\r\n        this.to2dCSS = to2dCSS;\r\n        this.clone = clone;\r\n        this.cloneFromProps = cloneFromProps;\r\n        this.equals = equals;\r\n        this.inversePoints = inversePoints;\r\n        this.inversePoint = inversePoint;\r\n        this._t = this.transform;\r\n        this.isIdentity = isIdentity;\r\n        this._identity = true;\r\n        this._identityCalculated = false;\r\n\r\n        this.props = createTypedArray('float32', 16);\r\n        this.reset();\r\n    };\r\n}());\r\n\r\n/*\r\n Copyright 2014 David Bau.\r\n\r\n Permission is hereby granted, free of charge, to any person obtaining\r\n a copy of this software and associated documentation files (the\r\n \"Software\"), to deal in the Software without restriction, including\r\n without limitation the rights to use, copy, modify, merge, publish,\r\n distribute, sublicense, and/or sell copies of the Software, and to\r\n permit persons to whom the Software is furnished to do so, subject to\r\n the following conditions:\r\n\r\n The above copyright notice and this permission notice shall be\r\n included in all copies or substantial portions of the Software.\r\n\r\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\r\n IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\r\n CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\r\n TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\r\n SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n */\r\n\r\n(function (pool, math) {\r\n//\r\n// The following constants are related to IEEE 754 limits.\r\n//\r\n    var global = this,\r\n        width = 256,        // each RC4 output is 0 <= x < 256\r\n        chunks = 6,         // at least six RC4 outputs for each double\r\n        digits = 52,        // there are 52 significant digits in a double\r\n        rngname = 'random', // rngname: name for Math.random and Math.seedrandom\r\n        startdenom = math.pow(width, chunks),\r\n        significance = math.pow(2, digits),\r\n        overflow = significance * 2,\r\n        mask = width - 1,\r\n        nodecrypto;         // node.js crypto module, initialized at the bottom.\r\n\r\n//\r\n// seedrandom()\r\n// This is the seedrandom function described above.\r\n//\r\n    function seedrandom(seed, options, callback) {\r\n        var key = [];\r\n        options = (options === true) ? { entropy: true } : (options || {});\r\n\r\n        // Flatten the seed string or build one from local entropy if needed.\r\n        var shortseed = mixkey(flatten(\r\n            options.entropy ? [seed, tostring(pool)] :\r\n                (seed === null) ? autoseed() : seed, 3), key);\r\n\r\n        // Use the seed to initialize an ARC4 generator.\r\n        var arc4 = new ARC4(key);\r\n\r\n        // This function returns a random double in [0, 1) that contains\r\n        // randomness in every bit of the mantissa of the IEEE 754 value.\r\n        var prng = function() {\r\n            var n = arc4.g(chunks),             // Start with a numerator n < 2 ^ 48\r\n                d = startdenom,                 //   and denominator d = 2 ^ 48.\r\n                x = 0;                          //   and no 'extra last byte'.\r\n            while (n < significance) {          // Fill up all significant digits by\r\n                n = (n + x) * width;              //   shifting numerator and\r\n                d *= width;                       //   denominator and generating a\r\n                x = arc4.g(1);                    //   new least-significant-byte.\r\n            }\r\n            while (n >= overflow) {             // To avoid rounding up, before adding\r\n                n /= 2;                           //   last byte, shift everything\r\n                d /= 2;                           //   right using integer math until\r\n                x >>>= 1;                         //   we have exactly the desired bits.\r\n            }\r\n            return (n + x) / d;                 // Form the number within [0, 1).\r\n        };\r\n\r\n        prng.int32 = function() { return arc4.g(4) | 0; };\r\n        prng.quick = function() { return arc4.g(4) / 0x100000000; };\r\n        prng.double = prng;\r\n\r\n        // Mix the randomness into accumulated entropy.\r\n        mixkey(tostring(arc4.S), pool);\r\n\r\n        // Calling convention: what to return as a function of prng, seed, is_math.\r\n        return (options.pass || callback ||\r\n        function(prng, seed, is_math_call, state) {\r\n            if (state) {\r\n                // Load the arc4 state from the given state if it has an S array.\r\n                if (state.S) { copy(state, arc4); }\r\n                // Only provide the .state method if requested via options.state.\r\n                prng.state = function() { return copy(arc4, {}); };\r\n            }\r\n\r\n            // If called as a method of Math (Math.seedrandom()), mutate\r\n            // Math.random because that is how seedrandom.js has worked since v1.0.\r\n            if (is_math_call) { math[rngname] = prng; return seed; }\r\n\r\n            // Otherwise, it is a newer calling convention, so return the\r\n            // prng directly.\r\n            else return prng;\r\n        })(\r\n            prng,\r\n            shortseed,\r\n            'global' in options ? options.global : (this == math),\r\n            options.state);\r\n    }\r\n    math['seed' + rngname] = seedrandom;\r\n\r\n//\r\n// ARC4\r\n//\r\n// An ARC4 implementation.  The constructor takes a key in the form of\r\n// an array of at most (width) integers that should be 0 <= x < (width).\r\n//\r\n// The g(count) method returns a pseudorandom integer that concatenates\r\n// the next (count) outputs from ARC4.  Its return value is a number x\r\n// that is in the range 0 <= x < (width ^ count).\r\n//\r\n    function ARC4(key) {\r\n        var t, keylen = key.length,\r\n            me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\r\n\r\n        // The empty key [] is treated as [0].\r\n        if (!keylen) { key = [keylen++]; }\r\n\r\n        // Set up S using the standard key scheduling algorithm.\r\n        while (i < width) {\r\n            s[i] = i++;\r\n        }\r\n        for (i = 0; i < width; i++) {\r\n            s[i] = s[j = mask & (j + key[i % keylen] + (t = s[i]))];\r\n            s[j] = t;\r\n        }\r\n\r\n        // The \"g\" method returns the next (count) outputs as one number.\r\n        me.g = function(count) {\r\n            // Using instance members instead of closure state nearly doubles speed.\r\n            var t, r = 0,\r\n                i = me.i, j = me.j, s = me.S;\r\n            while (count--) {\r\n                t = s[i = mask & (i + 1)];\r\n                r = r * width + s[mask & ((s[i] = s[j = mask & (j + t)]) + (s[j] = t))];\r\n            }\r\n            me.i = i; me.j = j;\r\n            return r;\r\n            // For robust unpredictability, the function call below automatically\r\n            // discards an initial batch of values.  This is called RC4-drop[256].\r\n            // See http://google.com/search?q=rsa+fluhrer+response&btnI\r\n        };\r\n    }\r\n\r\n//\r\n// copy()\r\n// Copies internal state of ARC4 to or from a plain object.\r\n//\r\n    function copy(f, t) {\r\n        t.i = f.i;\r\n        t.j = f.j;\r\n        t.S = f.S.slice();\r\n        return t;\r\n    }\r\n\r\n//\r\n// flatten()\r\n// Converts an object tree to nested arrays of strings.\r\n//\r\n    function flatten(obj, depth) {\r\n        var result = [], typ = (typeof obj), prop;\r\n        if (depth && typ == 'object') {\r\n            for (prop in obj) {\r\n                try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\r\n            }\r\n        }\r\n        return (result.length ? result : typ == 'string' ? obj : obj + '\\0');\r\n    }\r\n\r\n//\r\n// mixkey()\r\n// Mixes a string seed into a key that is an array of integers, and\r\n// returns a shortened string seed that is equivalent to the result key.\r\n//\r\n    function mixkey(seed, key) {\r\n        var stringseed = seed + '', smear, j = 0;\r\n        while (j < stringseed.length) {\r\n            key[mask & j] =\r\n                mask & ((smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++));\r\n        }\r\n        return tostring(key);\r\n    }\r\n\r\n//\r\n// autoseed()\r\n// Returns an object for autoseeding, using window.crypto and Node crypto\r\n// module if available.\r\n//\r\n    function autoseed() {\r\n        try {\r\n            if (nodecrypto) { return tostring(nodecrypto.randomBytes(width)); }\r\n            var out = new Uint8Array(width);\r\n            (global.crypto || global.msCrypto).getRandomValues(out);\r\n            return tostring(out);\r\n        } catch (e) {\r\n            var browser = global.navigator,\r\n                plugins = browser && browser.plugins;\r\n            return [+new Date(), global, plugins, global.screen, tostring(pool)];\r\n        }\r\n    }\r\n\r\n//\r\n// tostring()\r\n// Converts an array of charcodes to a string\r\n//\r\n    function tostring(a) {\r\n        return String.fromCharCode.apply(0, a);\r\n    }\r\n\r\n//\r\n// When seedrandom.js is loaded, we immediately mix a few bits\r\n// from the built-in RNG into the entropy pool.  Because we do\r\n// not want to interfere with deterministic PRNG state later,\r\n// seedrandom will not call math.random on its own again after\r\n// initialization.\r\n//\r\n    mixkey(math.random(), pool);\r\n\r\n//\r\n// Nodejs and AMD support: export the implementation as a module using\r\n// either convention.\r\n//\r\n\r\n// End anonymous scope, and pass initial values.\r\n})(\r\n    [],     // pool: entropy pool starts empty\r\n    BMMath    // math: package containing random, pow, and seedrandom\r\n);\r\nvar BezierFactory = (function(){\r\n    /**\r\n     * BezierEasing - use bezier curve for transition easing function\r\n     * by Gaëtan Renaudeau 2014 - 2015 – MIT License\r\n     *\r\n     * Credits: is based on Firefox's nsSMILKeySpline.cpp\r\n     * Usage:\r\n     * var spline = BezierEasing([ 0.25, 0.1, 0.25, 1.0 ])\r\n     * spline.get(x) => returns the easing value | x must be in [0, 1] range\r\n     *\r\n     */\r\n\r\n        var ob = {};\r\n    ob.getBezierEasing = getBezierEasing;\r\n    var beziers = {};\r\n\r\n    function getBezierEasing(a,b,c,d,nm){\r\n        var str = nm || ('bez_' + a+'_'+b+'_'+c+'_'+d).replace(/\\./g, 'p');\r\n        if(beziers[str]){\r\n            return beziers[str];\r\n        }\r\n        var bezEasing = new BezierEasing([a,b,c,d]);\r\n        beziers[str] = bezEasing;\r\n        return bezEasing;\r\n    }\r\n\r\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\r\n    var NEWTON_ITERATIONS = 4;\r\n    var NEWTON_MIN_SLOPE = 0.001;\r\n    var SUBDIVISION_PRECISION = 0.0000001;\r\n    var SUBDIVISION_MAX_ITERATIONS = 10;\r\n\r\n    var kSplineTableSize = 11;\r\n    var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\r\n\r\n    var float32ArraySupported = typeof Float32Array === \"function\";\r\n\r\n    function A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\r\n    function B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\r\n    function C (aA1)      { return 3.0 * aA1; }\r\n\r\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\r\n    function calcBezier (aT, aA1, aA2) {\r\n        return ((A(aA1, aA2)*aT + B(aA1, aA2))*aT + C(aA1))*aT;\r\n    }\r\n\r\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\r\n    function getSlope (aT, aA1, aA2) {\r\n        return 3.0 * A(aA1, aA2)*aT*aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\r\n    }\r\n\r\n    function binarySubdivide (aX, aA, aB, mX1, mX2) {\r\n        var currentX, currentT, i = 0;\r\n        do {\r\n            currentT = aA + (aB - aA) / 2.0;\r\n            currentX = calcBezier(currentT, mX1, mX2) - aX;\r\n            if (currentX > 0.0) {\r\n                aB = currentT;\r\n            } else {\r\n                aA = currentT;\r\n            }\r\n        } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\r\n        return currentT;\r\n    }\r\n\r\n    function newtonRaphsonIterate (aX, aGuessT, mX1, mX2) {\r\n        for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\r\n            var currentSlope = getSlope(aGuessT, mX1, mX2);\r\n            if (currentSlope === 0.0) return aGuessT;\r\n            var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\r\n            aGuessT -= currentX / currentSlope;\r\n        }\r\n        return aGuessT;\r\n    }\r\n\r\n    /**\r\n     * points is an array of [ mX1, mY1, mX2, mY2 ]\r\n     */\r\n    function BezierEasing (points) {\r\n        this._p = points;\r\n        this._mSampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\r\n        this._precomputed = false;\r\n\r\n        this.get = this.get.bind(this);\r\n    }\r\n\r\n    BezierEasing.prototype = {\r\n\r\n        get: function (x) {\r\n            var mX1 = this._p[0],\r\n                mY1 = this._p[1],\r\n                mX2 = this._p[2],\r\n                mY2 = this._p[3];\r\n            if (!this._precomputed) this._precompute();\r\n            if (mX1 === mY1 && mX2 === mY2) return x; // linear\r\n            // Because JavaScript number are imprecise, we should guarantee the extremes are right.\r\n            if (x === 0) return 0;\r\n            if (x === 1) return 1;\r\n            return calcBezier(this._getTForX(x), mY1, mY2);\r\n        },\r\n\r\n        // Private part\r\n\r\n        _precompute: function () {\r\n            var mX1 = this._p[0],\r\n                mY1 = this._p[1],\r\n                mX2 = this._p[2],\r\n                mY2 = this._p[3];\r\n            this._precomputed = true;\r\n            if (mX1 !== mY1 || mX2 !== mY2)\r\n                this._calcSampleValues();\r\n        },\r\n\r\n        _calcSampleValues: function () {\r\n            var mX1 = this._p[0],\r\n                mX2 = this._p[2];\r\n            for (var i = 0; i < kSplineTableSize; ++i) {\r\n                this._mSampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * getTForX chose the fastest heuristic to determine the percentage value precisely from a given X projection.\r\n         */\r\n        _getTForX: function (aX) {\r\n            var mX1 = this._p[0],\r\n                mX2 = this._p[2],\r\n                mSampleValues = this._mSampleValues;\r\n\r\n            var intervalStart = 0.0;\r\n            var currentSample = 1;\r\n            var lastSample = kSplineTableSize - 1;\r\n\r\n            for (; currentSample !== lastSample && mSampleValues[currentSample] <= aX; ++currentSample) {\r\n                intervalStart += kSampleStepSize;\r\n            }\r\n            --currentSample;\r\n\r\n            // Interpolate to provide an initial guess for t\r\n            var dist = (aX - mSampleValues[currentSample]) / (mSampleValues[currentSample+1] - mSampleValues[currentSample]);\r\n            var guessForT = intervalStart + dist * kSampleStepSize;\r\n\r\n            var initialSlope = getSlope(guessForT, mX1, mX2);\r\n            if (initialSlope >= NEWTON_MIN_SLOPE) {\r\n                return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\r\n            } else if (initialSlope === 0.0) {\r\n                return guessForT;\r\n            } else {\r\n                return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\r\n            }\r\n        }\r\n    };\r\n\r\n    return ob;\r\n\r\n}());\r\n(function () {\r\n    var lastTime = 0;\r\n    var vendors = ['ms', 'moz', 'webkit', 'o'];\r\n    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\r\n        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\r\n        window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\r\n    }\r\n    if(!window.requestAnimationFrame)\r\n        window.requestAnimationFrame = function (callback, element) {\r\n            var currTime = new Date().getTime();\r\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n            var id = setTimeout(function () {\r\n                    callback(currTime + timeToCall);\r\n                },\r\n                timeToCall);\r\n            lastTime = currTime + timeToCall;\r\n            return id;\r\n        };\r\n    if(!window.cancelAnimationFrame)\r\n        window.cancelAnimationFrame = function (id) {\r\n            clearTimeout(id);\r\n        };\r\n}());\r\n\r\nfunction extendPrototype(sources,destination){\r\n    var i, len = sources.length, sourcePrototype;\r\n    for (i = 0;i < len;i += 1) {\r\n        sourcePrototype = sources[i].prototype;\r\n        for (var attr in sourcePrototype) {\r\n            if (sourcePrototype.hasOwnProperty(attr)) destination.prototype[attr] = sourcePrototype[attr];\r\n        }\r\n    }\r\n}\r\n\r\nfunction getDescriptor(object, prop) {\r\n    return Object.getOwnPropertyDescriptor(object, prop);\r\n}\r\n\r\nfunction createProxyFunction(prototype) {\r\n\tfunction ProxyFunction(){}\r\n\tProxyFunction.prototype = prototype;\r\n\treturn ProxyFunction;\r\n}\r\nfunction bezFunction(){\r\n\r\n    var easingFunctions = [];\r\n    var math = Math;\r\n\r\n    function pointOnLine2D(x1,y1, x2,y2, x3,y3){\r\n        var det1 = (x1*y2) + (y1*x3) + (x2*y3) - (x3*y2) - (y3*x1) - (x2*y1);\r\n        return det1 > -0.001 && det1 < 0.001;\r\n    }\r\n\r\n    function pointOnLine3D(x1,y1,z1, x2,y2,z2, x3,y3,z3){\r\n        if(z1 === 0 && z2 === 0 && z3 === 0) {\r\n            return pointOnLine2D(x1,y1, x2,y2, x3,y3);\r\n        }\r\n        var dist1 = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2) + Math.pow(z2 - z1, 2));\r\n        var dist2 = Math.sqrt(Math.pow(x3 - x1, 2) + Math.pow(y3 - y1, 2) + Math.pow(z3 - z1, 2));\r\n        var dist3 = Math.sqrt(Math.pow(x3 - x2, 2) + Math.pow(y3 - y2, 2) + Math.pow(z3 - z2, 2));\r\n        var diffDist;\r\n        if(dist1 > dist2){\r\n            if(dist1 > dist3){\r\n                diffDist = dist1 - dist2 - dist3;\r\n            } else {\r\n                diffDist = dist3 - dist2 - dist1;\r\n            }\r\n        } else if(dist3 > dist2){\r\n            diffDist = dist3 - dist2 - dist1;\r\n        } else {\r\n            diffDist = dist2 - dist1 - dist3;\r\n        }\r\n        return diffDist > -0.0001 && diffDist < 0.0001;\r\n    }\r\n\r\n    var getBezierLength = (function(){\r\n\r\n        return function(pt1,pt2,pt3,pt4){\r\n            var curveSegments = defaultCurveSegments;\r\n            var k;\r\n            var i, len;\r\n            var ptCoord,perc,addedLength = 0;\r\n            var ptDistance;\r\n            var point = [],lastPoint = [];\r\n            var lengthData = bezier_length_pool.newElement();\r\n            len = pt3.length;\r\n            for(k=0;k<curveSegments;k+=1){\r\n                perc = k/(curveSegments-1);\r\n                ptDistance = 0;\r\n                for(i=0;i<len;i+=1){\r\n                    ptCoord = bm_pow(1-perc,3)*pt1[i]+3*bm_pow(1-perc,2)*perc*pt3[i]+3*(1-perc)*bm_pow(perc,2)*pt4[i]+bm_pow(perc,3)*pt2[i];\r\n                    point[i] = ptCoord;\r\n                    if(lastPoint[i] !== null){\r\n                        ptDistance += bm_pow(point[i] - lastPoint[i],2);\r\n                    }\r\n                    lastPoint[i] = point[i];\r\n                }\r\n                if(ptDistance){\r\n                    ptDistance = bm_sqrt(ptDistance);\r\n                    addedLength += ptDistance;\r\n                }\r\n                lengthData.percents[k] = perc;\r\n                lengthData.lengths[k] = addedLength;\r\n            }\r\n            lengthData.addedLength = addedLength;\r\n            return lengthData;\r\n        };\r\n    }());\r\n\r\n    function getSegmentsLength(shapeData) {\r\n        var segmentsLength = segments_length_pool.newElement();\r\n        var closed = shapeData.c;\r\n        var pathV = shapeData.v;\r\n        var pathO = shapeData.o;\r\n        var pathI = shapeData.i;\r\n        var i, len = shapeData._length;\r\n        var lengths = segmentsLength.lengths;\r\n        var totalLength = 0;\r\n        for(i=0;i<len-1;i+=1){\r\n            lengths[i] = getBezierLength(pathV[i],pathV[i+1],pathO[i],pathI[i+1]);\r\n            totalLength += lengths[i].addedLength;\r\n        }\r\n        if(closed && len){\r\n            lengths[i] = getBezierLength(pathV[i],pathV[0],pathO[i],pathI[0]);\r\n            totalLength += lengths[i].addedLength;\r\n        }\r\n        segmentsLength.totalLength = totalLength;\r\n        return segmentsLength;\r\n    }\r\n\r\n    function BezierData(length){\r\n        this.segmentLength = 0;\r\n        this.points = new Array(length);\r\n    }\r\n\r\n    function PointData(partial,point){\r\n        this.partialLength = partial;\r\n        this.point = point;\r\n    }\r\n\r\n    var buildBezierData = (function(){\r\n\r\n        var storedData = {};\r\n\r\n        return function (pt1, pt2, pt3, pt4){\r\n            var bezierName = (pt1[0]+'_'+pt1[1]+'_'+pt2[0]+'_'+pt2[1]+'_'+pt3[0]+'_'+pt3[1]+'_'+pt4[0]+'_'+pt4[1]).replace(/\\./g, 'p');\r\n            if(!storedData[bezierName]){\r\n                var curveSegments = defaultCurveSegments;\r\n                var k, i, len;\r\n                var ptCoord,perc,addedLength = 0;\r\n                var ptDistance;\r\n                var point,lastPoint = null;\r\n                if (pt1.length === 2 && (pt1[0] != pt2[0] || pt1[1] != pt2[1]) && pointOnLine2D(pt1[0],pt1[1],pt2[0],pt2[1],pt1[0]+pt3[0],pt1[1]+pt3[1]) && pointOnLine2D(pt1[0],pt1[1],pt2[0],pt2[1],pt2[0]+pt4[0],pt2[1]+pt4[1])){\r\n                    curveSegments = 2;\r\n                }\r\n                var bezierData = new BezierData(curveSegments);\r\n                len = pt3.length;\r\n                for (k = 0; k < curveSegments; k += 1) {\r\n                    point = createSizedArray(len);\r\n                    perc = k / (curveSegments - 1);\r\n                    ptDistance = 0;\r\n                    for (i = 0; i < len; i += 1){\r\n                        ptCoord = bm_pow(1-perc,3)*pt1[i]+3*bm_pow(1-perc,2)*perc*(pt1[i] + pt3[i])+3*(1-perc)*bm_pow(perc,2)*(pt2[i] + pt4[i])+bm_pow(perc,3)*pt2[i];\r\n                        point[i] = ptCoord;\r\n                        if(lastPoint !== null){\r\n                            ptDistance += bm_pow(point[i] - lastPoint[i],2);\r\n                        }\r\n                    }\r\n                    ptDistance = bm_sqrt(ptDistance);\r\n                    addedLength += ptDistance;\r\n                    bezierData.points[k] = new PointData(ptDistance, point);\r\n                    lastPoint = point;\r\n                }\r\n                bezierData.segmentLength = addedLength;\r\n                storedData[bezierName] = bezierData;\r\n            }\r\n            return storedData[bezierName];\r\n        };\r\n    }());\r\n\r\n    function getDistancePerc(perc,bezierData){\r\n        var percents = bezierData.percents;\r\n        var lengths = bezierData.lengths;\r\n        var len = percents.length;\r\n        var initPos = bm_floor((len-1)*perc);\r\n        var lengthPos = perc*bezierData.addedLength;\r\n        var lPerc = 0;\r\n        if(initPos === len - 1 || initPos === 0 || lengthPos === lengths[initPos]){\r\n            return percents[initPos];\r\n        }else{\r\n            var dir = lengths[initPos] > lengthPos ? -1 : 1;\r\n            var flag = true;\r\n            while(flag){\r\n                if(lengths[initPos] <= lengthPos && lengths[initPos+1] > lengthPos){\r\n                    lPerc = (lengthPos - lengths[initPos]) / (lengths[initPos+1] - lengths[initPos]);\r\n                    flag = false;\r\n                }else{\r\n                    initPos += dir;\r\n                }\r\n                if(initPos < 0 || initPos >= len - 1){\r\n                    //FIX for TypedArrays that don't store floating point values with enough accuracy\r\n                    if(initPos === len - 1) {\r\n                        return percents[initPos];\r\n                    }\r\n                    flag = false;\r\n                }\r\n            }\r\n            return percents[initPos] + (percents[initPos+1] - percents[initPos])*lPerc;\r\n        }\r\n    }\r\n\r\n    function getPointInSegment(pt1, pt2, pt3, pt4, percent, bezierData) {\r\n        var t1 = getDistancePerc(percent,bezierData);\r\n        var u0 = 1;\r\n        var u1 = 1 - t1;\r\n        var ptX = Math.round((u1*u1*u1* pt1[0] + (t1*u1*u1 + u1*t1*u1 + u1*u1*t1)* pt3[0] + (t1*t1*u1 + u1*t1*t1 + t1*u1*t1)*pt4[0] + t1*t1*t1* pt2[0])* 1000) / 1000;\r\n        var ptY = Math.round((u1*u1*u1* pt1[1] + (t1*u1*u1 + u1*t1*u1 + u1*u1*t1)* pt3[1] + (t1*t1*u1 + u1*t1*t1 + t1*u1*t1)*pt4[1] + t1*t1*t1* pt2[1])* 1000) / 1000;\r\n        return [ptX, ptY];\r\n    }\r\n\r\n    function getSegmentArray() {\r\n\r\n    }\r\n\r\n    var bezier_segment_points = createTypedArray('float32', 8);\r\n\r\n    function getNewSegment(pt1,pt2,pt3,pt4,startPerc,endPerc, bezierData){\r\n\r\n        startPerc = startPerc < 0 ? 0 : startPerc > 1 ? 1 : startPerc;\r\n        var t0 = getDistancePerc(startPerc,bezierData);\r\n        endPerc = endPerc > 1 ? 1 : endPerc;\r\n        var t1 = getDistancePerc(endPerc,bezierData);\r\n        var i, len = pt1.length;\r\n        var u0 = 1 - t0;\r\n        var u1 = 1 - t1;\r\n        var u0u0u0 = u0*u0*u0;\r\n        var t0u0u0_3 = t0*u0*u0*3;\r\n        var t0t0u0_3 = t0*t0*u0*3;\r\n        var t0t0t0 = t0*t0*t0;\r\n        //\r\n        var u0u0u1 = u0*u0*u1;\r\n        var t0u0u1_3 = t0*u0*u1 + u0*t0*u1 + u0*u0*t1;\r\n        var t0t0u1_3 = t0*t0*u1 + u0*t0*t1 + t0*u0*t1;\r\n        var t0t0t1 = t0*t0*t1;\r\n        //\r\n        var u0u1u1 = u0*u1*u1;\r\n        var t0u1u1_3 = t0*u1*u1 + u0*t1*u1 + u0*u1*t1;\r\n        var t0t1u1_3 = t0*t1*u1 + u0*t1*t1 + t0*u1*t1;\r\n        var t0t1t1 = t0*t1*t1;\r\n        //\r\n        var u1u1u1 = u1*u1*u1;\r\n        var t1u1u1_3 = t1*u1*u1 + u1*t1*u1 + u1*u1*t1;\r\n        var t1t1u1_3 = t1*t1*u1 + u1*t1*t1 + t1*u1*t1;\r\n        var t1t1t1 = t1*t1*t1;\r\n        for(i=0;i<len;i+=1){\r\n            bezier_segment_points[i * 4] = Math.round((u0u0u0 * pt1[i] + t0u0u0_3 * pt3[i] + t0t0u0_3 * pt4[i] + t0t0t0 * pt2[i]) * 1000) / 1000;\r\n            bezier_segment_points[i * 4 + 1] = Math.round((u0u0u1 * pt1[i] + t0u0u1_3 * pt3[i] + t0t0u1_3 * pt4[i] + t0t0t1 * pt2[i]) * 1000) / 1000;\r\n            bezier_segment_points[i * 4 + 2] = Math.round((u0u1u1 * pt1[i] + t0u1u1_3 * pt3[i] + t0t1u1_3 * pt4[i] + t0t1t1 * pt2[i]) * 1000) / 1000;\r\n            bezier_segment_points[i * 4 + 3] = Math.round((u1u1u1 * pt1[i] + t1u1u1_3 * pt3[i] + t1t1u1_3 * pt4[i] + t1t1t1 * pt2[i]) * 1000) / 1000;\r\n        }\r\n\r\n        return bezier_segment_points;\r\n    }\r\n\r\n    return {\r\n        getSegmentsLength : getSegmentsLength,\r\n        getNewSegment : getNewSegment,\r\n        getPointInSegment : getPointInSegment,\r\n        buildBezierData : buildBezierData,\r\n        pointOnLine2D : pointOnLine2D,\r\n        pointOnLine3D : pointOnLine3D\r\n    };\r\n}\r\n\r\nvar bez = bezFunction();\r\nfunction dataFunctionManager(){\r\n\r\n    //var tCanvasHelper = createTag('canvas').getContext('2d');\r\n\r\n    function completeLayers(layers, comps, fontManager){\r\n        var layerData;\r\n        var animArray, lastFrame;\r\n        var i, len = layers.length;\r\n        var j, jLen, k, kLen;\r\n        for(i=0;i<len;i+=1){\r\n            layerData = layers[i];\r\n            if(!('ks' in layerData) || layerData.completed){\r\n                continue;\r\n            }\r\n            layerData.completed = true;\r\n            if(layerData.tt){\r\n                layers[i-1].td = layerData.tt;\r\n            }\r\n            animArray = [];\r\n            lastFrame = -1;\r\n            if(layerData.hasMask){\r\n                var maskProps = layerData.masksProperties;\r\n                jLen = maskProps.length;\r\n                for(j=0;j<jLen;j+=1){\r\n                    if(maskProps[j].pt.k.i){\r\n                        convertPathsToAbsoluteValues(maskProps[j].pt.k);\r\n                    }else{\r\n                        kLen = maskProps[j].pt.k.length;\r\n                        for(k=0;k<kLen;k+=1){\r\n                            if(maskProps[j].pt.k[k].s){\r\n                                convertPathsToAbsoluteValues(maskProps[j].pt.k[k].s[0]);\r\n                            }\r\n                            if(maskProps[j].pt.k[k].e){\r\n                                convertPathsToAbsoluteValues(maskProps[j].pt.k[k].e[0]);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if(layerData.ty===0){\r\n                layerData.layers = findCompLayers(layerData.refId, comps);\r\n                completeLayers(layerData.layers,comps, fontManager);\r\n            }else if(layerData.ty === 4){\r\n                completeShapes(layerData.shapes);\r\n            }else if(layerData.ty == 5){\r\n                completeText(layerData, fontManager);\r\n            }\r\n        }\r\n    }\r\n\r\n    function findCompLayers(id,comps){\r\n        var i = 0, len = comps.length;\r\n        while(i<len){\r\n            if(comps[i].id === id){\r\n                if(!comps[i].layers.__used) {\r\n                    comps[i].layers.__used = true;\r\n                    return comps[i].layers;\r\n                }\r\n                return JSON.parse(JSON.stringify(comps[i].layers));\r\n            }\r\n            i += 1;\r\n        }\r\n    }\r\n\r\n    function completeShapes(arr){\r\n        var i, len = arr.length;\r\n        var j, jLen;\r\n        var hasPaths = false;\r\n        for(i=len-1;i>=0;i-=1){\r\n            if(arr[i].ty == 'sh'){\r\n                if(arr[i].ks.k.i){\r\n                    convertPathsToAbsoluteValues(arr[i].ks.k);\r\n                }else{\r\n                    jLen = arr[i].ks.k.length;\r\n                    for(j=0;j<jLen;j+=1){\r\n                        if(arr[i].ks.k[j].s){\r\n                            convertPathsToAbsoluteValues(arr[i].ks.k[j].s[0]);\r\n                        }\r\n                        if(arr[i].ks.k[j].e){\r\n                            convertPathsToAbsoluteValues(arr[i].ks.k[j].e[0]);\r\n                        }\r\n                    }\r\n                }\r\n                hasPaths = true;\r\n            }else if(arr[i].ty == 'gr'){\r\n                completeShapes(arr[i].it);\r\n            }\r\n        }\r\n        /*if(hasPaths){\r\n            //mx: distance\r\n            //ss: sensitivity\r\n            //dc: decay\r\n            arr.splice(arr.length-1,0,{\r\n                \"ty\": \"ms\",\r\n                \"mx\":20,\r\n                \"ss\":10,\r\n                 \"dc\":0.001,\r\n                \"maxDist\":200\r\n            });\r\n        }*/\r\n    }\r\n\r\n    function convertPathsToAbsoluteValues(path){\r\n        var i, len = path.i.length;\r\n        for(i=0;i<len;i+=1){\r\n            path.i[i][0] += path.v[i][0];\r\n            path.i[i][1] += path.v[i][1];\r\n            path.o[i][0] += path.v[i][0];\r\n            path.o[i][1] += path.v[i][1];\r\n        }\r\n    }\r\n\r\n    function checkVersion(minimum,animVersionString){\r\n        var animVersion = animVersionString ? animVersionString.split('.') : [100,100,100];\r\n        if(minimum[0]>animVersion[0]){\r\n            return true;\r\n        } else if(animVersion[0] > minimum[0]){\r\n            return false;\r\n        }\r\n        if(minimum[1]>animVersion[1]){\r\n            return true;\r\n        } else if(animVersion[1] > minimum[1]){\r\n            return false;\r\n        }\r\n        if(minimum[2]>animVersion[2]){\r\n            return true;\r\n        } else if(animVersion[2] > minimum[2]){\r\n            return false;\r\n        }\r\n    }\r\n\r\n    var checkText = (function(){\r\n        var minimumVersion = [4,4,14];\r\n\r\n        function updateTextLayer(textLayer){\r\n            var documentData = textLayer.t.d;\r\n            textLayer.t.d = {\r\n                k: [\r\n                    {\r\n                        s:documentData,\r\n                        t:0\r\n                    }\r\n                ]\r\n            };\r\n        }\r\n\r\n        function iterateLayers(layers){\r\n            var i, len = layers.length;\r\n            for(i=0;i<len;i+=1){\r\n                if(layers[i].ty === 5){\r\n                    updateTextLayer(layers[i]);\r\n                }\r\n            }\r\n        }\r\n\r\n        return function (animationData){\r\n            if(checkVersion(minimumVersion,animationData.v)){\r\n                iterateLayers(animationData.layers);\r\n                if(animationData.assets){\r\n                    var i, len = animationData.assets.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        if(animationData.assets[i].layers){\r\n                            iterateLayers(animationData.assets[i].layers);\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }());\r\n\r\n    var checkChars = (function() {\r\n        var minimumVersion = [4,7,99];\r\n        return function (animationData){\r\n            if(animationData.chars && !checkVersion(minimumVersion,animationData.v)){\r\n                var i, len = animationData.chars.length, j, jLen, k, kLen;\r\n                var pathData, paths;\r\n                for(i = 0; i < len; i += 1) {\r\n                    if(animationData.chars[i].data && animationData.chars[i].data.shapes) {\r\n                        paths = animationData.chars[i].data.shapes[0].it;\r\n                        jLen = paths.length;\r\n\r\n                        for(j = 0; j < jLen; j += 1) {\r\n                            pathData = paths[j].ks.k;\r\n                            if(!pathData.__converted) {\r\n                                convertPathsToAbsoluteValues(paths[j].ks.k);\r\n                                pathData.__converted = true;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }());\r\n\r\n    var checkColors = (function(){\r\n        var minimumVersion = [4,1,9];\r\n\r\n        function iterateShapes(shapes){\r\n            var i, len = shapes.length;\r\n            var j, jLen;\r\n            for(i=0;i<len;i+=1){\r\n                if(shapes[i].ty === 'gr'){\r\n                    iterateShapes(shapes[i].it);\r\n                }else if(shapes[i].ty === 'fl' || shapes[i].ty === 'st'){\r\n                    if(shapes[i].c.k && shapes[i].c.k[0].i){\r\n                        jLen = shapes[i].c.k.length;\r\n                        for(j=0;j<jLen;j+=1){\r\n                            if(shapes[i].c.k[j].s){\r\n                                shapes[i].c.k[j].s[0] /= 255;\r\n                                shapes[i].c.k[j].s[1] /= 255;\r\n                                shapes[i].c.k[j].s[2] /= 255;\r\n                                shapes[i].c.k[j].s[3] /= 255;\r\n                            }\r\n                            if(shapes[i].c.k[j].e){\r\n                                shapes[i].c.k[j].e[0] /= 255;\r\n                                shapes[i].c.k[j].e[1] /= 255;\r\n                                shapes[i].c.k[j].e[2] /= 255;\r\n                                shapes[i].c.k[j].e[3] /= 255;\r\n                            }\r\n                        }\r\n                    } else {\r\n                        shapes[i].c.k[0] /= 255;\r\n                        shapes[i].c.k[1] /= 255;\r\n                        shapes[i].c.k[2] /= 255;\r\n                        shapes[i].c.k[3] /= 255;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        function iterateLayers(layers){\r\n            var i, len = layers.length;\r\n            for(i=0;i<len;i+=1){\r\n                if(layers[i].ty === 4){\r\n                    iterateShapes(layers[i].shapes);\r\n                }\r\n            }\r\n        }\r\n\r\n        return function (animationData){\r\n            if(checkVersion(minimumVersion,animationData.v)){\r\n                iterateLayers(animationData.layers);\r\n                if(animationData.assets){\r\n                    var i, len = animationData.assets.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        if(animationData.assets[i].layers){\r\n                            iterateLayers(animationData.assets[i].layers);\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }());\r\n\r\n    var checkShapes = (function(){\r\n        var minimumVersion = [4,4,18];\r\n\r\n\r\n\r\n        function completeShapes(arr){\r\n            var i, len = arr.length;\r\n            var j, jLen;\r\n            var hasPaths = false;\r\n            for(i=len-1;i>=0;i-=1){\r\n                if(arr[i].ty == 'sh'){\r\n                    if(arr[i].ks.k.i){\r\n                        arr[i].ks.k.c = arr[i].closed;\r\n                    }else{\r\n                        jLen = arr[i].ks.k.length;\r\n                        for(j=0;j<jLen;j+=1){\r\n                            if(arr[i].ks.k[j].s){\r\n                                arr[i].ks.k[j].s[0].c = arr[i].closed;\r\n                            }\r\n                            if(arr[i].ks.k[j].e){\r\n                                arr[i].ks.k[j].e[0].c = arr[i].closed;\r\n                            }\r\n                        }\r\n                    }\r\n                    hasPaths = true;\r\n                }else if(arr[i].ty == 'gr'){\r\n                    completeShapes(arr[i].it);\r\n                }\r\n            }\r\n        }\r\n\r\n        function iterateLayers(layers){\r\n            var layerData;\r\n            var i, len = layers.length;\r\n            var j, jLen, k, kLen;\r\n            for(i=0;i<len;i+=1){\r\n                layerData = layers[i];\r\n                if(layerData.hasMask){\r\n                    var maskProps = layerData.masksProperties;\r\n                    jLen = maskProps.length;\r\n                    for(j=0;j<jLen;j+=1){\r\n                        if(maskProps[j].pt.k.i){\r\n                            maskProps[j].pt.k.c = maskProps[j].cl;\r\n                        }else{\r\n                            kLen = maskProps[j].pt.k.length;\r\n                            for(k=0;k<kLen;k+=1){\r\n                                if(maskProps[j].pt.k[k].s){\r\n                                    maskProps[j].pt.k[k].s[0].c = maskProps[j].cl;\r\n                                }\r\n                                if(maskProps[j].pt.k[k].e){\r\n                                    maskProps[j].pt.k[k].e[0].c = maskProps[j].cl;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                if(layerData.ty === 4){\r\n                    completeShapes(layerData.shapes);\r\n                }\r\n            }\r\n        }\r\n\r\n        return function (animationData){\r\n            if(checkVersion(minimumVersion,animationData.v)){\r\n                iterateLayers(animationData.layers);\r\n                if(animationData.assets){\r\n                    var i, len = animationData.assets.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        if(animationData.assets[i].layers){\r\n                            iterateLayers(animationData.assets[i].layers);\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }());\r\n\r\n    function completeData(animationData, fontManager){\r\n        if(animationData.__complete){\r\n            return;\r\n        }\r\n        checkColors(animationData);\r\n        checkText(animationData);\r\n        checkChars(animationData);\r\n        checkShapes(animationData);\r\n        completeLayers(animationData.layers, animationData.assets, fontManager);\r\n        animationData.__complete = true;\r\n        //blitAnimation(animationData, animationData.assets, fontManager);\r\n    }\r\n\r\n    function completeText(data, fontManager){\r\n        if(data.t.a.length === 0 && !('m' in data.t.p)){\r\n            data.singleShape = true;\r\n        }\r\n    }\r\n\r\n    var moduleOb = {};\r\n    moduleOb.completeData = completeData;\r\n\r\n    return moduleOb;\r\n}\r\n\r\nvar dataManager = dataFunctionManager();\r\nvar FontManager = (function(){\r\n\r\n    var maxWaitingTime = 5000;\r\n    var emptyChar = {\r\n        w: 0,\r\n        size:0,\r\n        shapes:[]\r\n    };\r\n    var combinedCharacters = [];\r\n    //Hindi characters\r\n    combinedCharacters = combinedCharacters.concat([2304, 2305, 2306, 2307, 2362, 2363, 2364, 2364, 2366\r\n    , 2367, 2368, 2369, 2370, 2371, 2372, 2373, 2374, 2375, 2376, 2377, 2378, 2379\r\n    , 2380, 2381, 2382, 2383, 2387, 2388, 2389, 2390, 2391, 2402, 2403]);\r\n\r\n    function setUpNode(font, family){\r\n        var parentNode = createTag('span');\r\n        parentNode.style.fontFamily    = family;\r\n        var node = createTag('span');\r\n        // Characters that vary significantly among different fonts\r\n        node.innerHTML = 'giItT1WQy@!-/#';\r\n        // Visible - so we can measure it - but not on the screen\r\n        parentNode.style.position      = 'absolute';\r\n        parentNode.style.left          = '-10000px';\r\n        parentNode.style.top           = '-10000px';\r\n        // Large font size makes even subtle changes obvious\r\n        parentNode.style.fontSize      = '300px';\r\n        // Reset any font properties\r\n        parentNode.style.fontVariant   = 'normal';\r\n        parentNode.style.fontStyle     = 'normal';\r\n        parentNode.style.fontWeight    = 'normal';\r\n        parentNode.style.letterSpacing = '0';\r\n        parentNode.appendChild(node);\r\n        document.body.appendChild(parentNode);\r\n\r\n        // Remember width with no applied web font\r\n        var width = node.offsetWidth;\r\n        node.style.fontFamily = font + ', '+family;\r\n        return {node:node, w:width, parent:parentNode};\r\n    }\r\n\r\n    function checkLoadedFonts() {\r\n        var i, len = this.fonts.length;\r\n        var node, w;\r\n        var loadedCount = len;\r\n        for(i=0;i<len; i+= 1){\r\n            if(this.fonts[i].loaded){\r\n                loadedCount -= 1;\r\n                continue;\r\n            }\r\n            if(this.fonts[i].fOrigin === 'n' || this.fonts[i].origin === 0){\r\n                this.fonts[i].loaded = true;\r\n            } else{\r\n                node = this.fonts[i].monoCase.node;\r\n                w = this.fonts[i].monoCase.w;\r\n                if(node.offsetWidth !== w){\r\n                    loadedCount -= 1;\r\n                    this.fonts[i].loaded = true;\r\n                }else{\r\n                    node = this.fonts[i].sansCase.node;\r\n                    w = this.fonts[i].sansCase.w;\r\n                    if(node.offsetWidth !== w){\r\n                        loadedCount -= 1;\r\n                        this.fonts[i].loaded = true;\r\n                    }\r\n                }\r\n                if(this.fonts[i].loaded){\r\n                    this.fonts[i].sansCase.parent.parentNode.removeChild(this.fonts[i].sansCase.parent);\r\n                    this.fonts[i].monoCase.parent.parentNode.removeChild(this.fonts[i].monoCase.parent);\r\n                }\r\n            }\r\n        }\r\n\r\n        if(loadedCount !== 0 && Date.now() - this.initTime < maxWaitingTime){\r\n            setTimeout(this.checkLoadedFonts.bind(this),20);\r\n        }else{\r\n            setTimeout(function(){this.isLoaded = true;}.bind(this),0);\r\n\r\n        }\r\n    }\r\n\r\n    function createHelper(def, fontData){\r\n        var tHelper = createNS('text');\r\n        tHelper.style.fontSize = '100px';\r\n        //tHelper.style.fontFamily = fontData.fFamily;\r\n        tHelper.setAttribute('font-family', fontData.fFamily);\r\n        tHelper.setAttribute('font-style', fontData.fStyle);\r\n        tHelper.setAttribute('font-weight', fontData.fWeight);\r\n        tHelper.textContent = '1';\r\n        if(fontData.fClass){\r\n            tHelper.style.fontFamily = 'inherit';\r\n            tHelper.setAttribute('class', fontData.fClass);\r\n        } else {\r\n            tHelper.style.fontFamily = fontData.fFamily;\r\n        }\r\n        def.appendChild(tHelper);\r\n        var tCanvasHelper = createTag('canvas').getContext('2d');\r\n        tCanvasHelper.font = fontData.fWeight + ' ' + fontData.fStyle + ' 100px '+ fontData.fFamily;\r\n        //tCanvasHelper.font = ' 100px '+ fontData.fFamily;\r\n        return tHelper;\r\n    }\r\n\r\n    function addFonts(fontData, defs){\r\n        if(!fontData){\r\n            this.isLoaded = true;\r\n            return;\r\n        }\r\n        if(this.chars){\r\n            this.isLoaded = true;\r\n            this.fonts = fontData.list;\r\n            return;\r\n        }\r\n\r\n\r\n        var fontArr = fontData.list;\r\n        var i, len = fontArr.length;\r\n        var _pendingFonts = len;\r\n        for(i=0; i<len; i+= 1){\r\n            var shouldLoadFont = true;\r\n            var loadedSelector;\r\n            var j;\r\n            fontArr[i].loaded = false;\r\n            fontArr[i].monoCase = setUpNode(fontArr[i].fFamily,'monospace');\r\n            fontArr[i].sansCase = setUpNode(fontArr[i].fFamily,'sans-serif');\r\n            if(!fontArr[i].fPath) {\r\n                fontArr[i].loaded = true;\r\n                _pendingFonts -= 1;\r\n            }else if(fontArr[i].fOrigin === 'p' || fontArr[i].origin === 3){\r\n                loadedSelector = document.querySelectorAll('style[f-forigin=\"p\"][f-family=\"'+ fontArr[i].fFamily +'\"], style[f-origin=\"3\"][f-family=\"'+ fontArr[i].fFamily +'\"]');\r\n\r\n                if (loadedSelector.length > 0) {\r\n                    shouldLoadFont = false;\r\n                }\r\n\r\n                if (shouldLoadFont) {\r\n                    var s = createTag('style');\r\n                    s.setAttribute('f-forigin', fontArr[i].fOrigin);\r\n                    s.setAttribute('f-origin', fontArr[i].origin);\r\n                    s.setAttribute('f-family', fontArr[i].fFamily);\r\n                    s.type = \"text/css\";\r\n                    s.innerHTML = \"@font-face {\" + \"font-family: \"+fontArr[i].fFamily+\"; font-style: normal; src: url('\"+fontArr[i].fPath+\"');}\";\r\n                    defs.appendChild(s);\r\n                }\r\n            } else if(fontArr[i].fOrigin === 'g' || fontArr[i].origin === 1){\r\n                loadedSelector = document.querySelectorAll('link[f-forigin=\"g\"], link[f-origin=\"1\"]');\r\n\r\n                for (j = 0; j < loadedSelector.length; j++) {\r\n                    if (loadedSelector[j].href.indexOf(fontArr[i].fPath) !== -1) {\r\n                        // Font is already loaded\r\n                        shouldLoadFont = false;\r\n                    }\r\n                }\r\n\r\n                if (shouldLoadFont) {\r\n                    var l = createTag('link');\r\n                    l.setAttribute('f-forigin', fontArr[i].fOrigin);\r\n                    l.setAttribute('f-origin', fontArr[i].origin);\r\n                    l.type = \"text/css\";\r\n                    l.rel = \"stylesheet\";\r\n                    l.href = fontArr[i].fPath;\r\n                    document.body.appendChild(l);\r\n                }\r\n            } else if(fontArr[i].fOrigin === 't' || fontArr[i].origin === 2){\r\n                loadedSelector = document.querySelectorAll('script[f-forigin=\"t\"], script[f-origin=\"2\"]');\r\n\r\n                for (j = 0; j < loadedSelector.length; j++) {\r\n                    if (fontArr[i].fPath === loadedSelector[j].src) {\r\n                        // Font is already loaded\r\n                        shouldLoadFont = false;\r\n                    }\r\n                }\r\n\r\n                if (shouldLoadFont) {\r\n                    var sc = createTag('link');\r\n                    sc.setAttribute('f-forigin', fontArr[i].fOrigin);\r\n                    sc.setAttribute('f-origin', fontArr[i].origin);\r\n                    sc.setAttribute('rel','stylesheet');\r\n                    sc.setAttribute('href',fontArr[i].fPath);\r\n                    defs.appendChild(sc);\r\n                }\r\n            }\r\n            fontArr[i].helper = createHelper(defs,fontArr[i]);\r\n            fontArr[i].cache = {};\r\n            this.fonts.push(fontArr[i]);\r\n        }\r\n        if (_pendingFonts === 0) {\r\n            this.isLoaded = true;\r\n        } else {\r\n            //On some cases even if the font is loaded, it won't load correctly when measuring text on canvas.\r\n            //Adding this timeout seems to fix it\r\n           setTimeout(this.checkLoadedFonts.bind(this), 100);\r\n        }\r\n    }\r\n\r\n    function addChars(chars){\r\n        if(!chars){\r\n            return;\r\n        }\r\n        if(!this.chars){\r\n            this.chars = [];\r\n        }\r\n        var i, len = chars.length;\r\n        var j, jLen = this.chars.length, found;\r\n        for(i=0;i<len;i+=1){\r\n            j = 0;\r\n            found = false;\r\n            while(j<jLen){\r\n                if(this.chars[j].style === chars[i].style && this.chars[j].fFamily === chars[i].fFamily && this.chars[j].ch === chars[i].ch){\r\n                    found = true;\r\n                }\r\n                j += 1;\r\n            }\r\n            if(!found){\r\n                this.chars.push(chars[i]);\r\n                jLen += 1;\r\n            }\r\n        }\r\n    }\r\n\r\n    function getCharData(char, style, font){\r\n        var i = 0, len = this.chars.length;\r\n        while( i < len) {\r\n            if(this.chars[i].ch === char && this.chars[i].style === style && this.chars[i].fFamily === font){\r\n\r\n                return this.chars[i];\r\n            }\r\n            i+= 1;\r\n        }\r\n        if((typeof char === 'string' && char.charCodeAt(0) !== 13 || !char) && console && console.warn) {\r\n            console.warn('Missing character from exported characters list: ', char, style, font);\r\n        }\r\n        return emptyChar;\r\n    }\r\n\r\n    function measureText(char, fontName, size) {\r\n        var fontData = this.getFontByName(fontName);\r\n        var index = char.charCodeAt(0);\r\n        if(!fontData.cache[index + 1]) {\r\n            var tHelper = fontData.helper;\r\n            //Canvas version\r\n            //fontData.cache[index] = tHelper.measureText(char).width / 100;\r\n            //SVG version\r\n            //console.log(tHelper.getBBox().width)\r\n            if (char === ' ') {\r\n                tHelper.textContent = '|' + char + '|';\r\n                var doubleSize = tHelper.getComputedTextLength();\r\n                tHelper.textContent = '||';\r\n                var singleSize = tHelper.getComputedTextLength();\r\n                fontData.cache[index + 1] = (doubleSize - singleSize)/100;\r\n            } else {\r\n                tHelper.textContent = char;\r\n                fontData.cache[index + 1] = (tHelper.getComputedTextLength())/100;\r\n            }\r\n        }\r\n        return fontData.cache[index + 1] * size;\r\n    }\r\n\r\n    function getFontByName(name){\r\n        var i = 0, len = this.fonts.length;\r\n        while(i<len){\r\n            if(this.fonts[i].fName === name) {\r\n                return this.fonts[i];\r\n            }\r\n            i += 1;\r\n        }\r\n        return this.fonts[0];\r\n    }\r\n\r\n    function getCombinedCharacterCodes() {\r\n        return combinedCharacters;\r\n    }\r\n\r\n    function loaded() {\r\n        return this.isLoaded;\r\n    }\r\n\r\n    var Font = function(){\r\n        this.fonts = [];\r\n        this.chars = null;\r\n        this.typekitLoaded = 0;\r\n        this.isLoaded = false;\r\n        this.initTime = Date.now();\r\n    };\r\n    //TODO: for now I'm adding these methods to the Class and not the prototype. Think of a better way to implement it. \r\n    Font.getCombinedCharacterCodes = getCombinedCharacterCodes;\r\n\r\n    Font.prototype.addChars = addChars;\r\n    Font.prototype.addFonts = addFonts;\r\n    Font.prototype.getCharData = getCharData;\r\n    Font.prototype.getFontByName = getFontByName;\r\n    Font.prototype.measureText = measureText;\r\n    Font.prototype.checkLoadedFonts = checkLoadedFonts;\r\n    Font.prototype.loaded = loaded;\r\n\r\n    return Font;\r\n\r\n}());\r\nvar PropertyFactory = (function(){\r\n\r\n    var initFrame = initialDefaultFrame;\r\n    var math_abs = Math.abs;\r\n\r\n    function interpolateValue(frameNum, caching) {\r\n        var offsetTime = this.offsetTime;\r\n        var newValue;\r\n        if (this.propType === 'multidimensional') {\r\n            newValue = createTypedArray('float32', this.pv.length);\r\n        }\r\n        var iterationIndex = caching.lastIndex;\r\n        var i = iterationIndex;\r\n        var len = this.keyframes.length - 1, flag = true;\r\n        var keyData, nextKeyData;\r\n\r\n        while (flag) {\r\n            keyData = this.keyframes[i];\r\n            nextKeyData = this.keyframes[i + 1];\r\n            if (i === len - 1 && frameNum >= nextKeyData.t - offsetTime){\r\n                if(keyData.h){\r\n                    keyData = nextKeyData;\r\n                }\r\n                iterationIndex = 0;\r\n                break;\r\n            }\r\n            if ((nextKeyData.t - offsetTime) > frameNum){\r\n                iterationIndex = i;\r\n                break;\r\n            }\r\n            if (i < len - 1){\r\n                i += 1;\r\n            } else {\r\n                iterationIndex = 0;\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        var k, kLen, perc, jLen, j, fnc;\r\n        var nextKeyTime = nextKeyData.t - offsetTime;\r\n        var keyTime = keyData.t - offsetTime;\r\n        var endValue;\r\n        if (keyData.to) {\r\n            if (!keyData.bezierData) {\r\n                keyData.bezierData = bez.buildBezierData(keyData.s, nextKeyData.s || keyData.e, keyData.to, keyData.ti);\r\n            }\r\n            var bezierData = keyData.bezierData;\r\n            if (frameNum >= nextKeyTime || frameNum < keyTime) {\r\n                var ind = frameNum >= nextKeyTime ? bezierData.points.length - 1 : 0;\r\n                kLen = bezierData.points[ind].point.length;\r\n                for (k = 0; k < kLen; k += 1) {\r\n                    newValue[k] = bezierData.points[ind].point[k];\r\n                }\r\n                // caching._lastKeyframeIndex = -1;\r\n            } else {\r\n                if (keyData.__fnct) {\r\n                    fnc = keyData.__fnct;\r\n                } else {\r\n                    fnc = BezierFactory.getBezierEasing(keyData.o.x, keyData.o.y, keyData.i.x, keyData.i.y, keyData.n).get;\r\n                    keyData.__fnct = fnc;\r\n                }\r\n                perc = fnc((frameNum - keyTime) / (nextKeyTime - keyTime));\r\n                var distanceInLine = bezierData.segmentLength*perc;\r\n\r\n                var segmentPerc;\r\n                var addedLength =  (caching.lastFrame < frameNum && caching._lastKeyframeIndex === i) ? caching._lastAddedLength : 0;\r\n                j =  (caching.lastFrame < frameNum && caching._lastKeyframeIndex === i) ? caching._lastPoint : 0;\r\n                flag = true;\r\n                jLen = bezierData.points.length;\r\n                while (flag) {\r\n                    addedLength += bezierData.points[j].partialLength;\r\n                    if (distanceInLine === 0 || perc === 0 || j === bezierData.points.length - 1) {\r\n                        kLen = bezierData.points[j].point.length;\r\n                        for (k = 0; k < kLen; k += 1) {\r\n                            newValue[k] = bezierData.points[j].point[k];\r\n                        }\r\n                        break;\r\n                    } else if (distanceInLine >= addedLength && distanceInLine < addedLength + bezierData.points[j + 1].partialLength) {\r\n                        segmentPerc = (distanceInLine - addedLength) / bezierData.points[j + 1].partialLength;\r\n                        kLen = bezierData.points[j].point.length;\r\n                        for (k = 0; k < kLen; k += 1) {\r\n                            newValue[k] = bezierData.points[j].point[k] + (bezierData.points[j + 1].point[k] - bezierData.points[j].point[k]) * segmentPerc;\r\n                        }\r\n                        break;\r\n                    }\r\n                    if (j < jLen - 1){\r\n                        j += 1;\r\n                    } else {\r\n                        flag = false;\r\n                    }\r\n                }\r\n                caching._lastPoint = j;\r\n                caching._lastAddedLength = addedLength - bezierData.points[j].partialLength;\r\n                caching._lastKeyframeIndex = i;\r\n            }\r\n        } else {\r\n            var outX, outY, inX, inY, keyValue;\r\n            len = keyData.s.length;\r\n            endValue = nextKeyData.s || keyData.e;\r\n            if (this.sh && keyData.h !== 1) {\r\n                if (frameNum >= nextKeyTime) {\r\n                    newValue[0] = endValue[0];\r\n                    newValue[1] = endValue[1];\r\n                    newValue[2] = endValue[2];\r\n                } else if (frameNum <= keyTime) {\r\n                    newValue[0] = keyData.s[0];\r\n                    newValue[1] = keyData.s[1];\r\n                    newValue[2] = keyData.s[2];\r\n                } else {\r\n                    var quatStart = createQuaternion(keyData.s);\r\n                    var quatEnd = createQuaternion(endValue);\r\n                    var time = (frameNum - keyTime) / (nextKeyTime - keyTime);\r\n                    quaternionToEuler(newValue, slerp(quatStart, quatEnd, time));\r\n                }\r\n                \r\n            } else {\r\n                for(i = 0; i < len; i += 1) {\r\n                    if (keyData.h !== 1) {\r\n                        if (frameNum >= nextKeyTime) {\r\n                            perc = 1;\r\n                        } else if(frameNum < keyTime) {\r\n                            perc = 0;\r\n                        } else {\r\n                            if(keyData.o.x.constructor === Array) {\r\n                                if (!keyData.__fnct) {\r\n                                    keyData.__fnct = [];\r\n                                }\r\n                                if (!keyData.__fnct[i]) {\r\n                                    outX = (typeof keyData.o.x[i] === 'undefined') ? keyData.o.x[0] : keyData.o.x[i];\r\n                                    outY = (typeof keyData.o.y[i] === 'undefined') ? keyData.o.y[0] : keyData.o.y[i];\r\n                                    inX = (typeof keyData.i.x[i] === 'undefined') ? keyData.i.x[0] : keyData.i.x[i];\r\n                                    inY = (typeof keyData.i.y[i] === 'undefined') ? keyData.i.y[0] : keyData.i.y[i];\r\n                                    fnc = BezierFactory.getBezierEasing(outX, outY, inX, inY).get;\r\n                                    keyData.__fnct[i] = fnc;\r\n                                } else {\r\n                                    fnc = keyData.__fnct[i];\r\n                                }\r\n                            } else {\r\n                                if (!keyData.__fnct) {\r\n                                    outX = keyData.o.x;\r\n                                    outY = keyData.o.y;\r\n                                    inX = keyData.i.x;\r\n                                    inY = keyData.i.y;\r\n                                    fnc = BezierFactory.getBezierEasing(outX, outY, inX, inY).get;\r\n                                    keyData.__fnct = fnc;\r\n                                } else {\r\n                                    fnc = keyData.__fnct;\r\n                                }\r\n                            }\r\n                            perc = fnc((frameNum - keyTime) / (nextKeyTime - keyTime ));\r\n                        }\r\n                    }\r\n\r\n                    endValue = nextKeyData.s || keyData.e;\r\n                    keyValue = keyData.h === 1 ? keyData.s[i] : keyData.s[i] + (endValue[i] - keyData.s[i]) * perc;\r\n\r\n                    if (this.propType === 'multidimensional') {\r\n                        newValue[i] = keyValue;\r\n                    } else {\r\n                        newValue = keyValue;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        caching.lastIndex = iterationIndex;\r\n        return newValue;\r\n    }\r\n\r\n    //based on @Toji's https://github.com/toji/gl-matrix/\r\n    function slerp(a, b, t) {\r\n        var out = [];\r\n        var ax = a[0], ay = a[1], az = a[2], aw = a[3],\r\n        bx = b[0], by = b[1], bz = b[2], bw = b[3]\r\n\r\n        var omega, cosom, sinom, scale0, scale1;\r\n\r\n        cosom = ax * bx + ay * by + az * bz + aw * bw;\r\n        if (cosom < 0.0) {\r\n            cosom = -cosom;\r\n            bx = -bx;\r\n            by = -by;\r\n            bz = -bz;\r\n            bw = -bw;\r\n        }\r\n        if ((1.0 - cosom) > 0.000001) {\r\n            omega = Math.acos(cosom);\r\n            sinom = Math.sin(omega);\r\n            scale0 = Math.sin((1.0 - t) * omega) / sinom;\r\n            scale1 = Math.sin(t * omega) / sinom;\r\n        } else {\r\n            scale0 = 1.0 - t;\r\n            scale1 = t;\r\n        }\r\n        out[0] = scale0 * ax + scale1 * bx;\r\n        out[1] = scale0 * ay + scale1 * by;\r\n        out[2] = scale0 * az + scale1 * bz;\r\n        out[3] = scale0 * aw + scale1 * bw;\r\n\r\n        return out;\r\n    }\r\n\r\n    function quaternionToEuler(out, quat) {\r\n        var qx = quat[0];\r\n        var qy = quat[1];\r\n        var qz = quat[2];\r\n        var qw = quat[3];\r\n        var heading = Math.atan2(2*qy*qw-2*qx*qz , 1 - 2*qy*qy - 2*qz*qz)\r\n        var attitude = Math.asin(2*qx*qy + 2*qz*qw) \r\n        var bank = Math.atan2(2*qx*qw-2*qy*qz , 1 - 2*qx*qx - 2*qz*qz);\r\n        out[0] = heading/degToRads;\r\n        out[1] = attitude/degToRads;\r\n        out[2] = bank/degToRads;\r\n    }\r\n\r\n    function createQuaternion(values) {\r\n        var heading = values[0] * degToRads;\r\n        var attitude = values[1] * degToRads;\r\n        var bank = values[2] * degToRads;\r\n        var c1 = Math.cos(heading / 2);\r\n        var c2 = Math.cos(attitude / 2);\r\n        var c3 = Math.cos(bank / 2);\r\n        var s1 = Math.sin(heading / 2);\r\n        var s2 = Math.sin(attitude / 2);\r\n        var s3 = Math.sin(bank / 2);\r\n        var w = c1 * c2 * c3 - s1 * s2 * s3;\r\n        var x = s1 * s2 * c3 + c1 * c2 * s3;\r\n        var y = s1 * c2 * c3 + c1 * s2 * s3;\r\n        var z = c1 * s2 * c3 - s1 * c2 * s3;\r\n\r\n        return [x,y,z,w];\r\n    }\r\n\r\n    function getValueAtCurrentTime(){\r\n        var frameNum = this.comp.renderedFrame - this.offsetTime;\r\n        var initTime = this.keyframes[0].t - this.offsetTime;\r\n        var endTime = this.keyframes[this.keyframes.length- 1].t-this.offsetTime;\r\n        if(!(frameNum === this._caching.lastFrame || (this._caching.lastFrame !== initFrame && ((this._caching.lastFrame >= endTime && frameNum >= endTime) || (this._caching.lastFrame < initTime && frameNum < initTime))))){\r\n            if(this._caching.lastFrame >= frameNum) {\r\n                this._caching._lastKeyframeIndex = -1;\r\n                this._caching.lastIndex = 0;\r\n            }\r\n\r\n            var renderResult = this.interpolateValue(frameNum, this._caching);\r\n            this.pv = renderResult;\r\n        }\r\n        this._caching.lastFrame = frameNum;\r\n        return this.pv;\r\n    }\r\n\r\n    function setVValue(val) {\r\n        var multipliedValue;\r\n        if(this.propType === 'unidimensional') {\r\n            multipliedValue = val * this.mult;\r\n            if(math_abs(this.v - multipliedValue) > 0.00001) {\r\n                this.v = multipliedValue;\r\n                this._mdf = true;\r\n            }\r\n        } else {\r\n            var i = 0, len = this.v.length;\r\n            while (i < len) {\r\n                multipliedValue = val[i] * this.mult;\r\n                if (math_abs(this.v[i] - multipliedValue) > 0.00001) {\r\n                    this.v[i] = multipliedValue;\r\n                    this._mdf = true;\r\n                }\r\n                i += 1;\r\n            }\r\n        }\r\n    }\r\n\r\n    function processEffectsSequence() {\r\n        if (this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) {\r\n            return;\r\n        }\r\n        if(this.lock) {\r\n            this.setVValue(this.pv);\r\n            return;\r\n        }\r\n        this.lock = true;\r\n        this._mdf = this._isFirstFrame;\r\n        var multipliedValue;\r\n        var i, len = this.effectsSequence.length;\r\n        var finalValue = this.kf ? this.pv : this.data.k;\r\n        for(i = 0; i < len; i += 1) {\r\n            finalValue = this.effectsSequence[i](finalValue);\r\n        }\r\n        this.setVValue(finalValue);\r\n        this._isFirstFrame = false;\r\n        this.lock = false;\r\n        this.frameId = this.elem.globalData.frameId;\r\n    }\r\n\r\n    function addEffect(effectFunction) {\r\n        this.effectsSequence.push(effectFunction);\r\n        this.container.addDynamicProperty(this);\r\n    }\r\n\r\n    function ValueProperty(elem, data, mult, container){\r\n        this.propType = 'unidimensional';\r\n        this.mult = mult || 1;\r\n        this.data = data;\r\n        this.v = mult ? data.k * mult : data.k;\r\n        this.pv = data.k;\r\n        this._mdf = false;\r\n        this.elem = elem;\r\n        this.container = container;\r\n        this.comp = elem.comp;\r\n        this.k = false;\r\n        this.kf = false;\r\n        this.vel = 0;\r\n        this.effectsSequence = [];\r\n        this._isFirstFrame = true;\r\n        this.getValue = processEffectsSequence;\r\n        this.setVValue = setVValue;\r\n        this.addEffect = addEffect;\r\n    }\r\n\r\n    function MultiDimensionalProperty(elem, data, mult, container) {\r\n        this.propType = 'multidimensional';\r\n        this.mult = mult || 1;\r\n        this.data = data;\r\n        this._mdf = false;\r\n        this.elem = elem;\r\n        this.container = container;\r\n        this.comp = elem.comp;\r\n        this.k = false;\r\n        this.kf = false;\r\n        this.frameId = -1;\r\n        var i, len = data.k.length;\r\n        this.v = createTypedArray('float32', len);\r\n        this.pv = createTypedArray('float32', len);\r\n        var arr = createTypedArray('float32', len);\r\n        this.vel = createTypedArray('float32', len);\r\n        for (i = 0; i < len; i += 1) {\r\n            this.v[i] = data.k[i] * this.mult;\r\n            this.pv[i] = data.k[i];\r\n        }\r\n        this._isFirstFrame = true;\r\n        this.effectsSequence = [];\r\n        this.getValue = processEffectsSequence;\r\n        this.setVValue = setVValue;\r\n        this.addEffect = addEffect;\r\n    }\r\n\r\n    function KeyframedValueProperty(elem, data, mult, container) {\r\n        this.propType = 'unidimensional';\r\n        this.keyframes = data.k;\r\n        this.offsetTime = elem.data.st;\r\n        this.frameId = -1;\r\n        this._caching = {lastFrame: initFrame, lastIndex: 0, value: 0, _lastKeyframeIndex: -1};\r\n        this.k = true;\r\n        this.kf = true;\r\n        this.data = data;\r\n        this.mult = mult || 1;\r\n        this.elem = elem;\r\n        this.container = container;\r\n        this.comp = elem.comp;\r\n        this.v = initFrame;\r\n        this.pv = initFrame;\r\n        this._isFirstFrame = true;\r\n        this.getValue = processEffectsSequence;\r\n        this.setVValue = setVValue;\r\n        this.interpolateValue = interpolateValue;\r\n        this.effectsSequence = [getValueAtCurrentTime.bind(this)];\r\n        this.addEffect = addEffect;\r\n    }\r\n\r\n    function KeyframedMultidimensionalProperty(elem, data, mult, container){\r\n        this.propType = 'multidimensional';\r\n        var i, len = data.k.length;\r\n        var s, e,to,ti;\r\n        for (i = 0; i < len - 1; i += 1) {\r\n            if (data.k[i].to && data.k[i].s && data.k[i].e) {\r\n                s = data.k[i].s;\r\n                e = data.k[i].e;\r\n                to = data.k[i].to;\r\n                ti = data.k[i].ti;\r\n                if((s.length === 2 && !(s[0] === e[0] && s[1] === e[1]) && bez.pointOnLine2D(s[0],s[1],e[0],e[1],s[0] + to[0],s[1] + to[1]) && bez.pointOnLine2D(s[0],s[1],e[0],e[1],e[0] + ti[0],e[1] + ti[1])) || (s.length === 3 && !(s[0] === e[0] && s[1] === e[1] && s[2] === e[2]) && bez.pointOnLine3D(s[0],s[1],s[2],e[0],e[1],e[2],s[0] + to[0],s[1] + to[1],s[2] + to[2]) && bez.pointOnLine3D(s[0],s[1],s[2],e[0],e[1],e[2],e[0] + ti[0],e[1] + ti[1],e[2] + ti[2]))){\r\n                    data.k[i].to = null;\r\n                    data.k[i].ti = null;\r\n                }\r\n                if(s[0] === e[0] && s[1] === e[1] && to[0] === 0 && to[1] === 0 && ti[0] === 0 && ti[1] === 0) {\r\n                    if(s.length === 2 || (s[2] === e[2] && to[2] === 0 && ti[2] === 0)) {\r\n                        data.k[i].to = null;\r\n                        data.k[i].ti = null;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.effectsSequence = [getValueAtCurrentTime.bind(this)];\r\n        this.keyframes = data.k;\r\n        this.offsetTime = elem.data.st;\r\n        this.k = true;\r\n        this.kf = true;\r\n        this._isFirstFrame = true;\r\n        this.mult = mult || 1;\r\n        this.elem = elem;\r\n        this.container = container;\r\n        this.comp = elem.comp;\r\n        this.getValue = processEffectsSequence;\r\n        this.setVValue = setVValue;\r\n        this.interpolateValue = interpolateValue;\r\n        this.frameId = -1;\r\n        var arrLen = data.k[0].s.length;\r\n        this.v = createTypedArray('float32', arrLen);\r\n        this.pv = createTypedArray('float32', arrLen);\r\n        for (i = 0; i < arrLen; i += 1) {\r\n            this.v[i] = initFrame;\r\n            this.pv[i] = initFrame;\r\n        }\r\n        this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray('float32', arrLen)};\r\n        this.addEffect = addEffect;\r\n    }\r\n\r\n    function getProp(elem,data,type, mult, container) {\r\n        var p;\r\n        if(!data.k.length){\r\n            p = new ValueProperty(elem,data, mult, container);\r\n        }else if(typeof(data.k[0]) === 'number'){\r\n            p = new MultiDimensionalProperty(elem,data, mult, container);\r\n        }else{\r\n            switch(type){\r\n                case 0:\r\n                    p = new KeyframedValueProperty(elem,data,mult, container);\r\n                    break;\r\n                case 1:\r\n                    p = new KeyframedMultidimensionalProperty(elem,data,mult, container);\r\n                    break;\r\n            }\r\n        }\r\n        if(p.effectsSequence.length){\r\n            container.addDynamicProperty(p);\r\n        }\r\n        return p;\r\n    }\r\n\r\n    var ob = {\r\n        getProp: getProp\r\n    };\r\n    return ob;\r\n}());\r\nvar TransformPropertyFactory = (function() {\r\n\r\n    function applyToMatrix(mat) {\r\n        var _mdf = this._mdf;\r\n        this.iterateDynamicProperties();\r\n        this._mdf = this._mdf || _mdf;\r\n        if (this.a) {\r\n            mat.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n        }\r\n        if (this.s) {\r\n            mat.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n        }\r\n        if (this.sk) {\r\n            mat.skewFromAxis(-this.sk.v, this.sa.v);\r\n        }\r\n        if (this.r) {\r\n            mat.rotate(-this.r.v);\r\n        } else {\r\n            mat.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\r\n        }\r\n        if (this.data.p.s) {\r\n            if (this.data.p.z) {\r\n                mat.translate(this.px.v, this.py.v, -this.pz.v);\r\n            } else {\r\n                mat.translate(this.px.v, this.py.v, 0);\r\n            }\r\n        } else {\r\n            mat.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);\r\n        }\r\n    }\r\n    function processKeys(forceRender){\r\n        if (this.elem.globalData.frameId === this.frameId) {\r\n            return;\r\n        }\r\n        if(this._isDirty) {\r\n            this.precalculateMatrix();\r\n            this._isDirty = false;\r\n        }\r\n\r\n        this.iterateDynamicProperties();\r\n\r\n        if (this._mdf || forceRender) {\r\n            this.v.cloneFromProps(this.pre.props);\r\n            if (this.appliedTransformations < 1) {\r\n                this.v.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n            }\r\n            if(this.appliedTransformations < 2) {\r\n                this.v.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n            }\r\n            if (this.sk && this.appliedTransformations < 3) {\r\n                this.v.skewFromAxis(-this.sk.v, this.sa.v);\r\n            }\r\n            if (this.r && this.appliedTransformations < 4) {\r\n                this.v.rotate(-this.r.v);\r\n            } else if (!this.r && this.appliedTransformations < 4){\r\n                this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\r\n            }\r\n            if (this.autoOriented) {\r\n                var v1,v2, frameRate = this.elem.globalData.frameRate;\r\n                if(this.p && this.p.keyframes && this.p.getValueAtTime) {\r\n                    if (this.p._caching.lastFrame+this.p.offsetTime <= this.p.keyframes[0].t) {\r\n                        v1 = this.p.getValueAtTime((this.p.keyframes[0].t + 0.01) / frameRate,0);\r\n                        v2 = this.p.getValueAtTime(this.p.keyframes[0].t / frameRate, 0);\r\n                    } else if(this.p._caching.lastFrame+this.p.offsetTime >= this.p.keyframes[this.p.keyframes.length - 1].t) {\r\n                        v1 = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t / frameRate), 0);\r\n                        v2 = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t - 0.05) / frameRate, 0);\r\n                    } else {\r\n                        v1 = this.p.pv;\r\n                        v2 = this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime - 0.01) / frameRate, this.p.offsetTime);\r\n                    }\r\n                } else if(this.px && this.px.keyframes && this.py.keyframes && this.px.getValueAtTime && this.py.getValueAtTime) {\r\n                    v1 = [];\r\n                    v2 = [];\r\n                    var px = this.px, py = this.py, frameRate;\r\n                    if (px._caching.lastFrame+px.offsetTime <= px.keyframes[0].t) {\r\n                        v1[0] = px.getValueAtTime((px.keyframes[0].t + 0.01) / frameRate,0);\r\n                        v1[1] = py.getValueAtTime((py.keyframes[0].t + 0.01) / frameRate,0);\r\n                        v2[0] = px.getValueAtTime((px.keyframes[0].t) / frameRate,0);\r\n                        v2[1] = py.getValueAtTime((py.keyframes[0].t) / frameRate,0);\r\n                    } else if(px._caching.lastFrame+px.offsetTime >= px.keyframes[px.keyframes.length - 1].t) {\r\n                        v1[0] = px.getValueAtTime((px.keyframes[px.keyframes.length - 1].t / frameRate),0);\r\n                        v1[1] = py.getValueAtTime((py.keyframes[py.keyframes.length - 1].t / frameRate),0);\r\n                        v2[0] = px.getValueAtTime((px.keyframes[px.keyframes.length - 1].t - 0.01) / frameRate,0);\r\n                        v2[1] = py.getValueAtTime((py.keyframes[py.keyframes.length - 1].t - 0.01) / frameRate,0);\r\n                    } else {\r\n                        v1 = [px.pv, py.pv];\r\n                        v2[0] = px.getValueAtTime((px._caching.lastFrame+px.offsetTime - 0.01) / frameRate,px.offsetTime);\r\n                        v2[1] = py.getValueAtTime((py._caching.lastFrame+py.offsetTime - 0.01) / frameRate,py.offsetTime);\r\n                    }\r\n                }\r\n                this.v.rotate(-Math.atan2(v1[1] - v2[1], v1[0] - v2[0]));\r\n            }\r\n            if(this.data.p && this.data.p.s){\r\n                if(this.data.p.z) {\r\n                    this.v.translate(this.px.v, this.py.v, -this.pz.v);\r\n                } else {\r\n                    this.v.translate(this.px.v, this.py.v, 0);\r\n                }\r\n            }else{\r\n                this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2]);\r\n            }\r\n        }\r\n        this.frameId = this.elem.globalData.frameId;\r\n    }\r\n\r\n    function precalculateMatrix() {\r\n        if(!this.a.k) {\r\n            this.pre.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n            this.appliedTransformations = 1;\r\n        } else {\r\n            return;\r\n        }\r\n        if(!this.s.effectsSequence.length) {\r\n            this.pre.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n            this.appliedTransformations = 2;\r\n        } else {\r\n            return;\r\n        }\r\n        if(this.sk) {\r\n            if(!this.sk.effectsSequence.length && !this.sa.effectsSequence.length) {\r\n                this.pre.skewFromAxis(-this.sk.v, this.sa.v);\r\n            this.appliedTransformations = 3;\r\n            } else {\r\n                return;\r\n            }\r\n        }\r\n        if (this.r) {\r\n            if(!this.r.effectsSequence.length) {\r\n                this.pre.rotate(-this.r.v);\r\n                this.appliedTransformations = 4;\r\n            } else {\r\n                return;\r\n            }\r\n        } else if(!this.rz.effectsSequence.length && !this.ry.effectsSequence.length && !this.rx.effectsSequence.length && !this.or.effectsSequence.length) {\r\n            this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\r\n            this.appliedTransformations = 4;\r\n        }\r\n    }\r\n\r\n    function autoOrient(){\r\n        //\r\n        //var prevP = this.getValueAtTime();\r\n    }\r\n\r\n    function addDynamicProperty(prop) {\r\n        this._addDynamicProperty(prop);\r\n        this.elem.addDynamicProperty(prop);\r\n        this._isDirty = true;\r\n    }\r\n\r\n    function TransformProperty(elem,data,container){\r\n        this.elem = elem;\r\n        this.frameId = -1;\r\n        this.propType = 'transform';\r\n        this.data = data;\r\n        this.v = new Matrix();\r\n        //Precalculated matrix with non animated properties\r\n        this.pre = new Matrix();\r\n        this.appliedTransformations = 0;\r\n        this.initDynamicPropertyContainer(container || elem);\r\n        if(data.p && data.p.s){\r\n            this.px = PropertyFactory.getProp(elem,data.p.x,0,0,this);\r\n            this.py = PropertyFactory.getProp(elem,data.p.y,0,0,this);\r\n            if(data.p.z){\r\n                this.pz = PropertyFactory.getProp(elem,data.p.z,0,0,this);\r\n            }\r\n        }else{\r\n            this.p = PropertyFactory.getProp(elem,data.p || {k:[0,0,0]},1,0,this);\r\n        }\r\n        if(data.rx) {\r\n            this.rx = PropertyFactory.getProp(elem, data.rx, 0, degToRads, this);\r\n            this.ry = PropertyFactory.getProp(elem, data.ry, 0, degToRads, this);\r\n            this.rz = PropertyFactory.getProp(elem, data.rz, 0, degToRads, this);\r\n            if(data.or.k[0].ti) {\r\n                var i, len = data.or.k.length;\r\n                for(i=0;i<len;i+=1) {\r\n                    data.or.k[i].to = data.or.k[i].ti = null;\r\n                }\r\n            }\r\n            this.or = PropertyFactory.getProp(elem, data.or, 1, degToRads, this);\r\n            //sh Indicates it needs to be capped between -180 and 180\r\n            this.or.sh = true;\r\n        } else {\r\n            this.r = PropertyFactory.getProp(elem, data.r || {k: 0}, 0, degToRads, this);\r\n        }\r\n        if(data.sk){\r\n            this.sk = PropertyFactory.getProp(elem, data.sk, 0, degToRads, this);\r\n            this.sa = PropertyFactory.getProp(elem, data.sa, 0, degToRads, this);\r\n        }\r\n        this.a = PropertyFactory.getProp(elem,data.a || {k:[0,0,0]},1,0,this);\r\n        this.s = PropertyFactory.getProp(elem,data.s || {k:[100,100,100]},1,0.01,this);\r\n        // Opacity is not part of the transform properties, that's why it won't use this.dynamicProperties. That way transforms won't get updated if opacity changes.\r\n        if(data.o){\r\n            this.o = PropertyFactory.getProp(elem,data.o,0,0.01,elem);\r\n        } else {\r\n            this.o = {_mdf:false,v:1};\r\n        }\r\n        this._isDirty = true;\r\n        if(!this.dynamicProperties.length){\r\n            this.getValue(true);\r\n        }\r\n    }\r\n\r\n    TransformProperty.prototype = {\r\n        applyToMatrix: applyToMatrix,\r\n        getValue: processKeys,\r\n        precalculateMatrix: precalculateMatrix,\r\n        autoOrient: autoOrient\r\n    }\r\n\r\n    extendPrototype([DynamicPropertyContainer], TransformProperty);\r\n    TransformProperty.prototype.addDynamicProperty = addDynamicProperty;\r\n    TransformProperty.prototype._addDynamicProperty = DynamicPropertyContainer.prototype.addDynamicProperty;\r\n\r\n    function getTransformProperty(elem,data,container){\r\n        return new TransformProperty(elem,data,container);\r\n    }\r\n\r\n    return {\r\n        getTransformProperty: getTransformProperty\r\n    };\r\n\r\n}());\r\nfunction ShapePath(){\r\n\tthis.c = false;\r\n\tthis._length = 0;\r\n\tthis._maxLength = 8;\r\n\tthis.v = createSizedArray(this._maxLength);\r\n\tthis.o = createSizedArray(this._maxLength);\r\n\tthis.i = createSizedArray(this._maxLength);\r\n}\r\n\r\nShapePath.prototype.setPathData = function(closed, len) {\r\n\tthis.c = closed;\r\n\tthis.setLength(len);\r\n\tvar i = 0;\r\n\twhile(i < len){\r\n\t\tthis.v[i] = point_pool.newElement();\r\n\t\tthis.o[i] = point_pool.newElement();\r\n\t\tthis.i[i] = point_pool.newElement();\r\n\t\ti += 1;\r\n\t}\r\n};\r\n\r\nShapePath.prototype.setLength = function(len) {\r\n\twhile(this._maxLength < len) {\r\n\t\tthis.doubleArrayLength();\r\n\t}\r\n\tthis._length = len;\r\n};\r\n\r\nShapePath.prototype.doubleArrayLength = function() {\r\n\tthis.v = this.v.concat(createSizedArray(this._maxLength));\r\n\tthis.i = this.i.concat(createSizedArray(this._maxLength));\r\n\tthis.o = this.o.concat(createSizedArray(this._maxLength));\r\n\tthis._maxLength *= 2;\r\n};\r\n\r\nShapePath.prototype.setXYAt = function(x, y, type, pos, replace) {\r\n\tvar arr;\r\n\tthis._length = Math.max(this._length, pos + 1);\r\n\tif(this._length >= this._maxLength) {\r\n\t\tthis.doubleArrayLength();\r\n\t}\r\n\tswitch(type){\r\n\t\tcase 'v':\r\n\t\t\tarr = this.v;\r\n\t\t\tbreak;\r\n\t\tcase 'i':\r\n\t\t\tarr = this.i;\r\n\t\t\tbreak;\r\n\t\tcase 'o':\r\n\t\t\tarr = this.o;\r\n\t\t\tbreak;\r\n\t}\r\n\tif(!arr[pos] || (arr[pos] && !replace)){\r\n\t\tarr[pos] = point_pool.newElement();\r\n\t}\r\n\tarr[pos][0] = x;\r\n\tarr[pos][1] = y;\r\n};\r\n\r\nShapePath.prototype.setTripleAt = function(vX,vY,oX,oY,iX,iY,pos, replace) {\r\n\tthis.setXYAt(vX,vY,'v',pos, replace);\r\n\tthis.setXYAt(oX,oY,'o',pos, replace);\r\n\tthis.setXYAt(iX,iY,'i',pos, replace);\r\n};\r\n\r\nShapePath.prototype.reverse = function() {\r\n\tvar newPath = new ShapePath();\r\n\tnewPath.setPathData(this.c, this._length);\r\n\tvar vertices = this.v, outPoints = this.o, inPoints = this.i;\r\n\tvar init = 0;\r\n\tif (this.c) {\r\n\t\tnewPath.setTripleAt(vertices[0][0], vertices[0][1], inPoints[0][0], inPoints[0][1], outPoints[0][0], outPoints[0][1], 0, false);\r\n        init = 1;\r\n    }\r\n    var cnt = this._length - 1;\r\n    var len = this._length;\r\n\r\n    var i;\r\n    for (i = init; i < len; i += 1) {\r\n    \tnewPath.setTripleAt(vertices[cnt][0], vertices[cnt][1], inPoints[cnt][0], inPoints[cnt][1], outPoints[cnt][0], outPoints[cnt][1], i, false);\r\n        cnt -= 1;\r\n    }\r\n    return newPath;\r\n};\r\nvar ShapePropertyFactory = (function(){\r\n\r\n    var initFrame = -999999;\r\n\r\n    function interpolateShape(frameNum, previousValue, caching) {\r\n        var iterationIndex = caching.lastIndex;\r\n        var keyPropS,keyPropE,isHold, j, k, jLen, kLen, perc, vertexValue;\r\n        var kf = this.keyframes;\r\n        if(frameNum < kf[0].t-this.offsetTime){\r\n            keyPropS = kf[0].s[0];\r\n            isHold = true;\r\n            iterationIndex = 0;\r\n        }else if(frameNum >= kf[kf.length - 1].t-this.offsetTime){\r\n            keyPropS = kf[kf.length - 1].s ? kf[kf.length - 1].s[0] : kf[kf.length - 2].e[0];\r\n            /*if(kf[kf.length - 1].s){\r\n                keyPropS = kf[kf.length - 1].s[0];\r\n            }else{\r\n                keyPropS = kf[kf.length - 2].e[0];\r\n            }*/\r\n            isHold = true;\r\n        }else{\r\n            var i = iterationIndex;\r\n            var len = kf.length- 1,flag = true,keyData,nextKeyData;\r\n            while(flag){\r\n                keyData = kf[i];\r\n                nextKeyData = kf[i+1];\r\n                if((nextKeyData.t - this.offsetTime) > frameNum){\r\n                    break;\r\n                }\r\n                if(i < len - 1){\r\n                    i += 1;\r\n                }else{\r\n                    flag = false;\r\n                }\r\n            }\r\n            isHold = keyData.h === 1;\r\n            iterationIndex = i;\r\n            if(!isHold){\r\n                if(frameNum >= nextKeyData.t-this.offsetTime){\r\n                    perc = 1;\r\n                }else if(frameNum < keyData.t-this.offsetTime){\r\n                    perc = 0;\r\n                }else{\r\n                    var fnc;\r\n                    if(keyData.__fnct){\r\n                        fnc = keyData.__fnct;\r\n                    }else{\r\n                        fnc = BezierFactory.getBezierEasing(keyData.o.x,keyData.o.y,keyData.i.x,keyData.i.y).get;\r\n                        keyData.__fnct = fnc;\r\n                    }\r\n                    perc = fnc((frameNum-(keyData.t-this.offsetTime))/((nextKeyData.t-this.offsetTime)-(keyData.t-this.offsetTime)));\r\n                }\r\n                keyPropE = nextKeyData.s ? nextKeyData.s[0] : keyData.e[0];\r\n            }\r\n            keyPropS = keyData.s[0];\r\n        }\r\n        jLen = previousValue._length;\r\n        kLen = keyPropS.i[0].length;\r\n        caching.lastIndex = iterationIndex;\r\n\r\n        for(j=0;j<jLen;j+=1){\r\n            for(k=0;k<kLen;k+=1){\r\n                vertexValue = isHold ? keyPropS.i[j][k] :  keyPropS.i[j][k]+(keyPropE.i[j][k]-keyPropS.i[j][k])*perc;\r\n                previousValue.i[j][k] = vertexValue;\r\n                vertexValue = isHold ? keyPropS.o[j][k] :  keyPropS.o[j][k]+(keyPropE.o[j][k]-keyPropS.o[j][k])*perc;\r\n                previousValue.o[j][k] = vertexValue;\r\n                vertexValue = isHold ? keyPropS.v[j][k] :  keyPropS.v[j][k]+(keyPropE.v[j][k]-keyPropS.v[j][k])*perc;\r\n                previousValue.v[j][k] = vertexValue;\r\n            }\r\n        }\r\n    }\r\n\r\n    function interpolateShapeCurrentTime(){\r\n        var frameNum = this.comp.renderedFrame - this.offsetTime;\r\n        var initTime = this.keyframes[0].t - this.offsetTime;\r\n        var endTime = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;\r\n        var lastFrame = this._caching.lastFrame;\r\n        if(!(lastFrame !== initFrame && ((lastFrame < initTime && frameNum < initTime) || (lastFrame > endTime && frameNum > endTime)))){\r\n            ////\r\n            this._caching.lastIndex = lastFrame < frameNum ? this._caching.lastIndex : 0;\r\n            this.interpolateShape(frameNum, this.pv, this._caching);\r\n            ////\r\n        }\r\n        this._caching.lastFrame = frameNum;\r\n        return this.pv;\r\n    }\r\n\r\n    function resetShape(){\r\n        this.paths = this.localShapeCollection;\r\n    }\r\n\r\n    function shapesEqual(shape1, shape2) {\r\n        if(shape1._length !== shape2._length || shape1.c !== shape2.c){\r\n            return false;\r\n        }\r\n        var i, len = shape1._length;\r\n        for(i = 0; i < len; i += 1) {\r\n            if(shape1.v[i][0] !== shape2.v[i][0] \r\n            || shape1.v[i][1] !== shape2.v[i][1] \r\n            || shape1.o[i][0] !== shape2.o[i][0] \r\n            || shape1.o[i][1] !== shape2.o[i][1] \r\n            || shape1.i[i][0] !== shape2.i[i][0] \r\n            || shape1.i[i][1] !== shape2.i[i][1]) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    function setVValue(newPath) {\r\n        if(!shapesEqual(this.v, newPath)) {\r\n            this.v = shape_pool.clone(newPath);\r\n            this.localShapeCollection.releaseShapes();\r\n            this.localShapeCollection.addShape(this.v);\r\n            this._mdf = true;\r\n            this.paths = this.localShapeCollection;\r\n        }\r\n    }\r\n\r\n    function processEffectsSequence() {\r\n        if (this.elem.globalData.frameId === this.frameId) {\r\n            return;\r\n        } else if (!this.effectsSequence.length) {\r\n            this._mdf = false;\r\n            return;\r\n        }\r\n        if (this.lock) {\r\n            this.setVValue(this.pv);\r\n            return;\r\n        }\r\n        this.lock = true;\r\n        this._mdf = false;\r\n        var finalValue = this.kf ? this.pv : this.data.ks ? this.data.ks.k : this.data.pt.k;\r\n        var i, len = this.effectsSequence.length;\r\n        for(i = 0; i < len; i += 1) {\r\n            finalValue = this.effectsSequence[i](finalValue);\r\n        }\r\n        this.setVValue(finalValue);\r\n        this.lock = false;\r\n        this.frameId = this.elem.globalData.frameId;\r\n    };\r\n\r\n    function ShapeProperty(elem, data, type){\r\n        this.propType = 'shape';\r\n        this.comp = elem.comp;\r\n        this.container = elem;\r\n        this.elem = elem;\r\n        this.data = data;\r\n        this.k = false;\r\n        this.kf = false;\r\n        this._mdf = false;\r\n        var pathData = type === 3 ? data.pt.k : data.ks.k;\r\n        this.v = shape_pool.clone(pathData);\r\n        this.pv = shape_pool.clone(this.v);\r\n        this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n        this.paths = this.localShapeCollection;\r\n        this.paths.addShape(this.v);\r\n        this.reset = resetShape;\r\n        this.effectsSequence = [];\r\n    }\r\n\r\n    function addEffect(effectFunction) {\r\n        this.effectsSequence.push(effectFunction);\r\n        this.container.addDynamicProperty(this);\r\n    }\r\n\r\n    ShapeProperty.prototype.interpolateShape = interpolateShape;\r\n    ShapeProperty.prototype.getValue = processEffectsSequence;\r\n    ShapeProperty.prototype.setVValue = setVValue;\r\n    ShapeProperty.prototype.addEffect = addEffect;\r\n\r\n    function KeyframedShapeProperty(elem,data,type){\r\n        this.propType = 'shape';\r\n        this.comp = elem.comp;\r\n        this.elem = elem;\r\n        this.container = elem;\r\n        this.offsetTime = elem.data.st;\r\n        this.keyframes = type === 3 ? data.pt.k : data.ks.k;\r\n        this.k = true;\r\n        this.kf = true;\r\n        var i, len = this.keyframes[0].s[0].i.length;\r\n        var jLen = this.keyframes[0].s[0].i[0].length;\r\n        this.v = shape_pool.newElement();\r\n        this.v.setPathData(this.keyframes[0].s[0].c, len);\r\n        this.pv = shape_pool.clone(this.v);\r\n        this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n        this.paths = this.localShapeCollection;\r\n        this.paths.addShape(this.v);\r\n        this.lastFrame = initFrame;\r\n        this.reset = resetShape;\r\n        this._caching = {lastFrame: initFrame, lastIndex: 0};\r\n        this.effectsSequence = [interpolateShapeCurrentTime.bind(this)];\r\n    }\r\n    KeyframedShapeProperty.prototype.getValue = processEffectsSequence;\r\n    KeyframedShapeProperty.prototype.interpolateShape = interpolateShape;\r\n    KeyframedShapeProperty.prototype.setVValue = setVValue;\r\n    KeyframedShapeProperty.prototype.addEffect = addEffect;\r\n\r\n    var EllShapeProperty = (function(){\r\n\r\n        var cPoint = roundCorner;\r\n\r\n        function EllShapeProperty(elem,data) {\r\n            /*this.v = {\r\n                v: createSizedArray(4),\r\n                i: createSizedArray(4),\r\n                o: createSizedArray(4),\r\n                c: true\r\n            };*/\r\n            this.v = shape_pool.newElement();\r\n            this.v.setPathData(true, 4);\r\n            this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n            this.paths = this.localShapeCollection;\r\n            this.localShapeCollection.addShape(this.v);\r\n            this.d = data.d;\r\n            this.elem = elem;\r\n            this.comp = elem.comp;\r\n            this.frameId = -1;\r\n            this.initDynamicPropertyContainer(elem);\r\n            this.p = PropertyFactory.getProp(elem,data.p,1,0,this);\r\n            this.s = PropertyFactory.getProp(elem,data.s,1,0,this);\r\n            if(this.dynamicProperties.length){\r\n                this.k = true;\r\n            }else{\r\n                this.k = false;\r\n                this.convertEllToPath();\r\n            }\r\n        };\r\n\r\n        EllShapeProperty.prototype = {\r\n            reset: resetShape,\r\n            getValue: function (){\r\n                if(this.elem.globalData.frameId === this.frameId){\r\n                    return;\r\n                }\r\n                this.frameId = this.elem.globalData.frameId;\r\n                this.iterateDynamicProperties();\r\n\r\n                if(this._mdf){\r\n                    this.convertEllToPath();\r\n                }\r\n            },\r\n            convertEllToPath: function() {\r\n                var p0 = this.p.v[0], p1 = this.p.v[1], s0 = this.s.v[0]/2, s1 = this.s.v[1]/2;\r\n                var _cw = this.d !== 3;\r\n                var _v = this.v;\r\n                _v.v[0][0] = p0;\r\n                _v.v[0][1] = p1 - s1;\r\n                _v.v[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n                _v.v[1][1] = p1;\r\n                _v.v[2][0] = p0;\r\n                _v.v[2][1] = p1 + s1;\r\n                _v.v[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n                _v.v[3][1] = p1;\r\n                _v.i[0][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\r\n                _v.i[0][1] = p1 - s1;\r\n                _v.i[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n                _v.i[1][1] = p1 - s1 * cPoint;\r\n                _v.i[2][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\r\n                _v.i[2][1] = p1 + s1;\r\n                _v.i[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n                _v.i[3][1] = p1 + s1 * cPoint;\r\n                _v.o[0][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\r\n                _v.o[0][1] = p1 - s1;\r\n                _v.o[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n                _v.o[1][1] = p1 + s1 * cPoint;\r\n                _v.o[2][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\r\n                _v.o[2][1] = p1 + s1;\r\n                _v.o[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n                _v.o[3][1] = p1 - s1 * cPoint;\r\n            }\r\n        }\r\n\r\n        extendPrototype([DynamicPropertyContainer], EllShapeProperty);\r\n\r\n        return EllShapeProperty;\r\n    }());\r\n\r\n    var StarShapeProperty = (function() {\r\n\r\n        function StarShapeProperty(elem,data) {\r\n            this.v = shape_pool.newElement();\r\n            this.v.setPathData(true, 0);\r\n            this.elem = elem;\r\n            this.comp = elem.comp;\r\n            this.data = data;\r\n            this.frameId = -1;\r\n            this.d = data.d;\r\n            this.initDynamicPropertyContainer(elem);\r\n            if(data.sy === 1){\r\n                this.ir = PropertyFactory.getProp(elem,data.ir,0,0,this);\r\n                this.is = PropertyFactory.getProp(elem,data.is,0,0.01,this);\r\n                this.convertToPath = this.convertStarToPath;\r\n            } else {\r\n                this.convertToPath = this.convertPolygonToPath;\r\n            }\r\n            this.pt = PropertyFactory.getProp(elem,data.pt,0,0,this);\r\n            this.p = PropertyFactory.getProp(elem,data.p,1,0,this);\r\n            this.r = PropertyFactory.getProp(elem,data.r,0,degToRads,this);\r\n            this.or = PropertyFactory.getProp(elem,data.or,0,0,this);\r\n            this.os = PropertyFactory.getProp(elem,data.os,0,0.01,this);\r\n            this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n            this.localShapeCollection.addShape(this.v);\r\n            this.paths = this.localShapeCollection;\r\n            if(this.dynamicProperties.length){\r\n                this.k = true;\r\n            }else{\r\n                this.k = false;\r\n                this.convertToPath();\r\n            }\r\n        };\r\n\r\n        StarShapeProperty.prototype = {\r\n            reset: resetShape,\r\n            getValue: function() {\r\n                if(this.elem.globalData.frameId === this.frameId){\r\n                    return;\r\n                }\r\n                this.frameId = this.elem.globalData.frameId;\r\n                this.iterateDynamicProperties();\r\n                if(this._mdf){\r\n                    this.convertToPath();\r\n                }\r\n            },\r\n            convertStarToPath: function() {\r\n                var numPts = Math.floor(this.pt.v)*2;\r\n                var angle = Math.PI*2/numPts;\r\n                /*this.v.v.length = numPts;\r\n                this.v.i.length = numPts;\r\n                this.v.o.length = numPts;*/\r\n                var longFlag = true;\r\n                var longRad = this.or.v;\r\n                var shortRad = this.ir.v;\r\n                var longRound = this.os.v;\r\n                var shortRound = this.is.v;\r\n                var longPerimSegment = 2*Math.PI*longRad/(numPts*2);\r\n                var shortPerimSegment = 2*Math.PI*shortRad/(numPts*2);\r\n                var i, rad,roundness,perimSegment, currentAng = -Math.PI/ 2;\r\n                currentAng += this.r.v;\r\n                var dir = this.data.d === 3 ? -1 : 1;\r\n                this.v._length = 0;\r\n                for(i=0;i<numPts;i+=1){\r\n                    rad = longFlag ? longRad : shortRad;\r\n                    roundness = longFlag ? longRound : shortRound;\r\n                    perimSegment = longFlag ? longPerimSegment : shortPerimSegment;\r\n                    var x = rad * Math.cos(currentAng);\r\n                    var y = rad * Math.sin(currentAng);\r\n                    var ox = x === 0 && y === 0 ? 0 : y/Math.sqrt(x*x + y*y);\r\n                    var oy = x === 0 && y === 0 ? 0 : -x/Math.sqrt(x*x + y*y);\r\n                    x +=  + this.p.v[0];\r\n                    y +=  + this.p.v[1];\r\n                    this.v.setTripleAt(x,y,x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir,x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir, i, true);\r\n\r\n                    /*this.v.v[i] = [x,y];\r\n                    this.v.i[i] = [x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir];\r\n                    this.v.o[i] = [x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir];\r\n                    this.v._length = numPts;*/\r\n                    longFlag = !longFlag;\r\n                    currentAng += angle*dir;\r\n                }\r\n            },\r\n            convertPolygonToPath: function() {\r\n                var numPts = Math.floor(this.pt.v);\r\n                var angle = Math.PI*2/numPts;\r\n                var rad = this.or.v;\r\n                var roundness = this.os.v;\r\n                var perimSegment = 2*Math.PI*rad/(numPts*4);\r\n                var i, currentAng = -Math.PI/ 2;\r\n                var dir = this.data.d === 3 ? -1 : 1;\r\n                currentAng += this.r.v;\r\n                this.v._length = 0;\r\n                for(i=0;i<numPts;i+=1){\r\n                    var x = rad * Math.cos(currentAng);\r\n                    var y = rad * Math.sin(currentAng);\r\n                    var ox = x === 0 && y === 0 ? 0 : y/Math.sqrt(x*x + y*y);\r\n                    var oy = x === 0 && y === 0 ? 0 : -x/Math.sqrt(x*x + y*y);\r\n                    x +=  + this.p.v[0];\r\n                    y +=  + this.p.v[1];\r\n                    this.v.setTripleAt(x,y,x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir,x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir, i, true);\r\n                    currentAng += angle*dir;\r\n                }\r\n                this.paths.length = 0;\r\n                this.paths[0] = this.v;\r\n            }\r\n\r\n        }\r\n        extendPrototype([DynamicPropertyContainer], StarShapeProperty);\r\n\r\n        return StarShapeProperty;\r\n    }());\r\n\r\n    var RectShapeProperty = (function() {\r\n\r\n         function RectShapeProperty(elem,data) {\r\n            this.v = shape_pool.newElement();\r\n            this.v.c = true;\r\n            this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n            this.localShapeCollection.addShape(this.v);\r\n            this.paths = this.localShapeCollection;\r\n            this.elem = elem;\r\n            this.comp = elem.comp;\r\n            this.frameId = -1;\r\n            this.d = data.d;\r\n            this.initDynamicPropertyContainer(elem);\r\n            this.p = PropertyFactory.getProp(elem,data.p,1,0,this);\r\n            this.s = PropertyFactory.getProp(elem,data.s,1,0,this);\r\n            this.r = PropertyFactory.getProp(elem,data.r,0,0,this);\r\n            if(this.dynamicProperties.length){\r\n                this.k = true;\r\n            }else{\r\n                this.k = false;\r\n                this.convertRectToPath();\r\n            }\r\n        };\r\n\r\n        RectShapeProperty.prototype = {\r\n            convertRectToPath: function (){\r\n                var p0 = this.p.v[0], p1 = this.p.v[1], v0 = this.s.v[0]/2, v1 = this.s.v[1]/2;\r\n                var round = bm_min(v0,v1,this.r.v);\r\n                var cPoint = round*(1-roundCorner);\r\n                this.v._length = 0;\r\n\r\n                if(this.d === 2 || this.d === 1) {\r\n                    this.v.setTripleAt(p0+v0, p1-v1+round,p0+v0, p1-v1+round,p0+v0,p1-v1+cPoint,0, true);\r\n                    this.v.setTripleAt(p0+v0, p1+v1-round,p0+v0, p1+v1-cPoint,p0+v0, p1+v1-round,1, true);\r\n                    if(round!== 0){\r\n                        this.v.setTripleAt(p0+v0-round, p1+v1,p0+v0-round,p1+v1,p0+v0-cPoint,p1+v1,2, true);\r\n                        this.v.setTripleAt(p0-v0+round,p1+v1,p0-v0+cPoint,p1+v1,p0-v0+round,p1+v1,3, true);\r\n                        this.v.setTripleAt(p0-v0,p1+v1-round,p0-v0,p1+v1-round,p0-v0,p1+v1-cPoint,4, true);\r\n                        this.v.setTripleAt(p0-v0,p1-v1+round,p0-v0,p1-v1+cPoint,p0-v0,p1-v1+round,5, true);\r\n                        this.v.setTripleAt(p0-v0+round,p1-v1,p0-v0+round,p1-v1,p0-v0+cPoint,p1-v1,6, true);\r\n                        this.v.setTripleAt(p0+v0-round,p1-v1,p0+v0-cPoint,p1-v1,p0+v0-round,p1-v1,7, true);\r\n                    } else {\r\n                        this.v.setTripleAt(p0-v0,p1+v1,p0-v0+cPoint,p1+v1,p0-v0,p1+v1,2);\r\n                        this.v.setTripleAt(p0-v0,p1-v1,p0-v0,p1-v1+cPoint,p0-v0,p1-v1,3);\r\n                    }\r\n                }else{\r\n                    this.v.setTripleAt(p0+v0,p1-v1+round,p0+v0,p1-v1+cPoint,p0+v0,p1-v1+round,0, true);\r\n                    if(round!== 0){\r\n                        this.v.setTripleAt(p0+v0-round,p1-v1,p0+v0-round,p1-v1,p0+v0-cPoint,p1-v1,1, true);\r\n                        this.v.setTripleAt(p0-v0+round,p1-v1,p0-v0+cPoint,p1-v1,p0-v0+round,p1-v1,2, true);\r\n                        this.v.setTripleAt(p0-v0,p1-v1+round,p0-v0,p1-v1+round,p0-v0,p1-v1+cPoint,3, true);\r\n                        this.v.setTripleAt(p0-v0,p1+v1-round,p0-v0,p1+v1-cPoint,p0-v0,p1+v1-round,4, true);\r\n                        this.v.setTripleAt(p0-v0+round,p1+v1,p0-v0+round,p1+v1,p0-v0+cPoint,p1+v1,5, true);\r\n                        this.v.setTripleAt(p0+v0-round,p1+v1,p0+v0-cPoint,p1+v1,p0+v0-round,p1+v1,6, true);\r\n                        this.v.setTripleAt(p0+v0,p1+v1-round,p0+v0,p1+v1-round,p0+v0,p1+v1-cPoint,7, true);\r\n                    } else {\r\n                        this.v.setTripleAt(p0-v0,p1-v1,p0-v0+cPoint,p1-v1,p0-v0,p1-v1,1, true);\r\n                        this.v.setTripleAt(p0-v0,p1+v1,p0-v0,p1+v1-cPoint,p0-v0,p1+v1,2, true);\r\n                        this.v.setTripleAt(p0+v0,p1+v1,p0+v0-cPoint,p1+v1,p0+v0,p1+v1,3, true);\r\n\r\n                    }\r\n                }\r\n            },\r\n            getValue: function(frameNum){\r\n                if(this.elem.globalData.frameId === this.frameId){\r\n                    return;\r\n                }\r\n                this.frameId = this.elem.globalData.frameId;\r\n                this.iterateDynamicProperties();\r\n                if(this._mdf){\r\n                    this.convertRectToPath();\r\n                }\r\n\r\n            },\r\n            reset: resetShape\r\n        }\r\n        extendPrototype([DynamicPropertyContainer], RectShapeProperty);\r\n\r\n        return RectShapeProperty;\r\n    }());\r\n\r\n    function getShapeProp(elem,data,type){\r\n        var prop;\r\n        if(type === 3 || type === 4){\r\n            var dataProp = type === 3 ? data.pt : data.ks;\r\n            var keys = dataProp.k;\r\n            if(keys.length){\r\n                prop = new KeyframedShapeProperty(elem, data, type);\r\n            }else{\r\n                prop = new ShapeProperty(elem, data, type);\r\n            }\r\n        }else if(type === 5){\r\n            prop = new RectShapeProperty(elem, data);\r\n        }else if(type === 6){\r\n            prop = new EllShapeProperty(elem, data);\r\n        }else if(type === 7){\r\n            prop = new StarShapeProperty(elem, data);\r\n        }\r\n        if(prop.k){\r\n            elem.addDynamicProperty(prop);\r\n        }\r\n        return prop;\r\n    }\r\n\r\n    function getConstructorFunction() {\r\n        return ShapeProperty;\r\n    }\r\n\r\n    function getKeyframedConstructorFunction() {\r\n        return KeyframedShapeProperty;\r\n    }\r\n\r\n    var ob = {};\r\n    ob.getShapeProp = getShapeProp;\r\n    ob.getConstructorFunction = getConstructorFunction;\r\n    ob.getKeyframedConstructorFunction = getKeyframedConstructorFunction;\r\n    return ob;\r\n}());\r\nvar ShapeModifiers = (function(){\r\n    var ob = {};\r\n    var modifiers = {};\r\n    ob.registerModifier = registerModifier;\r\n    ob.getModifier = getModifier;\r\n\r\n    function registerModifier(nm,factory){\r\n        if(!modifiers[nm]){\r\n            modifiers[nm] = factory;\r\n        }\r\n    }\r\n\r\n    function getModifier(nm,elem, data){\r\n        return new modifiers[nm](elem, data);\r\n    }\r\n\r\n    return ob;\r\n}());\r\n\r\nfunction ShapeModifier(){}\r\nShapeModifier.prototype.initModifierProperties = function(){};\r\nShapeModifier.prototype.addShapeToModifier = function(){};\r\nShapeModifier.prototype.addShape = function(data){\r\n    if (!this.closed) {\r\n        // Adding shape to dynamic properties. It covers the case where a shape has no effects applied, to reset it's _mdf state on every tick.\r\n        data.sh.container.addDynamicProperty(data.sh);\r\n        var shapeData = {shape:data.sh, data: data, localShapeCollection:shapeCollection_pool.newShapeCollection()};\r\n        this.shapes.push(shapeData);\r\n        this.addShapeToModifier(shapeData);\r\n        if (this._isAnimated) {\r\n            data.setAsAnimated();\r\n        }\r\n    }\r\n};\r\nShapeModifier.prototype.init = function(elem,data){\r\n    this.shapes = [];\r\n    this.elem = elem;\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.initModifierProperties(elem,data);\r\n    this.frameId = initialDefaultFrame;\r\n    this.closed = false;\r\n    this.k = false;\r\n    if(this.dynamicProperties.length){\r\n        this.k = true;\r\n    }else{\r\n        this.getValue(true);\r\n    }\r\n};\r\nShapeModifier.prototype.processKeys = function(){\r\n    if(this.elem.globalData.frameId === this.frameId){\r\n        return;\r\n    }\r\n    this.frameId = this.elem.globalData.frameId;\r\n    this.iterateDynamicProperties();\r\n};\r\n\r\nextendPrototype([DynamicPropertyContainer], ShapeModifier);\r\nfunction TrimModifier(){\r\n}\r\nextendPrototype([ShapeModifier], TrimModifier);\r\nTrimModifier.prototype.initModifierProperties = function(elem, data) {\r\n    this.s = PropertyFactory.getProp(elem, data.s, 0, 0.01, this);\r\n    this.e = PropertyFactory.getProp(elem, data.e, 0, 0.01, this);\r\n    this.o = PropertyFactory.getProp(elem, data.o, 0, 0, this);\r\n    this.sValue = 0;\r\n    this.eValue = 0;\r\n    this.getValue = this.processKeys;\r\n    this.m = data.m;\r\n    this._isAnimated = !!this.s.effectsSequence.length || !!this.e.effectsSequence.length || !!this.o.effectsSequence.length;\r\n};\r\n\r\nTrimModifier.prototype.addShapeToModifier = function(shapeData){\r\n    shapeData.pathsData = [];\r\n};\r\n\r\nTrimModifier.prototype.calculateShapeEdges = function(s, e, shapeLength, addedLength, totalModifierLength) {\r\n    var segments = [];\r\n    if (e <= 1) {\r\n        segments.push({\r\n            s: s,\r\n            e: e\r\n        });\r\n    } else if (s >= 1) {\r\n        segments.push({\r\n            s: s - 1,\r\n            e: e - 1\r\n        });\r\n    } else {\r\n        segments.push({\r\n            s: s,\r\n            e: 1\r\n        });\r\n        segments.push({\r\n            s: 0,\r\n            e: e - 1\r\n        });\r\n    }\r\n    var shapeSegments = [];\r\n    var i, len = segments.length, segmentOb;\r\n    for (i = 0; i < len; i += 1) {\r\n        segmentOb = segments[i];\r\n        if (segmentOb.e * totalModifierLength < addedLength || segmentOb.s * totalModifierLength > addedLength + shapeLength) {\r\n            \r\n        } else {\r\n            var shapeS, shapeE;\r\n            if (segmentOb.s * totalModifierLength <= addedLength) {\r\n                shapeS = 0;\r\n            } else {\r\n                shapeS = (segmentOb.s * totalModifierLength - addedLength) / shapeLength;\r\n            }\r\n            if(segmentOb.e * totalModifierLength >= addedLength + shapeLength) {\r\n                shapeE = 1;\r\n            } else {\r\n                shapeE = ((segmentOb.e * totalModifierLength - addedLength) / shapeLength);\r\n            }\r\n            shapeSegments.push([shapeS, shapeE]);\r\n        }\r\n    }\r\n    if (!shapeSegments.length) {\r\n        shapeSegments.push([0, 0]);\r\n    }\r\n    return shapeSegments;\r\n};\r\n\r\nTrimModifier.prototype.releasePathsData = function(pathsData) {\r\n    var i, len = pathsData.length;\r\n    for (i = 0; i < len; i += 1) {\r\n        segments_length_pool.release(pathsData[i]);\r\n    }\r\n    pathsData.length = 0;\r\n    return pathsData;\r\n};\r\n\r\nTrimModifier.prototype.processShapes = function(_isFirstFrame) {\r\n    var s, e;\r\n    if (this._mdf || _isFirstFrame) {\r\n        var o = (this.o.v % 360) / 360;\r\n        if (o < 0) {\r\n            o += 1;\r\n        }\r\n        s = (this.s.v > 1 ? 1 : this.s.v < 0 ? 0 : this.s.v) + o;\r\n        e = (this.e.v > 1 ? 1 : this.e.v < 0 ? 0 : this.e.v) + o;\r\n        if (s === e) {\r\n\r\n        }\r\n        if (s > e) {\r\n            var _s = s;\r\n            s = e;\r\n            e = _s;\r\n        }\r\n        s = Math.round(s * 10000) * 0.0001;\r\n        e = Math.round(e * 10000) * 0.0001;\r\n        this.sValue = s;\r\n        this.eValue = e;\r\n    } else {\r\n        s = this.sValue;\r\n        e = this.eValue;\r\n    }\r\n    var shapePaths;\r\n    var i, len = this.shapes.length, j, jLen;\r\n    var pathsData, pathData, totalShapeLength, totalModifierLength = 0;\r\n\r\n    if (e === s) {\r\n        for (i = 0; i < len; i += 1) {\r\n            this.shapes[i].localShapeCollection.releaseShapes();\r\n            this.shapes[i].shape._mdf = true;\r\n            this.shapes[i].shape.paths = this.shapes[i].localShapeCollection;\r\n        }\r\n    } else if (!((e === 1 && s === 0) || (e===0 && s === 1))){\r\n        var segments = [], shapeData, localShapeCollection;\r\n        for (i = 0; i < len; i += 1) {\r\n            shapeData = this.shapes[i];\r\n            // if shape hasn't changed and trim properties haven't changed, cached previous path can be used\r\n            if (!shapeData.shape._mdf && !this._mdf && !_isFirstFrame && this.m !== 2) {\r\n                shapeData.shape.paths = shapeData.localShapeCollection;\r\n            } else {\r\n                shapePaths = shapeData.shape.paths;\r\n                jLen = shapePaths._length;\r\n                totalShapeLength = 0;\r\n                if (!shapeData.shape._mdf && shapeData.pathsData.length) {\r\n                    totalShapeLength = shapeData.totalShapeLength;\r\n                } else {\r\n                    pathsData = this.releasePathsData(shapeData.pathsData);\r\n                    for (j = 0; j < jLen; j += 1) {\r\n                        pathData = bez.getSegmentsLength(shapePaths.shapes[j]);\r\n                        pathsData.push(pathData);\r\n                        totalShapeLength += pathData.totalLength;\r\n                    }\r\n                    shapeData.totalShapeLength = totalShapeLength;\r\n                    shapeData.pathsData = pathsData;\r\n                }\r\n\r\n                totalModifierLength += totalShapeLength;\r\n                shapeData.shape._mdf = true;\r\n            }\r\n        }\r\n        var shapeS = s, shapeE = e, addedLength = 0, edges;\r\n        for (i = len - 1; i >= 0; i -= 1) {\r\n            shapeData = this.shapes[i];\r\n            if (shapeData.shape._mdf) {\r\n                localShapeCollection = shapeData.localShapeCollection;\r\n                localShapeCollection.releaseShapes();\r\n                //if m === 2 means paths are trimmed individually so edges need to be found for this specific shape relative to whoel group\r\n                if (this.m === 2 && len > 1) {\r\n                    edges = this.calculateShapeEdges(s, e, shapeData.totalShapeLength, addedLength, totalModifierLength);\r\n                    addedLength += shapeData.totalShapeLength;\r\n                } else {\r\n                    edges = [[shapeS, shapeE]];\r\n                }\r\n                jLen = edges.length;\r\n                for (j = 0; j < jLen; j += 1) {\r\n                    shapeS = edges[j][0];\r\n                    shapeE = edges[j][1];\r\n                    segments.length = 0;\r\n                    if (shapeE <= 1) {\r\n                        segments.push({\r\n                            s:shapeData.totalShapeLength * shapeS,\r\n                            e:shapeData.totalShapeLength * shapeE\r\n                        });\r\n                    } else if (shapeS >= 1) {\r\n                        segments.push({\r\n                            s:shapeData.totalShapeLength * (shapeS - 1),\r\n                            e:shapeData.totalShapeLength * (shapeE - 1)\r\n                        });\r\n                    } else {\r\n                        segments.push({\r\n                            s:shapeData.totalShapeLength * shapeS,\r\n                            e:shapeData.totalShapeLength\r\n                        });\r\n                        segments.push({\r\n                            s:0,\r\n                            e:shapeData.totalShapeLength * (shapeE - 1)\r\n                        });\r\n                    }\r\n                    var newShapesData = this.addShapes(shapeData,segments[0]);\r\n                    if (segments[0].s !== segments[0].e) {\r\n                        if (segments.length > 1) {\r\n                            var lastShapeInCollection = shapeData.shape.paths.shapes[shapeData.shape.paths._length - 1];\r\n                            if (lastShapeInCollection.c) {\r\n                                var lastShape = newShapesData.pop();\r\n                                this.addPaths(newShapesData, localShapeCollection);\r\n                                newShapesData = this.addShapes(shapeData, segments[1], lastShape);\r\n                            } else {\r\n                                this.addPaths(newShapesData, localShapeCollection);\r\n                                newShapesData = this.addShapes(shapeData, segments[1]);\r\n                            }\r\n                        } \r\n                        this.addPaths(newShapesData, localShapeCollection);\r\n                    }\r\n                    \r\n                }\r\n                shapeData.shape.paths = localShapeCollection;\r\n            }\r\n        }\r\n    } else if (this._mdf) {\r\n        for (i = 0; i < len; i += 1) {\r\n            //Releasign Trim Cached paths data when no trim applied in case shapes are modified inbetween.\r\n            //Don't remove this even if it's losing cached info.\r\n            this.shapes[i].pathsData.length = 0;\r\n            this.shapes[i].shape._mdf = true;\r\n        }\r\n    }\r\n};\r\n\r\nTrimModifier.prototype.addPaths = function(newPaths, localShapeCollection) {\r\n    var i, len = newPaths.length;\r\n    for (i = 0; i < len; i += 1) {\r\n        localShapeCollection.addShape(newPaths[i]);\r\n    }\r\n};\r\n\r\nTrimModifier.prototype.addSegment = function(pt1, pt2, pt3, pt4, shapePath, pos, newShape) {\r\n    shapePath.setXYAt(pt2[0], pt2[1], 'o', pos);\r\n    shapePath.setXYAt(pt3[0], pt3[1], 'i', pos + 1);\r\n    if(newShape){\r\n        shapePath.setXYAt(pt1[0], pt1[1], 'v', pos);\r\n    }\r\n    shapePath.setXYAt(pt4[0], pt4[1], 'v', pos + 1);\r\n};\r\n\r\nTrimModifier.prototype.addSegmentFromArray = function(points, shapePath, pos, newShape) {\r\n    shapePath.setXYAt(points[1], points[5], 'o', pos);\r\n    shapePath.setXYAt(points[2], points[6], 'i', pos + 1);\r\n    if(newShape){\r\n        shapePath.setXYAt(points[0], points[4], 'v', pos);\r\n    }\r\n    shapePath.setXYAt(points[3], points[7], 'v', pos + 1);\r\n};\r\n\r\nTrimModifier.prototype.addShapes = function(shapeData, shapeSegment, shapePath) {\r\n    var pathsData = shapeData.pathsData;\r\n    var shapePaths = shapeData.shape.paths.shapes;\r\n    var i, len = shapeData.shape.paths._length, j, jLen;\r\n    var addedLength = 0;\r\n    var currentLengthData,segmentCount;\r\n    var lengths;\r\n    var segment;\r\n    var shapes = [];\r\n    var initPos;\r\n    var newShape = true;\r\n    if (!shapePath) {\r\n        shapePath = shape_pool.newElement();\r\n        segmentCount = 0;\r\n        initPos = 0;\r\n    } else {\r\n        segmentCount = shapePath._length;\r\n        initPos = shapePath._length;\r\n    }\r\n    shapes.push(shapePath);\r\n    for (i = 0; i < len; i += 1) {\r\n        lengths = pathsData[i].lengths;\r\n        shapePath.c = shapePaths[i].c;\r\n        jLen = shapePaths[i].c ? lengths.length : lengths.length + 1;\r\n        for (j = 1; j < jLen; j +=1) {\r\n            currentLengthData = lengths[j-1];\r\n            if (addedLength + currentLengthData.addedLength < shapeSegment.s) {\r\n                addedLength += currentLengthData.addedLength;\r\n                shapePath.c = false;\r\n            } else if(addedLength > shapeSegment.e) {\r\n                shapePath.c = false;\r\n                break;\r\n            } else {\r\n                if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + currentLengthData.addedLength) {\r\n                    this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[j], shapePaths[i].v[j], shapePath, segmentCount, newShape);\r\n                    newShape = false;\r\n                } else {\r\n                    segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[j], shapePaths[i].o[j - 1], shapePaths[i].i[j], (shapeSegment.s - addedLength)/currentLengthData.addedLength,(shapeSegment.e - addedLength)/currentLengthData.addedLength, lengths[j-1]);\r\n                    this.addSegmentFromArray(segment, shapePath, segmentCount, newShape);\r\n                    // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\r\n                    newShape = false;\r\n                    shapePath.c = false;\r\n                }\r\n                addedLength += currentLengthData.addedLength;\r\n                segmentCount += 1;\r\n            }\r\n        }\r\n        if (shapePaths[i].c && lengths.length) {\r\n            currentLengthData = lengths[j - 1];\r\n            if (addedLength <= shapeSegment.e) {\r\n                var segmentLength = lengths[j - 1].addedLength;\r\n                if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + segmentLength) {\r\n                    this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[0], shapePaths[i].v[0], shapePath, segmentCount, newShape);\r\n                    newShape = false;\r\n                } else {\r\n                    segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[0], shapePaths[i].o[j - 1], shapePaths[i].i[0], (shapeSegment.s - addedLength) / segmentLength, (shapeSegment.e - addedLength) / segmentLength, lengths[j - 1]);\r\n                    this.addSegmentFromArray(segment, shapePath, segmentCount, newShape);\r\n                    // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\r\n                    newShape = false;\r\n                    shapePath.c = false;\r\n                }\r\n            } else {\r\n                shapePath.c = false;\r\n            }\r\n            addedLength += currentLengthData.addedLength;\r\n            segmentCount += 1;\r\n        }\r\n        if (shapePath._length) {\r\n            shapePath.setXYAt(shapePath.v[initPos][0], shapePath.v[initPos][1], 'i', initPos);\r\n            shapePath.setXYAt(shapePath.v[shapePath._length - 1][0], shapePath.v[shapePath._length - 1][1],'o', shapePath._length - 1);\r\n        }\r\n        if (addedLength > shapeSegment.e) {\r\n            break;\r\n        }\r\n        if (i < len - 1) {\r\n            shapePath = shape_pool.newElement();\r\n            newShape = true;\r\n            shapes.push(shapePath);\r\n            segmentCount = 0;\r\n        }\r\n    }\r\n    return shapes;\r\n};\r\n\r\n\r\nShapeModifiers.registerModifier('tm', TrimModifier);\r\nfunction RoundCornersModifier(){}\r\nextendPrototype([ShapeModifier],RoundCornersModifier);\r\nRoundCornersModifier.prototype.initModifierProperties = function(elem,data){\r\n    this.getValue = this.processKeys;\r\n    this.rd = PropertyFactory.getProp(elem,data.r,0,null,this);\r\n    this._isAnimated = !!this.rd.effectsSequence.length;\r\n};\r\n\r\nRoundCornersModifier.prototype.processPath = function(path, round){\r\n    var cloned_path = shape_pool.newElement();\r\n    cloned_path.c = path.c;\r\n    var i, len = path._length;\r\n    var currentV,currentI,currentO,closerV, newV,newO,newI,distance,newPosPerc,index = 0;\r\n    var vX,vY,oX,oY,iX,iY;\r\n    for(i=0;i<len;i+=1){\r\n        currentV = path.v[i];\r\n        currentO = path.o[i];\r\n        currentI = path.i[i];\r\n        if(currentV[0]===currentO[0] && currentV[1]===currentO[1] && currentV[0]===currentI[0] && currentV[1]===currentI[1]){\r\n            if((i===0 || i === len - 1) && !path.c){\r\n                cloned_path.setTripleAt(currentV[0],currentV[1],currentO[0],currentO[1],currentI[0],currentI[1],index);\r\n                /*cloned_path.v[index] = currentV;\r\n                cloned_path.o[index] = currentO;\r\n                cloned_path.i[index] = currentI;*/\r\n                index += 1;\r\n            } else {\r\n                if(i===0){\r\n                    closerV = path.v[len-1];\r\n                } else {\r\n                    closerV = path.v[i-1];\r\n                }\r\n                distance = Math.sqrt(Math.pow(currentV[0]-closerV[0],2)+Math.pow(currentV[1]-closerV[1],2));\r\n                newPosPerc = distance ? Math.min(distance/2,round)/distance : 0;\r\n                vX = iX = currentV[0]+(closerV[0]-currentV[0])*newPosPerc;\r\n                vY = iY = currentV[1]-(currentV[1]-closerV[1])*newPosPerc;\r\n                oX = vX-(vX-currentV[0])*roundCorner;\r\n                oY = vY-(vY-currentV[1])*roundCorner;\r\n                cloned_path.setTripleAt(vX,vY,oX,oY,iX,iY,index);\r\n                index += 1;\r\n\r\n                if(i === len - 1){\r\n                    closerV = path.v[0];\r\n                } else {\r\n                    closerV = path.v[i+1];\r\n                }\r\n                distance = Math.sqrt(Math.pow(currentV[0]-closerV[0],2)+Math.pow(currentV[1]-closerV[1],2));\r\n                newPosPerc = distance ? Math.min(distance/2,round)/distance : 0;\r\n                vX = oX = currentV[0]+(closerV[0]-currentV[0])*newPosPerc;\r\n                vY = oY = currentV[1]+(closerV[1]-currentV[1])*newPosPerc;\r\n                iX = vX-(vX-currentV[0])*roundCorner;\r\n                iY = vY-(vY-currentV[1])*roundCorner;\r\n                cloned_path.setTripleAt(vX,vY,oX,oY,iX,iY,index);\r\n                index += 1;\r\n            }\r\n        } else {\r\n            cloned_path.setTripleAt(path.v[i][0],path.v[i][1],path.o[i][0],path.o[i][1],path.i[i][0],path.i[i][1],index);\r\n            index += 1;\r\n        }\r\n    }\r\n    return cloned_path;\r\n};\r\n\r\nRoundCornersModifier.prototype.processShapes = function(_isFirstFrame){\r\n    var shapePaths;\r\n    var i, len = this.shapes.length;\r\n    var j, jLen;\r\n    var rd = this.rd.v;\r\n\r\n    if(rd !== 0){\r\n        var shapeData, newPaths, localShapeCollection;\r\n        for(i=0;i<len;i+=1){\r\n            shapeData = this.shapes[i];\r\n            newPaths = shapeData.shape.paths;\r\n            localShapeCollection = shapeData.localShapeCollection;\r\n            if(!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)){\r\n                localShapeCollection.releaseShapes();\r\n                shapeData.shape._mdf = true;\r\n                shapePaths = shapeData.shape.paths.shapes;\r\n                jLen = shapeData.shape.paths._length;\r\n                for(j=0;j<jLen;j+=1){\r\n                    localShapeCollection.addShape(this.processPath(shapePaths[j],rd));\r\n                }\r\n            }\r\n            shapeData.shape.paths = shapeData.localShapeCollection;\r\n        }\r\n\r\n    }\r\n    if(!this.dynamicProperties.length){\r\n        this._mdf = false;\r\n    }\r\n};\r\n\r\nShapeModifiers.registerModifier('rd',RoundCornersModifier);\r\nfunction RepeaterModifier(){}\r\nextendPrototype([ShapeModifier], RepeaterModifier);\r\n\r\nRepeaterModifier.prototype.initModifierProperties = function(elem,data){\r\n    this.getValue = this.processKeys;\r\n    this.c = PropertyFactory.getProp(elem,data.c,0,null,this);\r\n    this.o = PropertyFactory.getProp(elem,data.o,0,null,this);\r\n    this.tr = TransformPropertyFactory.getTransformProperty(elem,data.tr,this);\r\n    this.so = PropertyFactory.getProp(elem,data.tr.so,0,0.01,this);\r\n    this.eo = PropertyFactory.getProp(elem,data.tr.eo,0,0.01,this);\r\n    this.data = data;\r\n    if(!this.dynamicProperties.length){\r\n        this.getValue(true);\r\n    }\r\n    this._isAnimated = !!this.dynamicProperties.length;\r\n    this.pMatrix = new Matrix();\r\n    this.rMatrix = new Matrix();\r\n    this.sMatrix = new Matrix();\r\n    this.tMatrix = new Matrix();\r\n    this.matrix = new Matrix();\r\n};\r\n\r\nRepeaterModifier.prototype.applyTransforms = function(pMatrix, rMatrix, sMatrix, transform, perc, inv){\r\n    var dir = inv ? -1 : 1;\r\n    var scaleX = transform.s.v[0] + (1 - transform.s.v[0]) * (1 - perc);\r\n    var scaleY = transform.s.v[1] + (1 - transform.s.v[1]) * (1 - perc);\r\n    pMatrix.translate(transform.p.v[0] * dir * perc, transform.p.v[1] * dir * perc, transform.p.v[2]);\r\n    rMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\r\n    rMatrix.rotate(-transform.r.v * dir * perc);\r\n    rMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\r\n    sMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\r\n    sMatrix.scale(inv ? 1/scaleX : scaleX, inv ? 1/scaleY : scaleY);\r\n    sMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\r\n};\r\n\r\nRepeaterModifier.prototype.init = function(elem, arr, pos, elemsData) {\r\n    this.elem = elem;\r\n    this.arr = arr;\r\n    this.pos = pos;\r\n    this.elemsData = elemsData;\r\n    this._currentCopies = 0;\r\n    this._elements = [];\r\n    this._groups = [];\r\n    this.frameId = -1;\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.initModifierProperties(elem,arr[pos]);\r\n    var cont = 0;\r\n    while(pos>0){\r\n        pos -= 1;\r\n        //this._elements.unshift(arr.splice(pos,1)[0]);\r\n        this._elements.unshift(arr[pos]);\r\n        cont += 1;\r\n    }\r\n    if(this.dynamicProperties.length){\r\n        this.k = true;\r\n    }else{\r\n        this.getValue(true);\r\n    }\r\n};\r\n\r\nRepeaterModifier.prototype.resetElements = function(elements){\r\n    var i, len = elements.length;\r\n    for(i = 0; i < len; i += 1) {\r\n        elements[i]._processed = false;\r\n        if(elements[i].ty === 'gr'){\r\n            this.resetElements(elements[i].it);\r\n        }\r\n    }\r\n};\r\n\r\nRepeaterModifier.prototype.cloneElements = function(elements){\r\n    var i, len = elements.length;\r\n    var newElements = JSON.parse(JSON.stringify(elements));\r\n    this.resetElements(newElements);\r\n    return newElements;\r\n};\r\n\r\nRepeaterModifier.prototype.changeGroupRender = function(elements, renderFlag) {\r\n    var i, len = elements.length;\r\n    for(i = 0; i < len; i += 1) {\r\n        elements[i]._render = renderFlag;\r\n        if(elements[i].ty === 'gr') {\r\n            this.changeGroupRender(elements[i].it, renderFlag);\r\n        }\r\n    }\r\n};\r\n\r\nRepeaterModifier.prototype.processShapes = function(_isFirstFrame) {\r\n    var items, itemsTransform, i, dir, cont;\r\n    if(this._mdf || _isFirstFrame){\r\n        var copies = Math.ceil(this.c.v);\r\n        if(this._groups.length < copies){\r\n            while(this._groups.length < copies){\r\n                var group = {\r\n                    it:this.cloneElements(this._elements),\r\n                    ty:'gr'\r\n                };\r\n                group.it.push({\"a\":{\"a\":0,\"ix\":1,\"k\":[0,0]},\"nm\":\"Transform\",\"o\":{\"a\":0,\"ix\":7,\"k\":100},\"p\":{\"a\":0,\"ix\":2,\"k\":[0,0]},\"r\":{\"a\":1,\"ix\":6,\"k\":[{s:0,e:0,t:0},{s:0,e:0,t:1}]},\"s\":{\"a\":0,\"ix\":3,\"k\":[100,100]},\"sa\":{\"a\":0,\"ix\":5,\"k\":0},\"sk\":{\"a\":0,\"ix\":4,\"k\":0},\"ty\":\"tr\"});\r\n                \r\n                this.arr.splice(0,0,group);\r\n                this._groups.splice(0,0,group);\r\n                this._currentCopies += 1;\r\n            }\r\n            this.elem.reloadShapes();\r\n        }\r\n        cont = 0;\r\n        var renderFlag;\r\n        for(i = 0; i  <= this._groups.length - 1; i += 1){\r\n            renderFlag = cont < copies;\r\n            this._groups[i]._render = renderFlag;\r\n            this.changeGroupRender(this._groups[i].it, renderFlag);\r\n            cont += 1;\r\n        }\r\n        \r\n        this._currentCopies = copies;\r\n        ////\r\n\r\n        var offset = this.o.v;\r\n        var offsetModulo = offset%1;\r\n        var roundOffset = offset > 0 ? Math.floor(offset) : Math.ceil(offset);\r\n        var k;\r\n        var tMat = this.tr.v.props;\r\n        var pProps = this.pMatrix.props;\r\n        var rProps = this.rMatrix.props;\r\n        var sProps = this.sMatrix.props;\r\n        this.pMatrix.reset();\r\n        this.rMatrix.reset();\r\n        this.sMatrix.reset();\r\n        this.tMatrix.reset();\r\n        this.matrix.reset();\r\n        var iteration = 0;\r\n\r\n        if(offset > 0) {\r\n            while(iteration<roundOffset){\r\n                this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\r\n                iteration += 1;\r\n            }\r\n            if(offsetModulo){\r\n                this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, offsetModulo, false);\r\n                iteration += offsetModulo;\r\n            }\r\n        } else if(offset < 0) {\r\n            while(iteration>roundOffset){\r\n                this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, true);\r\n                iteration -= 1;\r\n            }\r\n            if(offsetModulo){\r\n                this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, - offsetModulo, true);\r\n                iteration -= offsetModulo;\r\n            }\r\n        }\r\n        i = this.data.m === 1 ? 0 : this._currentCopies - 1;\r\n        dir = this.data.m === 1 ? 1 : -1;\r\n        cont = this._currentCopies;\r\n        var j, jLen;\r\n        while(cont){\r\n            items = this.elemsData[i].it;\r\n            itemsTransform = items[items.length - 1].transform.mProps.v.props;\r\n            jLen = itemsTransform.length;\r\n            items[items.length - 1].transform.mProps._mdf = true;\r\n            items[items.length - 1].transform.op._mdf = true;\r\n            items[items.length - 1].transform.op.v = this.so.v + (this.eo.v - this.so.v) * (i / (this._currentCopies - 1));\r\n            if(iteration !== 0){\r\n                if((i !== 0 && dir === 1) || (i !== this._currentCopies - 1 && dir === -1)){\r\n                    this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\r\n                }\r\n                this.matrix.transform(rProps[0],rProps[1],rProps[2],rProps[3],rProps[4],rProps[5],rProps[6],rProps[7],rProps[8],rProps[9],rProps[10],rProps[11],rProps[12],rProps[13],rProps[14],rProps[15]);\r\n                this.matrix.transform(sProps[0],sProps[1],sProps[2],sProps[3],sProps[4],sProps[5],sProps[6],sProps[7],sProps[8],sProps[9],sProps[10],sProps[11],sProps[12],sProps[13],sProps[14],sProps[15]);\r\n                this.matrix.transform(pProps[0],pProps[1],pProps[2],pProps[3],pProps[4],pProps[5],pProps[6],pProps[7],pProps[8],pProps[9],pProps[10],pProps[11],pProps[12],pProps[13],pProps[14],pProps[15]);\r\n                \r\n                for(j=0;j<jLen;j+=1) {\r\n                    itemsTransform[j] = this.matrix.props[j];\r\n                }\r\n                this.matrix.reset();\r\n            } else {\r\n                this.matrix.reset();\r\n                for(j=0;j<jLen;j+=1) {\r\n                    itemsTransform[j] = this.matrix.props[j];\r\n                }\r\n            }\r\n            iteration += 1;\r\n            cont -= 1;\r\n            i += dir;\r\n        }\r\n    } else {\r\n        cont = this._currentCopies;\r\n        i = 0;\r\n        dir = 1;\r\n        while(cont){\r\n            items = this.elemsData[i].it;\r\n            itemsTransform = items[items.length - 1].transform.mProps.v.props;\r\n            items[items.length - 1].transform.mProps._mdf = false;\r\n            items[items.length - 1].transform.op._mdf = false;\r\n            cont -= 1;\r\n            i += dir;\r\n        }\r\n    }\r\n};\r\n\r\nRepeaterModifier.prototype.addShape = function(){};\r\n\r\nShapeModifiers.registerModifier('rp',RepeaterModifier);\r\nfunction ShapeCollection(){\r\n\tthis._length = 0;\r\n\tthis._maxLength = 4;\r\n\tthis.shapes = createSizedArray(this._maxLength);\r\n}\r\n\r\nShapeCollection.prototype.addShape = function(shapeData){\r\n\tif(this._length === this._maxLength){\r\n\t\tthis.shapes = this.shapes.concat(createSizedArray(this._maxLength));\r\n\t\tthis._maxLength *= 2;\r\n\t}\r\n\tthis.shapes[this._length] = shapeData;\r\n\tthis._length += 1;\r\n};\r\n\r\nShapeCollection.prototype.releaseShapes = function(){\r\n\tvar i;\r\n\tfor(i = 0; i < this._length; i += 1) {\r\n\t\tshape_pool.release(this.shapes[i]);\r\n\t}\r\n\tthis._length = 0;\r\n};\r\nfunction DashProperty(elem, data, renderer, container) {\r\n    this.elem = elem;\r\n    this.frameId = -1;\r\n    this.dataProps = createSizedArray(data.length);\r\n    this.renderer = renderer;\r\n    this.k = false;\r\n    this.dashStr = '';\r\n    this.dashArray = createTypedArray('float32',  data.length ? data.length - 1 : 0);\r\n    this.dashoffset = createTypedArray('float32',  1);\r\n    this.initDynamicPropertyContainer(container);\r\n    var i, len = data.length || 0, prop;\r\n    for(i = 0; i < len; i += 1) {\r\n        prop = PropertyFactory.getProp(elem,data[i].v,0, 0, this);\r\n        this.k = prop.k || this.k;\r\n        this.dataProps[i] = {n:data[i].n,p:prop};\r\n    }\r\n    if(!this.k){\r\n        this.getValue(true);\r\n    }\r\n    this._isAnimated = this.k;\r\n}\r\n\r\nDashProperty.prototype.getValue = function(forceRender) {\r\n    if(this.elem.globalData.frameId === this.frameId && !forceRender){\r\n        return;\r\n    }\r\n    this.frameId = this.elem.globalData.frameId;\r\n    this.iterateDynamicProperties();\r\n    this._mdf = this._mdf || forceRender;\r\n    if (this._mdf) {\r\n        var i = 0, len = this.dataProps.length;\r\n        if(this.renderer === 'svg') {\r\n            this.dashStr = '';\r\n        }\r\n        for(i=0;i<len;i+=1){\r\n            if(this.dataProps[i].n != 'o'){\r\n                if(this.renderer === 'svg') {\r\n                    this.dashStr += ' ' + this.dataProps[i].p.v;\r\n                }else{\r\n                    this.dashArray[i] = this.dataProps[i].p.v;\r\n                }\r\n            }else{\r\n                this.dashoffset[0] = this.dataProps[i].p.v;\r\n            }\r\n        }\r\n    }\r\n};\r\nextendPrototype([DynamicPropertyContainer], DashProperty);\r\nfunction GradientProperty(elem,data,container){\r\n    this.data = data;\r\n    this.c = createTypedArray('uint8c', data.p*4);\r\n    var cLength = data.k.k[0].s ? (data.k.k[0].s.length - data.p*4) : data.k.k.length - data.p*4;\r\n    this.o = createTypedArray('float32', cLength);\r\n    this._cmdf = false;\r\n    this._omdf = false;\r\n    this._collapsable = this.checkCollapsable();\r\n    this._hasOpacity = cLength;\r\n    this.initDynamicPropertyContainer(container);\r\n    this.prop = PropertyFactory.getProp(elem,data.k,1,null,this);\r\n    this.k = this.prop.k;\r\n    this.getValue(true);\r\n}\r\n\r\nGradientProperty.prototype.comparePoints = function(values, points) {\r\n    var i = 0, len = this.o.length/2, diff;\r\n    while(i < len) {\r\n        diff = Math.abs(values[i*4] - values[points*4 + i*2]);\r\n        if(diff > 0.01){\r\n            return false;\r\n        }\r\n        i += 1;\r\n    }\r\n    return true;\r\n};\r\n\r\nGradientProperty.prototype.checkCollapsable = function() {\r\n    if (this.o.length/2 !== this.c.length/4) {\r\n        return false;\r\n    }\r\n    if (this.data.k.k[0].s) {\r\n        var i = 0, len = this.data.k.k.length;\r\n        while (i < len) {\r\n            if (!this.comparePoints(this.data.k.k[i].s, this.data.p)) {\r\n                return false;\r\n            }\r\n            i += 1;\r\n        }\r\n    } else if(!this.comparePoints(this.data.k.k, this.data.p)) {\r\n        return false;\r\n    }\r\n    return true;\r\n};\r\n\r\nGradientProperty.prototype.getValue = function(forceRender){\r\n    this.prop.getValue();\r\n    this._mdf = false;\r\n    this._cmdf = false;\r\n    this._omdf = false;\r\n    if(this.prop._mdf || forceRender){\r\n        var i, len = this.data.p*4;\r\n        var mult, val;\r\n        for(i=0;i<len;i+=1){\r\n            mult = i%4 === 0 ? 100 : 255;\r\n            val = Math.round(this.prop.v[i]*mult);\r\n            if(this.c[i] !== val){\r\n                this.c[i] = val;\r\n                this._cmdf = !forceRender;\r\n            }\r\n        }\r\n        if(this.o.length){\r\n            len = this.prop.v.length;\r\n            for(i=this.data.p*4;i<len;i+=1){\r\n                mult = i%2 === 0 ? 100 : 1;\r\n                val = i%2 === 0 ?  Math.round(this.prop.v[i]*100):this.prop.v[i];\r\n                if(this.o[i-this.data.p*4] !== val){\r\n                    this.o[i-this.data.p*4] = val;\r\n                    this._omdf = !forceRender;\r\n                }\r\n            }\r\n        }\r\n        this._mdf = !forceRender;\r\n    }\r\n};\r\n\r\nextendPrototype([DynamicPropertyContainer], GradientProperty);\r\nvar buildShapeString = function(pathNodes, length, closed, mat) {\r\n\tif(length === 0) {\r\n            return '';\r\n        }\r\n        var _o = pathNodes.o;\r\n        var _i = pathNodes.i;\r\n        var _v = pathNodes.v;\r\n        var i, shapeString = \" M\" + mat.applyToPointStringified(_v[0][0], _v[0][1]);\r\n        for(i = 1; i < length; i += 1) {\r\n            shapeString += \" C\" + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + \" \" + mat.applyToPointStringified(_i[i][0], _i[i][1]) + \" \" + mat.applyToPointStringified(_v[i][0], _v[i][1]);\r\n        }\r\n        if (closed && length) {\r\n            shapeString += \" C\" + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + \" \" + mat.applyToPointStringified(_i[0][0], _i[0][1]) + \" \" + mat.applyToPointStringified(_v[0][0], _v[0][1]);\r\n            shapeString += 'z';\r\n        }\r\n        return shapeString;\r\n}\r\nvar ImagePreloader = (function(){\r\n\r\n    var proxyImage = (function(){\r\n        var canvas = createTag('canvas');\r\n        canvas.width = 1;\r\n        canvas.height = 1;\r\n        var ctx = canvas.getContext('2d');\r\n        ctx.fillStyle = 'rgba(0,0,0,0)';\r\n        ctx.fillRect(0, 0, 1, 1);\r\n        return canvas;\r\n    }())\r\n\r\n    function imageLoaded(){\r\n        this.loadedAssets += 1;\r\n        if(this.loadedAssets === this.totalImages){\r\n            if(this.imagesLoadedCb) {\r\n                this.imagesLoadedCb(null);\r\n            }\r\n        }\r\n    }\r\n\r\n    function getAssetsPath(assetData, assetsPath, original_path) {\r\n        var path = '';\r\n        if (assetData.e) {\r\n            path = assetData.p;\r\n        } else if(assetsPath) {\r\n            var imagePath = assetData.p;\r\n            if (imagePath.indexOf('images/') !== -1) {\r\n                imagePath = imagePath.split('/')[1];\r\n            }\r\n            path = assetsPath + imagePath;\r\n        } else {\r\n            path = original_path;\r\n            path += assetData.u ? assetData.u : '';\r\n            path += assetData.p;\r\n        }\r\n        return path;\r\n    }\r\n\r\n    function createImageData(assetData) {\r\n        var path = getAssetsPath(assetData, this.assetsPath, this.path);\r\n        var img = createTag('img');\r\n        img.crossOrigin = 'anonymous';\r\n        img.addEventListener('load', this._imageLoaded.bind(this), false);\r\n        img.addEventListener('error', function() {\r\n            ob.img = proxyImage;\r\n            this._imageLoaded();\r\n        }.bind(this), false);\r\n        img.src = path;\r\n        var ob = {\r\n            img: img,\r\n            assetData: assetData\r\n        }\r\n        return ob;\r\n    }\r\n\r\n    function loadAssets(assets, cb){\r\n        this.imagesLoadedCb = cb;\r\n        var i, len = assets.length;\r\n        for (i = 0; i < len; i += 1) {\r\n            if(!assets[i].layers){\r\n                this.totalImages += 1;\r\n                this.images.push(this._createImageData(assets[i]));\r\n            }\r\n        }\r\n    }\r\n\r\n    function setPath(path){\r\n        this.path = path || '';\r\n    }\r\n\r\n    function setAssetsPath(path){\r\n        this.assetsPath = path || '';\r\n    }\r\n\r\n    function getImage(assetData) {\r\n        var i = 0, len = this.images.length;\r\n        while (i < len) {\r\n            if (this.images[i].assetData === assetData) {\r\n                return this.images[i].img;\r\n            }\r\n            i += 1;\r\n        }\r\n    }\r\n\r\n    function destroy() {\r\n        this.imagesLoadedCb = null;\r\n        this.images.length = 0;\r\n    }\r\n\r\n    function loaded() {\r\n        return this.totalImages === this.loadedAssets;\r\n    }\r\n\r\n    return function ImagePreloader(){\r\n        this.loadAssets = loadAssets;\r\n        this.setAssetsPath = setAssetsPath;\r\n        this.setPath = setPath;\r\n        this.loaded = loaded;\r\n        this.destroy = destroy;\r\n        this.getImage = getImage;\r\n        this._createImageData = createImageData;\r\n        this._imageLoaded = imageLoaded;\r\n        this.assetsPath = '';\r\n        this.path = '';\r\n        this.totalImages = 0;\r\n        this.loadedAssets = 0;\r\n        this.imagesLoadedCb = null;\r\n        this.images = [];\r\n    };\r\n}());\r\nvar featureSupport = (function(){\r\n\tvar ob = {\r\n\t\tmaskType: true\r\n\t};\r\n\tif (/MSIE 10/i.test(navigator.userAgent) || /MSIE 9/i.test(navigator.userAgent) || /rv:11.0/i.test(navigator.userAgent) || /Edge\\/\\d./i.test(navigator.userAgent)) {\r\n\t   ob.maskType = false;\r\n\t}\r\n\treturn ob;\r\n}());\r\nvar filtersFactory = (function(){\r\n\tvar ob = {};\r\n\tob.createFilter = createFilter;\r\n\tob.createAlphaToLuminanceFilter = createAlphaToLuminanceFilter;\r\n\r\n\tfunction createFilter(filId){\r\n        \tvar fil = createNS('filter');\r\n        \tfil.setAttribute('id',filId);\r\n                fil.setAttribute('filterUnits','objectBoundingBox');\r\n                fil.setAttribute('x','0%');\r\n                fil.setAttribute('y','0%');\r\n                fil.setAttribute('width','100%');\r\n                fil.setAttribute('height','100%');\r\n                return fil;\r\n\t}\r\n\r\n\tfunction createAlphaToLuminanceFilter(){\r\n                var feColorMatrix = createNS('feColorMatrix');\r\n                feColorMatrix.setAttribute('type','matrix');\r\n                feColorMatrix.setAttribute('color-interpolation-filters','sRGB');\r\n                feColorMatrix.setAttribute('values','0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1');\r\n                return feColorMatrix;\r\n\t}\r\n\r\n\treturn ob;\r\n}());\r\nvar assetLoader = (function(){\r\n\r\n\tfunction formatResponse(xhr) {\r\n\t\tif(xhr.response && typeof xhr.response === 'object') {\r\n\t\t\treturn xhr.response;\r\n\t\t} else if(xhr.response && typeof xhr.response === 'string') {\r\n\t\t\treturn JSON.parse(xhr.response);\r\n\t\t} else if(xhr.responseText) {\r\n\t\t\treturn JSON.parse(xhr.responseText);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction loadAsset(path, callback, errorCallback) {\r\n\t\tvar response;\r\n\t\tvar xhr = new XMLHttpRequest();\r\n\t\txhr.open('GET', path, true);\r\n\t\t// set responseType after calling open or IE will break.\r\n\t\ttry {\r\n\t\t    // This crashes on Android WebView prior to KitKat\r\n\t\t    xhr.responseType = \"json\";\r\n\t\t} catch (err) {}\r\n\t    xhr.send();\r\n\t    xhr.onreadystatechange = function () {\r\n\t        if (xhr.readyState == 4) {\r\n\t            if(xhr.status == 200){\r\n\t            \tresponse = formatResponse(xhr);\r\n\t            \tcallback(response);\r\n\t            }else{\r\n\t                try{\r\n\t            \t\tresponse = formatResponse(xhr);\r\n\t            \t\tcallback(response);\r\n\t                }catch(err){\r\n\t                \tif(errorCallback) {\r\n\t                \t\terrorCallback(err);\r\n\t                \t}\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t}\r\n\treturn {\r\n\t\tload: loadAsset\r\n\t}\r\n}())\r\n\r\nfunction TextAnimatorProperty(textData, renderType, elem){\r\n    this._isFirstFrame = true;\r\n\tthis._hasMaskedPath = false;\r\n\tthis._frameId = -1;\r\n\tthis._textData = textData;\r\n\tthis._renderType = renderType;\r\n    this._elem = elem;\r\n\tthis._animatorsData = createSizedArray(this._textData.a.length);\r\n\tthis._pathData = {};\r\n\tthis._moreOptions = {\r\n\t\talignment: {}\r\n\t};\r\n\tthis.renderedLetters = [];\r\n    this.lettersChangedFlag = false;\r\n    this.initDynamicPropertyContainer(elem);\r\n\r\n}\r\n\r\nTextAnimatorProperty.prototype.searchProperties = function(){\r\n    var i, len = this._textData.a.length, animatorProps;\r\n    var getProp = PropertyFactory.getProp;\r\n    for(i=0;i<len;i+=1){\r\n        animatorProps = this._textData.a[i];\r\n        this._animatorsData[i] = new TextAnimatorDataProperty(this._elem, animatorProps, this);\r\n    }\r\n    if(this._textData.p && 'm' in this._textData.p){\r\n        this._pathData = {\r\n            f: getProp(this._elem,this._textData.p.f,0,0,this),\r\n            l: getProp(this._elem,this._textData.p.l,0,0,this),\r\n            r: this._textData.p.r,\r\n            m: this._elem.maskManager.getMaskProperty(this._textData.p.m)\r\n        };\r\n        this._hasMaskedPath = true;\r\n    } else {\r\n        this._hasMaskedPath = false;\r\n    }\r\n    this._moreOptions.alignment = getProp(this._elem,this._textData.m.a,1,0,this);\r\n};\r\n\r\nTextAnimatorProperty.prototype.getMeasures = function(documentData, lettersChangedFlag){\r\n    this.lettersChangedFlag = lettersChangedFlag;\r\n    if(!this._mdf && !this._isFirstFrame && !lettersChangedFlag && (!this._hasMaskedPath || !this._pathData.m._mdf)) {\r\n        return;\r\n    }\r\n    this._isFirstFrame = false;\r\n    var alignment = this._moreOptions.alignment.v;\r\n    var animators = this._animatorsData;\r\n    var textData = this._textData;\r\n    var matrixHelper = this.mHelper;\r\n    var renderType = this._renderType;\r\n    var renderedLettersCount = this.renderedLetters.length;\r\n    var data = this.data;\r\n    var xPos,yPos;\r\n    var i, len;\r\n    var letters = documentData.l, pathInfo, currentLength, currentPoint, segmentLength, flag, pointInd, segmentInd, prevPoint, points, segments, partialLength, totalLength, perc, tanAngle, mask;\r\n    if(this._hasMaskedPath) {\r\n        mask = this._pathData.m;\r\n        if(!this._pathData.n || this._pathData._mdf){\r\n            var paths = mask.v;\r\n            if(this._pathData.r){\r\n                paths = paths.reverse();\r\n            }\r\n            // TODO: release bezier data cached from previous pathInfo: this._pathData.pi\r\n            pathInfo = {\r\n                tLength: 0,\r\n                segments: []\r\n            };\r\n            len = paths._length - 1;\r\n            var bezierData;\r\n            totalLength = 0;\r\n            for (i = 0; i < len; i += 1) {\r\n                bezierData = bez.buildBezierData(paths.v[i]\r\n                    , paths.v[i + 1]\r\n                    , [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]]\r\n                    , [paths.i[i + 1][0] - paths.v[i + 1][0], paths.i[i + 1][1] - paths.v[i + 1][1]]);\r\n                pathInfo.tLength += bezierData.segmentLength;\r\n                pathInfo.segments.push(bezierData);\r\n                totalLength += bezierData.segmentLength;\r\n            }\r\n            i = len;\r\n            if (mask.v.c) {\r\n                bezierData = bez.buildBezierData(paths.v[i]\r\n                    , paths.v[0]\r\n                    , [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]]\r\n                    , [paths.i[0][0] - paths.v[0][0], paths.i[0][1] - paths.v[0][1]]);\r\n                pathInfo.tLength += bezierData.segmentLength;\r\n                pathInfo.segments.push(bezierData);\r\n                totalLength += bezierData.segmentLength;\r\n            }\r\n            this._pathData.pi = pathInfo;\r\n        }\r\n        pathInfo = this._pathData.pi;\r\n\r\n        currentLength = this._pathData.f.v;\r\n        segmentInd = 0;\r\n        pointInd = 1;\r\n        segmentLength = 0;\r\n        flag = true;\r\n        segments = pathInfo.segments;\r\n        if (currentLength < 0 && mask.v.c) {\r\n            if (pathInfo.tLength < Math.abs(currentLength)) {\r\n                currentLength = -Math.abs(currentLength) % pathInfo.tLength;\r\n            }\r\n            segmentInd = segments.length - 1;\r\n            points = segments[segmentInd].points;\r\n            pointInd = points.length - 1;\r\n            while (currentLength < 0) {\r\n                currentLength += points[pointInd].partialLength;\r\n                pointInd -= 1;\r\n                if (pointInd < 0) {\r\n                    segmentInd -= 1;\r\n                    points = segments[segmentInd].points;\r\n                    pointInd = points.length - 1;\r\n                }\r\n            }\r\n\r\n        }\r\n        points = segments[segmentInd].points;\r\n        prevPoint = points[pointInd - 1];\r\n        currentPoint = points[pointInd];\r\n        partialLength = currentPoint.partialLength;\r\n    }\r\n\r\n\r\n    len = letters.length;\r\n    xPos = 0;\r\n    yPos = 0;\r\n    var yOff = documentData.finalSize * 1.2 * 0.714;\r\n    var firstLine = true;\r\n    var animatorProps, animatorSelector;\r\n    var j, jLen;\r\n    var letterValue;\r\n\r\n    jLen = animators.length;\r\n    var lastLetter;\r\n\r\n    var mult, ind = -1, offf, xPathPos, yPathPos;\r\n    var initPathPos = currentLength,initSegmentInd = segmentInd, initPointInd = pointInd, currentLine = -1;\r\n    var elemOpacity;\r\n    var sc,sw,fc,k;\r\n    var lineLength = 0;\r\n    var letterSw, letterSc, letterFc, letterM = '', letterP = this.defaultPropsArray, letterO;\r\n\r\n    //\r\n    if(documentData.j === 2 || documentData.j === 1) {\r\n        var animatorJustifyOffset = 0;\r\n        var animatorFirstCharOffset = 0;\r\n        var justifyOffsetMult = documentData.j === 2 ? -0.5 : -1;\r\n        var lastIndex = 0;\r\n        var isNewLine = true;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n            if (letters[i].n) {\r\n                if(animatorJustifyOffset) {\r\n                    animatorJustifyOffset += animatorFirstCharOffset;\r\n                }\r\n                while (lastIndex < i) {\r\n                    letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\r\n                    lastIndex += 1;\r\n                }\r\n                animatorJustifyOffset = 0;\r\n                isNewLine = true;\r\n            } else {\r\n                for (j = 0; j < jLen; j += 1) {\r\n                    animatorProps = animators[j].a;\r\n                    if (animatorProps.t.propType) {\r\n                        if (isNewLine && documentData.j === 2) {\r\n                            animatorFirstCharOffset += animatorProps.t.v * justifyOffsetMult;\r\n                        }\r\n                        animatorSelector = animators[j].s;\r\n                        mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n                        if (mult.length) {\r\n                            animatorJustifyOffset += animatorProps.t.v*mult[0] * justifyOffsetMult;\r\n                        } else {\r\n                            animatorJustifyOffset += animatorProps.t.v*mult * justifyOffsetMult;\r\n                        }\r\n                    }\r\n                }\r\n                isNewLine = false;\r\n            }\r\n        }\r\n        if(animatorJustifyOffset) {\r\n            animatorJustifyOffset += animatorFirstCharOffset;\r\n        }\r\n        while(lastIndex < i) {\r\n            letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\r\n            lastIndex += 1;\r\n        }\r\n    }\r\n    //\r\n\r\n    for( i = 0; i < len; i += 1) {\r\n\r\n        matrixHelper.reset();\r\n        elemOpacity = 1;\r\n        if(letters[i].n) {\r\n            xPos = 0;\r\n            yPos += documentData.yOffset;\r\n            yPos += firstLine ? 1 : 0;\r\n            currentLength = initPathPos ;\r\n            firstLine = false;\r\n            lineLength = 0;\r\n            if(this._hasMaskedPath) {\r\n                segmentInd = initSegmentInd;\r\n                pointInd = initPointInd;\r\n                points = segments[segmentInd].points;\r\n                prevPoint = points[pointInd - 1];\r\n                currentPoint = points[pointInd];\r\n                partialLength = currentPoint.partialLength;\r\n                segmentLength = 0;\r\n            }\r\n            letterO = letterSw = letterFc = letterM = '';\r\n            letterP = this.defaultPropsArray;\r\n        }else{\r\n            if(this._hasMaskedPath) {\r\n                if(currentLine !== letters[i].line){\r\n                    switch(documentData.j){\r\n                        case 1:\r\n                            currentLength += totalLength - documentData.lineWidths[letters[i].line];\r\n                            break;\r\n                        case 2:\r\n                            currentLength += (totalLength - documentData.lineWidths[letters[i].line])/2;\r\n                            break;\r\n                    }\r\n                    currentLine = letters[i].line;\r\n                }\r\n                if (ind !== letters[i].ind) {\r\n                    if (letters[ind]) {\r\n                        currentLength += letters[ind].extra;\r\n                    }\r\n                    currentLength += letters[i].an / 2;\r\n                    ind = letters[i].ind;\r\n                }\r\n                currentLength += alignment[0] * letters[i].an / 200;\r\n                var animatorOffset = 0;\r\n                for (j = 0; j < jLen; j += 1) {\r\n                    animatorProps = animators[j].a;\r\n                    if (animatorProps.p.propType) {\r\n                        animatorSelector = animators[j].s;\r\n                        mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                        if(mult.length){\r\n                            animatorOffset += animatorProps.p.v[0] * mult[0];\r\n                        } else{\r\n                            animatorOffset += animatorProps.p.v[0] * mult;\r\n                        }\r\n\r\n                    }\r\n                    if (animatorProps.a.propType) {\r\n                        animatorSelector = animators[j].s;\r\n                        mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                        if(mult.length){\r\n                            animatorOffset += animatorProps.a.v[0] * mult[0];\r\n                        } else{\r\n                            animatorOffset += animatorProps.a.v[0] * mult;\r\n                        }\r\n\r\n                    }\r\n                }\r\n                flag = true;\r\n                while (flag) {\r\n                    if (segmentLength + partialLength >= currentLength + animatorOffset || !points) {\r\n                        perc = (currentLength + animatorOffset - segmentLength) / currentPoint.partialLength;\r\n                        xPathPos = prevPoint.point[0] + (currentPoint.point[0] - prevPoint.point[0]) * perc;\r\n                        yPathPos = prevPoint.point[1] + (currentPoint.point[1] - prevPoint.point[1]) * perc;\r\n                        matrixHelper.translate(-alignment[0]*letters[i].an/200, -(alignment[1] * yOff / 100));\r\n                        flag = false;\r\n                    } else if (points) {\r\n                        segmentLength += currentPoint.partialLength;\r\n                        pointInd += 1;\r\n                        if (pointInd >= points.length) {\r\n                            pointInd = 0;\r\n                            segmentInd += 1;\r\n                            if (!segments[segmentInd]) {\r\n                                if (mask.v.c) {\r\n                                    pointInd = 0;\r\n                                    segmentInd = 0;\r\n                                    points = segments[segmentInd].points;\r\n                                } else {\r\n                                    segmentLength -= currentPoint.partialLength;\r\n                                    points = null;\r\n                                }\r\n                            } else {\r\n                                points = segments[segmentInd].points;\r\n                            }\r\n                        }\r\n                        if (points) {\r\n                            prevPoint = currentPoint;\r\n                            currentPoint = points[pointInd];\r\n                            partialLength = currentPoint.partialLength;\r\n                        }\r\n                    }\r\n                }\r\n                offf = letters[i].an / 2 - letters[i].add;\r\n                matrixHelper.translate(-offf, 0, 0);\r\n            } else {\r\n                offf = letters[i].an/2 - letters[i].add;\r\n                matrixHelper.translate(-offf,0,0);\r\n\r\n                // Grouping alignment\r\n                matrixHelper.translate(-alignment[0]*letters[i].an/200, -alignment[1]*yOff/100, 0);\r\n            }\r\n\r\n            lineLength += letters[i].l/2;\r\n            for(j=0;j<jLen;j+=1){\r\n                animatorProps = animators[j].a;\r\n                if (animatorProps.t.propType) {\r\n                    animatorSelector = animators[j].s;\r\n                    mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                    //This condition is to prevent applying tracking to first character in each line. Might be better to use a boolean \"isNewLine\"\r\n                    if(xPos !== 0 || documentData.j !== 0) {\r\n                        if(this._hasMaskedPath) {\r\n                            if(mult.length) {\r\n                                currentLength += animatorProps.t.v*mult[0];\r\n                            } else {\r\n                                currentLength += animatorProps.t.v*mult;\r\n                            }\r\n                        }else{\r\n                            if(mult.length) {\r\n                                xPos += animatorProps.t.v*mult[0];\r\n                            } else {\r\n                                xPos += animatorProps.t.v*mult;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            lineLength += letters[i].l/2;\r\n            if(documentData.strokeWidthAnim) {\r\n                sw = documentData.sw || 0;\r\n            }\r\n            if(documentData.strokeColorAnim) {\r\n                if(documentData.sc){\r\n                    sc = [documentData.sc[0], documentData.sc[1], documentData.sc[2]];\r\n                }else{\r\n                    sc = [0,0,0];\r\n                }\r\n            }\r\n            if(documentData.fillColorAnim && documentData.fc) {\r\n                fc = [documentData.fc[0], documentData.fc[1], documentData.fc[2]];\r\n            }\r\n            for(j=0;j<jLen;j+=1){\r\n                animatorProps = animators[j].a;\r\n                if (animatorProps.a.propType) {\r\n                    animatorSelector = animators[j].s;\r\n                    mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n\r\n                    if(mult.length){\r\n                        matrixHelper.translate(-animatorProps.a.v[0]*mult[0], -animatorProps.a.v[1]*mult[1], animatorProps.a.v[2]*mult[2]);\r\n                    } else {\r\n                        matrixHelper.translate(-animatorProps.a.v[0]*mult, -animatorProps.a.v[1]*mult, animatorProps.a.v[2]*mult);\r\n                    }\r\n                }\r\n            }\r\n            for(j=0;j<jLen;j+=1){\r\n                animatorProps = animators[j].a;\r\n                if (animatorProps.s.propType) {\r\n                    animatorSelector = animators[j].s;\r\n                    mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                    if(mult.length){\r\n                        matrixHelper.scale(1+((animatorProps.s.v[0]-1)*mult[0]),1+((animatorProps.s.v[1]-1)*mult[1]),1);\r\n                    } else {\r\n                        matrixHelper.scale(1+((animatorProps.s.v[0]-1)*mult),1+((animatorProps.s.v[1]-1)*mult),1);\r\n                    }\r\n                }\r\n            }\r\n            for(j=0;j<jLen;j+=1) {\r\n                animatorProps = animators[j].a;\r\n                animatorSelector = animators[j].s;\r\n                mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                if (animatorProps.sk.propType) {\r\n                    if(mult.length) {\r\n                        matrixHelper.skewFromAxis(-animatorProps.sk.v * mult[0], animatorProps.sa.v * mult[1]);\r\n                    } else {\r\n                        matrixHelper.skewFromAxis(-animatorProps.sk.v * mult, animatorProps.sa.v * mult);\r\n                    }\r\n                }\r\n                if (animatorProps.r.propType) {\r\n                    if(mult.length) {\r\n                        matrixHelper.rotateZ(-animatorProps.r.v * mult[2]);\r\n                    } else {\r\n                        matrixHelper.rotateZ(-animatorProps.r.v * mult);\r\n                    }\r\n                }\r\n                if (animatorProps.ry.propType) {\r\n\r\n                    if(mult.length) {\r\n                        matrixHelper.rotateY(animatorProps.ry.v*mult[1]);\r\n                    }else{\r\n                        matrixHelper.rotateY(animatorProps.ry.v*mult);\r\n                    }\r\n                }\r\n                if (animatorProps.rx.propType) {\r\n                    if(mult.length) {\r\n                        matrixHelper.rotateX(animatorProps.rx.v*mult[0]);\r\n                    } else {\r\n                        matrixHelper.rotateX(animatorProps.rx.v*mult);\r\n                    }\r\n                }\r\n                if (animatorProps.o.propType) {\r\n                    if(mult.length) {\r\n                        elemOpacity += ((animatorProps.o.v)*mult[0] - elemOpacity)*mult[0];\r\n                    } else {\r\n                        elemOpacity += ((animatorProps.o.v)*mult - elemOpacity)*mult;\r\n                    }\r\n                }\r\n                if (documentData.strokeWidthAnim && animatorProps.sw.propType) {\r\n                    if(mult.length) {\r\n                        sw += animatorProps.sw.v*mult[0];\r\n                    } else {\r\n                        sw += animatorProps.sw.v*mult;\r\n                    }\r\n                }\r\n                if (documentData.strokeColorAnim && animatorProps.sc.propType) {\r\n                    for(k=0;k<3;k+=1){\r\n                        if(mult.length) {\r\n                            sc[k] = sc[k] + (animatorProps.sc.v[k] - sc[k])*mult[0];\r\n                        } else {\r\n                            sc[k] = sc[k] + (animatorProps.sc.v[k] - sc[k])*mult;\r\n                        }\r\n                    }\r\n                }\r\n                if (documentData.fillColorAnim && documentData.fc) {\r\n                    if(animatorProps.fc.propType){\r\n                        for(k=0;k<3;k+=1){\r\n                            if(mult.length) {\r\n                                fc[k] = fc[k] + (animatorProps.fc.v[k] - fc[k])*mult[0];\r\n                            } else {\r\n                                fc[k] = fc[k] + (animatorProps.fc.v[k] - fc[k])*mult;\r\n                            }\r\n                        }\r\n                    }\r\n                    if(animatorProps.fh.propType){\r\n                        if(mult.length) {\r\n                            fc = addHueToRGB(fc,animatorProps.fh.v*mult[0]);\r\n                        } else {\r\n                            fc = addHueToRGB(fc,animatorProps.fh.v*mult);\r\n                        }\r\n                    }\r\n                    if(animatorProps.fs.propType){\r\n                        if(mult.length) {\r\n                            fc = addSaturationToRGB(fc,animatorProps.fs.v*mult[0]);\r\n                        } else {\r\n                            fc = addSaturationToRGB(fc,animatorProps.fs.v*mult);\r\n                        }\r\n                    }\r\n                    if(animatorProps.fb.propType){\r\n                        if(mult.length) {\r\n                            fc = addBrightnessToRGB(fc,animatorProps.fb.v*mult[0]);\r\n                        } else {\r\n                            fc = addBrightnessToRGB(fc,animatorProps.fb.v*mult);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            for(j=0;j<jLen;j+=1){\r\n                animatorProps = animators[j].a;\r\n\r\n                if (animatorProps.p.propType) {\r\n                    animatorSelector = animators[j].s;\r\n                    mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                    if(this._hasMaskedPath) {\r\n                        if(mult.length) {\r\n                            matrixHelper.translate(0, animatorProps.p.v[1] * mult[0], -animatorProps.p.v[2] * mult[1]);\r\n                        } else {\r\n                            matrixHelper.translate(0, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\r\n                        }\r\n                    }else{\r\n                        if(mult.length) {\r\n                            matrixHelper.translate(animatorProps.p.v[0] * mult[0], animatorProps.p.v[1] * mult[1], -animatorProps.p.v[2] * mult[2]);\r\n                        } else {\r\n                            matrixHelper.translate(animatorProps.p.v[0] * mult, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\r\n                        \r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if(documentData.strokeWidthAnim){\r\n                letterSw = sw < 0 ? 0 : sw;\r\n            }\r\n            if(documentData.strokeColorAnim){\r\n                letterSc = 'rgb('+Math.round(sc[0]*255)+','+Math.round(sc[1]*255)+','+Math.round(sc[2]*255)+')';\r\n            }\r\n            if(documentData.fillColorAnim && documentData.fc){\r\n                letterFc = 'rgb('+Math.round(fc[0]*255)+','+Math.round(fc[1]*255)+','+Math.round(fc[2]*255)+')';\r\n            }\r\n\r\n            if(this._hasMaskedPath) {\r\n                matrixHelper.translate(0,-documentData.ls);\r\n\r\n                matrixHelper.translate(0, alignment[1]*yOff/100 + yPos,0);\r\n                if (textData.p.p) {\r\n                    tanAngle = (currentPoint.point[1] - prevPoint.point[1]) / (currentPoint.point[0] - prevPoint.point[0]);\r\n                    var rot = Math.atan(tanAngle) * 180 / Math.PI;\r\n                    if (currentPoint.point[0] < prevPoint.point[0]) {\r\n                        rot += 180;\r\n                    }\r\n                    matrixHelper.rotate(-rot * Math.PI / 180);\r\n                }\r\n                matrixHelper.translate(xPathPos, yPathPos, 0);\r\n                currentLength -= alignment[0]*letters[i].an/200;\r\n                if(letters[i+1] && ind !== letters[i+1].ind){\r\n                    currentLength += letters[i].an / 2;\r\n                    currentLength += documentData.tr/1000*documentData.finalSize;\r\n                }\r\n            }else{\r\n\r\n                matrixHelper.translate(xPos,yPos,0);\r\n\r\n                if(documentData.ps){\r\n                    //matrixHelper.translate(documentData.ps[0],documentData.ps[1],0);\r\n                    matrixHelper.translate(documentData.ps[0],documentData.ps[1] + documentData.ascent,0);\r\n                }\r\n                switch(documentData.j){\r\n                    case 1:\r\n                        matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line]),0,0);\r\n                        break;\r\n                    case 2:\r\n                        matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line])/2,0,0);\r\n                        break;\r\n                }\r\n                matrixHelper.translate(0,-documentData.ls);\r\n                matrixHelper.translate(offf,0,0);\r\n                matrixHelper.translate(alignment[0]*letters[i].an/200,alignment[1]*yOff/100,0);\r\n                xPos += letters[i].l + documentData.tr/1000*documentData.finalSize;\r\n            }\r\n            if(renderType === 'html'){\r\n                letterM = matrixHelper.toCSS();\r\n            }else if(renderType === 'svg'){\r\n                letterM = matrixHelper.to2dCSS();\r\n            }else{\r\n                letterP = [matrixHelper.props[0],matrixHelper.props[1],matrixHelper.props[2],matrixHelper.props[3],matrixHelper.props[4],matrixHelper.props[5],matrixHelper.props[6],matrixHelper.props[7],matrixHelper.props[8],matrixHelper.props[9],matrixHelper.props[10],matrixHelper.props[11],matrixHelper.props[12],matrixHelper.props[13],matrixHelper.props[14],matrixHelper.props[15]];\r\n            }\r\n            letterO = elemOpacity;\r\n        }\r\n\r\n        if(renderedLettersCount <= i) {\r\n            letterValue = new LetterProps(letterO,letterSw,letterSc,letterFc,letterM,letterP);\r\n            this.renderedLetters.push(letterValue);\r\n            renderedLettersCount += 1;\r\n            this.lettersChangedFlag = true;\r\n        } else {\r\n            letterValue = this.renderedLetters[i];\r\n            this.lettersChangedFlag = letterValue.update(letterO, letterSw, letterSc, letterFc, letterM, letterP) || this.lettersChangedFlag;\r\n        }\r\n    }\r\n};\r\n\r\nTextAnimatorProperty.prototype.getValue = function(){\r\n\tif(this._elem.globalData.frameId === this._frameId){\r\n        return;\r\n    }\r\n    this._frameId = this._elem.globalData.frameId;\r\n    this.iterateDynamicProperties();\r\n};\r\n\r\nTextAnimatorProperty.prototype.mHelper = new Matrix();\r\nTextAnimatorProperty.prototype.defaultPropsArray = [];\r\nextendPrototype([DynamicPropertyContainer], TextAnimatorProperty);\r\nfunction TextAnimatorDataProperty(elem, animatorProps, container) {\r\n\tvar defaultData = {propType:false};\r\n\tvar getProp = PropertyFactory.getProp;\r\n\tvar textAnimator_animatables = animatorProps.a;\r\n\tthis.a = {\r\n\t\tr: textAnimator_animatables.r ? getProp(elem, textAnimator_animatables.r, 0, degToRads, container) : defaultData,\r\n\t\trx: textAnimator_animatables.rx ? getProp(elem, textAnimator_animatables.rx, 0, degToRads, container) : defaultData,\r\n\t\try: textAnimator_animatables.ry ? getProp(elem, textAnimator_animatables.ry, 0, degToRads, container) : defaultData,\r\n\t\tsk: textAnimator_animatables.sk ? getProp(elem, textAnimator_animatables.sk, 0, degToRads, container) : defaultData,\r\n\t\tsa: textAnimator_animatables.sa ? getProp(elem, textAnimator_animatables.sa, 0, degToRads, container) : defaultData,\r\n\t\ts: textAnimator_animatables.s ? getProp(elem, textAnimator_animatables.s, 1, 0.01, container) : defaultData,\r\n\t\ta: textAnimator_animatables.a ? getProp(elem, textAnimator_animatables.a, 1, 0, container) : defaultData,\r\n\t\to: textAnimator_animatables.o ? getProp(elem, textAnimator_animatables.o, 0, 0.01, container) : defaultData,\r\n\t\tp: textAnimator_animatables.p ? getProp(elem,textAnimator_animatables.p, 1, 0, container) : defaultData,\r\n\t\tsw: textAnimator_animatables.sw ? getProp(elem, textAnimator_animatables.sw, 0, 0, container) : defaultData,\r\n\t\tsc: textAnimator_animatables.sc ? getProp(elem, textAnimator_animatables.sc, 1, 0, container) : defaultData,\r\n\t\tfc: textAnimator_animatables.fc ? getProp(elem, textAnimator_animatables.fc, 1, 0, container) : defaultData,\r\n\t\tfh: textAnimator_animatables.fh ? getProp(elem, textAnimator_animatables.fh, 0, 0, container) : defaultData,\r\n\t\tfs: textAnimator_animatables.fs ? getProp(elem, textAnimator_animatables.fs, 0, 0.01, container) : defaultData,\r\n\t\tfb: textAnimator_animatables.fb ? getProp(elem, textAnimator_animatables.fb, 0, 0.01, container) : defaultData,\r\n\t\tt: textAnimator_animatables.t ? getProp(elem, textAnimator_animatables.t, 0, 0, container) : defaultData\r\n\t};\r\n\r\n\tthis.s = TextSelectorProp.getTextSelectorProp(elem,animatorProps.s, container);\r\n    this.s.t = animatorProps.s.t;\r\n}\r\nfunction LetterProps(o, sw, sc, fc, m, p){\r\n    this.o = o;\r\n    this.sw = sw;\r\n    this.sc = sc;\r\n    this.fc = fc;\r\n    this.m = m;\r\n    this.p = p;\r\n    this._mdf = {\r\n    \to: true,\r\n    \tsw: !!sw,\r\n    \tsc: !!sc,\r\n    \tfc: !!fc,\r\n    \tm: true,\r\n    \tp: true\r\n    };\r\n}\r\n\r\nLetterProps.prototype.update = function(o, sw, sc, fc, m, p) {\r\n\tthis._mdf.o = false;\r\n\tthis._mdf.sw = false;\r\n\tthis._mdf.sc = false;\r\n\tthis._mdf.fc = false;\r\n\tthis._mdf.m = false;\r\n\tthis._mdf.p = false;\r\n\tvar updated = false;\r\n\r\n\tif(this.o !== o) {\r\n\t\tthis.o = o;\r\n\t\tthis._mdf.o = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(this.sw !== sw) {\r\n\t\tthis.sw = sw;\r\n\t\tthis._mdf.sw = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(this.sc !== sc) {\r\n\t\tthis.sc = sc;\r\n\t\tthis._mdf.sc = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(this.fc !== fc) {\r\n\t\tthis.fc = fc;\r\n\t\tthis._mdf.fc = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(this.m !== m) {\r\n\t\tthis.m = m;\r\n\t\tthis._mdf.m = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(p.length && (this.p[0] !== p[0] || this.p[1] !== p[1] || this.p[4] !== p[4] || this.p[5] !== p[5] || this.p[12] !== p[12] || this.p[13] !== p[13])) {\r\n\t\tthis.p = p;\r\n\t\tthis._mdf.p = true;\r\n\t\tupdated = true;\r\n\t}\r\n\treturn updated;\r\n};\r\nfunction TextProperty(elem, data){\r\n\tthis._frameId = initialDefaultFrame;\r\n\tthis.pv = '';\r\n\tthis.v = '';\r\n\tthis.kf = false;\r\n\tthis._isFirstFrame = true;\r\n\tthis._mdf = false;\r\n    this.data = data;\r\n\tthis.elem = elem;\r\n    this.comp = this.elem.comp;\r\n\tthis.keysIndex = 0;\r\n    this.canResize = false;\r\n    this.minimumFontSize = 1;\r\n    this.effectsSequence = [];\r\n\tthis.currentData = {\r\n\t\tascent: 0,\r\n        boxWidth: this.defaultBoxWidth,\r\n        f: '',\r\n        fStyle: '',\r\n        fWeight: '',\r\n        fc: '',\r\n        j: '',\r\n        justifyOffset: '',\r\n        l: [],\r\n        lh: 0,\r\n        lineWidths: [],\r\n        ls: '',\r\n        of: '',\r\n        s: '',\r\n        sc: '',\r\n        sw: 0,\r\n        t: 0,\r\n        tr: 0,\r\n        sz:0,\r\n        ps:null,\r\n        fillColorAnim: false,\r\n        strokeColorAnim: false,\r\n        strokeWidthAnim: false,\r\n        yOffset: 0,\r\n        finalSize:0,\r\n        finalText:[],\r\n        finalLineHeight: 0,\r\n        __complete: false\r\n\r\n\t};\r\n    this.copyData(this.currentData, this.data.d.k[0].s);\r\n\r\n    if(!this.searchProperty()) {\r\n        this.completeTextData(this.currentData);\r\n    }\r\n}\r\n\r\nTextProperty.prototype.defaultBoxWidth = [0,0];\r\n\r\nTextProperty.prototype.copyData = function(obj, data) {\r\n    for(var s in data) {\r\n        if(data.hasOwnProperty(s)) {\r\n            obj[s] = data[s];\r\n        }\r\n    }\r\n    return obj;\r\n}\r\n\r\nTextProperty.prototype.setCurrentData = function(data){\r\n    if(!data.__complete) {\r\n        this.completeTextData(data);\r\n    }\r\n    this.currentData = data;\r\n    this.currentData.boxWidth = this.currentData.boxWidth || this.defaultBoxWidth;\r\n    this._mdf = true;\r\n};\r\n\r\nTextProperty.prototype.searchProperty = function() {\r\n    return this.searchKeyframes();\r\n};\r\n\r\nTextProperty.prototype.searchKeyframes = function() {\r\n    this.kf = this.data.d.k.length > 1;\r\n    if(this.kf) {\r\n        this.addEffect(this.getKeyframeValue.bind(this));\r\n    }\r\n    return this.kf;\r\n}\r\n\r\nTextProperty.prototype.addEffect = function(effectFunction) {\r\n\tthis.effectsSequence.push(effectFunction);\r\n    this.elem.addDynamicProperty(this);\r\n};\r\n\r\nTextProperty.prototype.getValue = function(_finalValue) {\r\n    if((this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) && !_finalValue) {\r\n        return;\r\n    }\r\n    this.currentData.t = this.data.d.k[this.keysIndex].s.t;\r\n    var currentValue = this.currentData;\r\n    var currentIndex = this.keysIndex;\r\n    if(this.lock) {\r\n        this.setCurrentData(this.currentData);\r\n        return;\r\n    }\r\n    this.lock = true;\r\n    this._mdf = false;\r\n    var multipliedValue;\r\n    var i, len = this.effectsSequence.length;\r\n    var finalValue = _finalValue || this.data.d.k[this.keysIndex].s;\r\n    for(i = 0; i < len; i += 1) {\r\n        //Checking if index changed to prevent creating a new object every time the expression updates.\r\n        if(currentIndex !== this.keysIndex) {\r\n            finalValue = this.effectsSequence[i](finalValue, finalValue.t);\r\n        } else {\r\n            finalValue = this.effectsSequence[i](this.currentData, finalValue.t);\r\n        }\r\n    }\r\n    if(currentValue !== finalValue) {\r\n        this.setCurrentData(finalValue);\r\n    }\r\n    this.pv = this.v = this.currentData;\r\n    this.lock = false;\r\n    this.frameId = this.elem.globalData.frameId;\r\n}\r\n\r\nTextProperty.prototype.getKeyframeValue = function() {\r\n    var textKeys = this.data.d.k, textDocumentData;\r\n    var frameNum = this.elem.comp.renderedFrame;\r\n    var i = 0, len = textKeys.length;\r\n    while(i <= len - 1) {\r\n        textDocumentData = textKeys[i].s;\r\n        if(i === len - 1 || textKeys[i+1].t > frameNum){\r\n            break;\r\n        }\r\n        i += 1;\r\n    }\r\n    if(this.keysIndex !== i) {\r\n        this.keysIndex = i;\r\n    }\r\n    return this.data.d.k[this.keysIndex].s;\r\n};\r\n\r\nTextProperty.prototype.buildFinalText = function(text) {\r\n    var combinedCharacters = FontManager.getCombinedCharacterCodes();\r\n    var charactersArray = [];\r\n    var i = 0, len = text.length;\r\n    var charCode;\r\n    while (i < len) {\r\n        charCode = text.charCodeAt(i);\r\n        if (combinedCharacters.indexOf(charCode) !== -1) {\r\n            charactersArray[charactersArray.length - 1] += text.charAt(i);\r\n        } else {\r\n            if (charCode >= 0xD800 && charCode <= 0xDBFF) {\r\n                charCode = text.charCodeAt(i + 1);\r\n                if (charCode >= 0xDC00 && charCode <= 0xDFFF) {\r\n                    charactersArray.push(text.substr(i, 2));\r\n                    ++i;\r\n                } else {\r\n                    charactersArray.push(text.charAt(i));\r\n                }\r\n            } else {\r\n                charactersArray.push(text.charAt(i));\r\n            }\r\n        }\r\n        i += 1;\r\n    }\r\n    return charactersArray;\r\n}\r\n\r\nTextProperty.prototype.completeTextData = function(documentData) {\r\n    documentData.__complete = true;\r\n    var fontManager = this.elem.globalData.fontManager;\r\n    var data = this.data;\r\n    var letters = [];\r\n    var i, len;\r\n    var newLineFlag, index = 0, val;\r\n    var anchorGrouping = data.m.g;\r\n    var currentSize = 0, currentPos = 0, currentLine = 0, lineWidths = [];\r\n    var lineWidth = 0;\r\n    var maxLineWidth = 0;\r\n    var j, jLen;\r\n    var fontData = fontManager.getFontByName(documentData.f);\r\n    var charData, cLength = 0;\r\n    var styles = fontData.fStyle ? fontData.fStyle.split(' ') : [];\r\n\r\n    var fWeight = 'normal', fStyle = 'normal';\r\n    len = styles.length;\r\n    var styleName;\r\n    for(i=0;i<len;i+=1){\r\n        styleName = styles[i].toLowerCase();\r\n        switch(styleName) {\r\n            case 'italic':\r\n            fStyle = 'italic';\r\n            break;\r\n            case 'bold':\r\n            fWeight = '700';\r\n            break;\r\n            case 'black':\r\n            fWeight = '900';\r\n            break;\r\n            case 'medium':\r\n            fWeight = '500';\r\n            break;\r\n            case 'regular':\r\n            case 'normal':\r\n            fWeight = '400';\r\n            break;\r\n            case 'light':\r\n            case 'thin':\r\n            fWeight = '200';\r\n            break;\r\n        }\r\n    }\r\n    documentData.fWeight = fontData.fWeight || fWeight;\r\n    documentData.fStyle = fStyle;\r\n    documentData.finalSize = documentData.s;\r\n    documentData.finalText = this.buildFinalText(documentData.t);\r\n    len = documentData.finalText.length;\r\n    documentData.finalLineHeight = documentData.lh;\r\n    var trackingOffset = documentData.tr/1000*documentData.finalSize;\r\n    var charCode;\r\n    if(documentData.sz){\r\n        var flag = true;\r\n        var boxWidth = documentData.sz[0];\r\n        var boxHeight = documentData.sz[1];\r\n        var currentHeight, finalText;\r\n        while(flag) {\r\n            finalText = this.buildFinalText(documentData.t);\r\n            currentHeight = 0;\r\n            lineWidth = 0;\r\n            len = finalText.length;\r\n            trackingOffset = documentData.tr/1000*documentData.finalSize;\r\n            var lastSpaceIndex = -1;\r\n            for(i=0;i<len;i+=1){\r\n                charCode = finalText[i].charCodeAt(0);\r\n                newLineFlag = false;\r\n                if(finalText[i] === ' '){\r\n                    lastSpaceIndex = i;\r\n                }else if(charCode === 13 || charCode === 3){\r\n                    lineWidth = 0;\r\n                    newLineFlag = true;\r\n                    currentHeight += documentData.finalLineHeight || documentData.finalSize*1.2;\r\n                }\r\n                if(fontManager.chars){\r\n                    charData = fontManager.getCharData(finalText[i], fontData.fStyle, fontData.fFamily);\r\n                    cLength = newLineFlag ? 0 : charData.w*documentData.finalSize/100;\r\n                }else{\r\n                    //tCanvasHelper.font = documentData.s + 'px '+ fontData.fFamily;\r\n                    cLength = fontManager.measureText(finalText[i], documentData.f, documentData.finalSize);\r\n                }\r\n                if(lineWidth + cLength > boxWidth && finalText[i] !== ' '){\r\n                    if(lastSpaceIndex === -1){\r\n                        len += 1;\r\n                    } else {\r\n                        i = lastSpaceIndex;\r\n                    }\r\n                    currentHeight += documentData.finalLineHeight || documentData.finalSize*1.2;\r\n                    finalText.splice(i, lastSpaceIndex === i ? 1 : 0,\"\\r\");\r\n                    //finalText = finalText.substr(0,i) + \"\\r\" + finalText.substr(i === lastSpaceIndex ? i + 1 : i);\r\n                    lastSpaceIndex = -1;\r\n                    lineWidth = 0;\r\n                }else {\r\n                    lineWidth += cLength;\r\n                    lineWidth += trackingOffset;\r\n                }\r\n            }\r\n            currentHeight += fontData.ascent*documentData.finalSize/100;\r\n            if(this.canResize && documentData.finalSize > this.minimumFontSize && boxHeight < currentHeight) {\r\n                documentData.finalSize -= 1;\r\n                documentData.finalLineHeight = documentData.finalSize * documentData.lh / documentData.s;\r\n            } else {\r\n                documentData.finalText = finalText;\r\n                len = documentData.finalText.length;\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n    }\r\n    lineWidth = - trackingOffset;\r\n    cLength = 0;\r\n    var uncollapsedSpaces = 0;\r\n    var currentChar;\r\n    for (i = 0;i < len ;i += 1) {\r\n        newLineFlag = false;\r\n        currentChar = documentData.finalText[i];\r\n        charCode = currentChar.charCodeAt(0);\r\n        if (currentChar === ' '){\r\n            val = '\\u00A0';\r\n        } else if (charCode === 13 || charCode === 3) {\r\n            uncollapsedSpaces = 0;\r\n            lineWidths.push(lineWidth);\r\n            maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\r\n            lineWidth = - 2 * trackingOffset;\r\n            val = '';\r\n            newLineFlag = true;\r\n            currentLine += 1;\r\n        }else{\r\n            val = documentData.finalText[i];\r\n        }\r\n        if(fontManager.chars){\r\n            charData = fontManager.getCharData(currentChar, fontData.fStyle, fontManager.getFontByName(documentData.f).fFamily);\r\n            cLength = newLineFlag ? 0 : charData.w*documentData.finalSize/100;\r\n        }else{\r\n            //var charWidth = fontManager.measureText(val, documentData.f, documentData.finalSize);\r\n            //tCanvasHelper.font = documentData.finalSize + 'px '+ fontManager.getFontByName(documentData.f).fFamily;\r\n            cLength = fontManager.measureText(val, documentData.f, documentData.finalSize);\r\n        }\r\n\r\n        //\r\n        if(currentChar === ' '){\r\n            uncollapsedSpaces += cLength + trackingOffset;\r\n        } else {\r\n            lineWidth += cLength + trackingOffset + uncollapsedSpaces;\r\n            uncollapsedSpaces = 0;\r\n        }\r\n        letters.push({l:cLength,an:cLength,add:currentSize,n:newLineFlag, anIndexes:[], val: val, line: currentLine, animatorJustifyOffset: 0});\r\n        if(anchorGrouping == 2){\r\n            currentSize += cLength;\r\n            if(val === '' || val === '\\u00A0' || i === len - 1){\r\n                if(val === '' || val === '\\u00A0'){\r\n                    currentSize -= cLength;\r\n                }\r\n                while(currentPos<=i){\r\n                    letters[currentPos].an = currentSize;\r\n                    letters[currentPos].ind = index;\r\n                    letters[currentPos].extra = cLength;\r\n                    currentPos += 1;\r\n                }\r\n                index += 1;\r\n                currentSize = 0;\r\n            }\r\n        }else if(anchorGrouping == 3){\r\n            currentSize += cLength;\r\n            if(val === '' || i === len - 1){\r\n                if(val === ''){\r\n                    currentSize -= cLength;\r\n                }\r\n                while(currentPos<=i){\r\n                    letters[currentPos].an = currentSize;\r\n                    letters[currentPos].ind = index;\r\n                    letters[currentPos].extra = cLength;\r\n                    currentPos += 1;\r\n                }\r\n                currentSize = 0;\r\n                index += 1;\r\n            }\r\n        }else{\r\n            letters[index].ind = index;\r\n            letters[index].extra = 0;\r\n            index += 1;\r\n        }\r\n    }\r\n    documentData.l = letters;\r\n    maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\r\n    lineWidths.push(lineWidth);\r\n    if(documentData.sz){\r\n        documentData.boxWidth = documentData.sz[0];\r\n        documentData.justifyOffset = 0;\r\n    }else{\r\n        documentData.boxWidth = maxLineWidth;\r\n        switch(documentData.j){\r\n            case 1:\r\n                documentData.justifyOffset = - documentData.boxWidth;\r\n                break;\r\n            case 2:\r\n                documentData.justifyOffset = - documentData.boxWidth/2;\r\n                break;\r\n            default:\r\n                documentData.justifyOffset = 0;\r\n        }\r\n    }\r\n    documentData.lineWidths = lineWidths;\r\n\r\n    var animators = data.a, animatorData, letterData;\r\n    jLen = animators.length;\r\n    var based, ind, indexes = [];\r\n    for(j=0;j<jLen;j+=1){\r\n        animatorData = animators[j];\r\n        if(animatorData.a.sc){\r\n            documentData.strokeColorAnim = true;\r\n        }\r\n        if(animatorData.a.sw){\r\n            documentData.strokeWidthAnim = true;\r\n        }\r\n        if(animatorData.a.fc || animatorData.a.fh || animatorData.a.fs || animatorData.a.fb){\r\n            documentData.fillColorAnim = true;\r\n        }\r\n        ind = 0;\r\n        based = animatorData.s.b;\r\n        for(i=0;i<len;i+=1){\r\n            letterData = letters[i];\r\n            letterData.anIndexes[j] = ind;\r\n            if((based == 1 && letterData.val !== '') || (based == 2 && letterData.val !== '' && letterData.val !== '\\u00A0') || (based == 3 && (letterData.n || letterData.val == '\\u00A0' || i == len - 1)) || (based == 4 && (letterData.n || i == len - 1))){\r\n                if(animatorData.s.rn === 1){\r\n                    indexes.push(ind);\r\n                }\r\n                ind += 1;\r\n            }\r\n        }\r\n        data.a[j].s.totalChars = ind;\r\n        var currentInd = -1, newInd;\r\n        if(animatorData.s.rn === 1){\r\n            for(i = 0; i < len; i += 1){\r\n                letterData = letters[i];\r\n                if(currentInd != letterData.anIndexes[j]){\r\n                    currentInd = letterData.anIndexes[j];\r\n                    newInd = indexes.splice(Math.floor(Math.random()*indexes.length),1)[0];\r\n                }\r\n                letterData.anIndexes[j] = newInd;\r\n            }\r\n        }\r\n    }\r\n    documentData.yOffset = documentData.finalLineHeight || documentData.finalSize*1.2;\r\n    documentData.ls = documentData.ls || 0;\r\n    documentData.ascent = fontData.ascent*documentData.finalSize/100;\r\n};\r\n\r\nTextProperty.prototype.updateDocumentData = function(newData, index) {\r\n\tindex = index === undefined ? this.keysIndex : index;\r\n    var dData = this.copyData({}, this.data.d.k[index].s);\r\n    dData = this.copyData(dData, newData);\r\n    this.data.d.k[index].s = dData;\r\n    this.recalculate(index);\r\n    this.elem.addDynamicProperty(this);\r\n};\r\n\r\nTextProperty.prototype.recalculate = function(index) {\r\n    var dData = this.data.d.k[index].s;\r\n    dData.__complete = false;\r\n    this.keysIndex = 0;\r\n    this._isFirstFrame = true;\r\n    this.getValue(dData);\r\n}\r\n\r\nTextProperty.prototype.canResizeFont = function(_canResize) {\r\n    this.canResize = _canResize;\r\n    this.recalculate(this.keysIndex);\r\n    this.elem.addDynamicProperty(this);\r\n};\r\n\r\nTextProperty.prototype.setMinimumFontSize = function(_fontValue) {\r\n    this.minimumFontSize = Math.floor(_fontValue) || 1;\r\n    this.recalculate(this.keysIndex);\r\n    this.elem.addDynamicProperty(this);\r\n};\r\n\r\nvar TextSelectorProp = (function(){\r\n    var max = Math.max;\r\n    var min = Math.min;\r\n    var floor = Math.floor;\r\n\r\n    function TextSelectorProp(elem,data){\r\n        this._currentTextLength = -1;\r\n        this.k = false;\r\n        this.data = data;\r\n        this.elem = elem;\r\n        this.comp = elem.comp;\r\n        this.finalS = 0;\r\n        this.finalE = 0;\r\n        this.initDynamicPropertyContainer(elem);\r\n        this.s = PropertyFactory.getProp(elem,data.s || {k:0},0,0,this);\r\n        if('e' in data){\r\n            this.e = PropertyFactory.getProp(elem,data.e,0,0,this);\r\n        }else{\r\n            this.e = {v:100};\r\n        }\r\n        this.o = PropertyFactory.getProp(elem,data.o || {k:0},0,0,this);\r\n        this.xe = PropertyFactory.getProp(elem,data.xe || {k:0},0,0,this);\r\n        this.ne = PropertyFactory.getProp(elem,data.ne || {k:0},0,0,this);\r\n        this.a = PropertyFactory.getProp(elem,data.a,0,0.01,this);\r\n        if(!this.dynamicProperties.length){\r\n            this.getValue();\r\n        }\r\n    }\r\n\r\n    TextSelectorProp.prototype = {\r\n        getMult: function(ind) {\r\n            if(this._currentTextLength !== this.elem.textProperty.currentData.l.length) {\r\n                this.getValue();\r\n            }\r\n            //var easer = bez.getEasingCurve(this.ne.v/100,0,1-this.xe.v/100,1);\r\n            var easer = BezierFactory.getBezierEasing(this.ne.v/100,0,1-this.xe.v/100,1).get;\r\n            var mult = 0;\r\n            var s = this.finalS;\r\n            var e = this.finalE;\r\n            var type = this.data.sh;\r\n            if(type == 2){\r\n                if(e === s){\r\n                    mult = ind >= e ? 1 : 0;\r\n                }else{\r\n                    mult = max(0,min(0.5/(e-s) + (ind-s)/(e-s),1));\r\n                }\r\n                mult = easer(mult);\r\n            }else if(type == 3){\r\n                if(e === s){\r\n                    mult = ind >= e ? 0 : 1;\r\n                }else{\r\n                    mult = 1 - max(0,min(0.5/(e-s) + (ind-s)/(e-s),1));\r\n                }\r\n\r\n                mult = easer(mult);\r\n            }else if(type == 4){\r\n                if(e === s){\r\n                    mult = 0;\r\n                }else{\r\n                    mult = max(0,min(0.5/(e-s) + (ind-s)/(e-s),1));\r\n                    if(mult<0.5){\r\n                        mult *= 2;\r\n                    }else{\r\n                        mult = 1 - 2*(mult-0.5);\r\n                    }\r\n                }\r\n                mult = easer(mult);\r\n            }else if(type == 5){\r\n                if(e === s){\r\n                    mult = 0;\r\n                }else{\r\n                    var tot = e - s;\r\n                    /*ind += 0.5;\r\n                    mult = -4/(tot*tot)*(ind*ind)+(4/tot)*ind;*/\r\n                    ind = min(max(0,ind+0.5-s),e-s);\r\n                    var x = -tot/2+ind;\r\n                    var a = tot/2;\r\n                    mult = Math.sqrt(1 - (x*x)/(a*a));\r\n                }\r\n                mult = easer(mult);\r\n            }else if(type == 6){\r\n                if(e === s){\r\n                    mult = 0;\r\n                }else{\r\n                    ind = min(max(0,ind+0.5-s),e-s);\r\n                    mult = (1+(Math.cos((Math.PI+Math.PI*2*(ind)/(e-s)))))/2;\r\n                    /*\r\n                     ind = Math.min(Math.max(s,ind),e-1);\r\n                     mult = (1+(Math.cos((Math.PI+Math.PI*2*(ind-s)/(e-1-s)))))/2;\r\n                     mult = Math.max(mult,(1/(e-1-s))/(e-1-s));*/\r\n                }\r\n                mult = easer(mult);\r\n            }else {\r\n                if(ind >= floor(s)){\r\n                    if(ind-s < 0){\r\n                        mult = 1 - (s - ind);\r\n                    }else{\r\n                        mult = max(0,min(e-ind,1));\r\n                    }\r\n                }\r\n                mult = easer(mult);\r\n            }\r\n            return mult*this.a.v;\r\n        },\r\n        getValue: function(newCharsFlag) {\r\n            this.iterateDynamicProperties();\r\n            this._mdf = newCharsFlag || this._mdf;\r\n            this._currentTextLength = this.elem.textProperty.currentData.l.length || 0;\r\n            if(newCharsFlag && this.data.r === 2) {\r\n                this.e.v = this._currentTextLength;\r\n            }\r\n            var divisor = this.data.r === 2 ? 1 : 100 / this.data.totalChars;\r\n            var o = this.o.v/divisor;\r\n            var s = this.s.v/divisor + o;\r\n            var e = (this.e.v/divisor) + o;\r\n            if(s>e){\r\n                var _s = s;\r\n                s = e;\r\n                e = _s;\r\n            }\r\n            this.finalS = s;\r\n            this.finalE = e;\r\n        }\r\n    }\r\n    extendPrototype([DynamicPropertyContainer], TextSelectorProp);\r\n\r\n    function getTextSelectorProp(elem, data,arr) {\r\n        return new TextSelectorProp(elem, data, arr);\r\n    }\r\n\r\n    return {\r\n        getTextSelectorProp: getTextSelectorProp\r\n    };\r\n}());\r\n\r\n    \r\nvar pool_factory = (function() {\r\n\treturn function(initialLength, _create, _release, _clone) {\r\n\r\n\t\tvar _length = 0;\r\n\t\tvar _maxLength = initialLength;\r\n\t\tvar pool = createSizedArray(_maxLength);\r\n\r\n\t\tvar ob = {\r\n\t\t\tnewElement: newElement,\r\n\t\t\trelease: release\r\n\t\t};\r\n\r\n\t\tfunction newElement(){\r\n\t\t\tvar element;\r\n\t\t\tif(_length){\r\n\t\t\t\t_length -= 1;\r\n\t\t\t\telement = pool[_length];\r\n\t\t\t} else {\r\n\t\t\t\telement = _create();\r\n\t\t\t}\r\n\t\t\treturn element;\r\n\t\t}\r\n\r\n\t\tfunction release(element) {\r\n\t\t\tif(_length === _maxLength) {\r\n\t\t\t\tpool = pooling.double(pool);\r\n\t\t\t\t_maxLength = _maxLength*2;\r\n\t\t\t}\r\n\t\t\tif (_release) {\r\n\t\t\t\t_release(element);\r\n\t\t\t}\r\n\t\t\tpool[_length] = element;\r\n\t\t\t_length += 1;\r\n\t\t}\r\n\r\n\t\tfunction clone() {\r\n\t\t\tvar clonedElement = newElement();\r\n\t\t\treturn _clone(clonedElement);\r\n\t\t}\r\n\r\n\t\treturn ob;\r\n\t};\r\n}());\r\n\r\nvar pooling = (function(){\r\n\r\n\tfunction double(arr){\r\n\t\treturn arr.concat(createSizedArray(arr.length));\r\n\t}\r\n\r\n\treturn {\r\n\t\tdouble: double\r\n\t};\r\n}());\r\nvar point_pool = (function(){\r\n\r\n\tfunction create() {\r\n\t\treturn createTypedArray('float32', 2);\r\n\t}\r\n\treturn pool_factory(8, create);\r\n}());\r\nvar shape_pool = (function(){\r\n\r\n\tfunction create() {\r\n\t\treturn new ShapePath();\r\n\t}\r\n\r\n\tfunction release(shapePath) {\r\n\t\tvar len = shapePath._length, i;\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\tpoint_pool.release(shapePath.v[i]);\r\n\t\t\tpoint_pool.release(shapePath.i[i]);\r\n\t\t\tpoint_pool.release(shapePath.o[i]);\r\n\t\t\tshapePath.v[i] = null;\r\n\t\t\tshapePath.i[i] = null;\r\n\t\t\tshapePath.o[i] = null;\r\n\t\t}\r\n\t\tshapePath._length = 0;\r\n\t\tshapePath.c = false;\r\n\t}\r\n\r\n\tfunction clone(shape) {\r\n\t\tvar cloned = factory.newElement();\r\n\t\tvar i, len = shape._length === undefined ? shape.v.length : shape._length;\r\n\t\tcloned.setLength(len);\r\n\t\tcloned.c = shape.c;\r\n\t\tvar pt;\r\n\t\t\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\tcloned.setTripleAt(shape.v[i][0],shape.v[i][1],shape.o[i][0],shape.o[i][1],shape.i[i][0],shape.i[i][1], i);\r\n\t\t}\r\n\t\treturn cloned;\r\n\t}\r\n\r\n\tvar factory = pool_factory(4, create, release);\r\n\tfactory.clone = clone;\r\n\r\n\treturn factory;\r\n}());\r\nvar shapeCollection_pool = (function(){\r\n\tvar ob = {\r\n\t\tnewShapeCollection: newShapeCollection,\r\n\t\trelease: release\r\n\t};\r\n\r\n\tvar _length = 0;\r\n\tvar _maxLength = 4;\r\n\tvar pool = createSizedArray(_maxLength);\r\n\r\n\tfunction newShapeCollection(){\r\n\t\tvar shapeCollection;\r\n\t\tif(_length){\r\n\t\t\t_length -= 1;\r\n\t\t\tshapeCollection = pool[_length];\r\n\t\t} else {\r\n\t\t\tshapeCollection = new ShapeCollection();\r\n\t\t}\r\n\t\treturn shapeCollection;\r\n\t}\r\n\r\n\tfunction release(shapeCollection) {\r\n\t\tvar i, len = shapeCollection._length;\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\tshape_pool.release(shapeCollection.shapes[i]);\r\n\t\t}\r\n\t\tshapeCollection._length = 0;\r\n\r\n\t\tif(_length === _maxLength) {\r\n\t\t\tpool = pooling.double(pool);\r\n\t\t\t_maxLength = _maxLength*2;\r\n\t\t}\r\n\t\tpool[_length] = shapeCollection;\r\n\t\t_length += 1;\r\n\t}\r\n\r\n\treturn ob;\r\n}());\r\nvar segments_length_pool = (function(){\r\n\r\n\tfunction create() {\r\n\t\treturn {\r\n\t\t\tlengths: [],\r\n\t\t\ttotalLength: 0\r\n\t\t};\r\n\t}\r\n\r\n\tfunction release(element) {\r\n\t\tvar i, len = element.lengths.length;\r\n\t\tfor(i=0;i<len;i+=1) {\r\n\t\t\tbezier_length_pool.release(element.lengths[i]);\r\n\t\t}\r\n\t\telement.lengths.length = 0;\r\n\t}\r\n\r\n\treturn pool_factory(8, create, release);\r\n}());\r\nvar bezier_length_pool = (function(){\r\n\r\n\tfunction create() {\r\n\t\treturn {\r\n            addedLength: 0,\r\n            percents: createTypedArray('float32', defaultCurveSegments),\r\n            lengths: createTypedArray('float32', defaultCurveSegments),\r\n        };\r\n\t}\r\n\treturn pool_factory(8, create);\r\n}());\r\nfunction BaseRenderer(){}\r\nBaseRenderer.prototype.checkLayers = function(num){\r\n    var i, len = this.layers.length, data;\r\n    this.completeLayers = true;\r\n    for (i = len - 1; i >= 0; i--) {\r\n        if (!this.elements[i]) {\r\n            data = this.layers[i];\r\n            if(data.ip - data.st <= (num - this.layers[i].st) && data.op - data.st > (num - this.layers[i].st))\r\n            {\r\n                this.buildItem(i);\r\n            }\r\n        }\r\n        this.completeLayers = this.elements[i] ? this.completeLayers:false;\r\n    }\r\n    this.checkPendingElements();\r\n};\r\n\r\nBaseRenderer.prototype.createItem = function(layer){\r\n    switch(layer.ty){\r\n        case 2:\r\n            return this.createImage(layer);\r\n        case 0:\r\n            return this.createComp(layer);\r\n        case 1:\r\n            return this.createSolid(layer);\r\n        case 3:\r\n            return this.createNull(layer);\r\n        case 4:\r\n            return this.createShape(layer);\r\n        case 5:\r\n            return this.createText(layer);\r\n        case 13:\r\n            return this.createCamera(layer);\r\n    }\r\n    return this.createNull(layer);\r\n};\r\n\r\nBaseRenderer.prototype.createCamera = function(){\r\n    throw new Error('You\\'re using a 3d camera. Try the html renderer.');\r\n};\r\n\r\nBaseRenderer.prototype.buildAllItems = function(){\r\n    var i, len = this.layers.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.buildItem(i);\r\n    }\r\n    this.checkPendingElements();\r\n};\r\n\r\nBaseRenderer.prototype.includeLayers = function(newLayers){\r\n    this.completeLayers = false;\r\n    var i, len = newLayers.length;\r\n    var j, jLen = this.layers.length;\r\n    for(i=0;i<len;i+=1){\r\n        j = 0;\r\n        while(j<jLen){\r\n            if(this.layers[j].id == newLayers[i].id){\r\n                this.layers[j] = newLayers[i];\r\n                break;\r\n            }\r\n            j += 1;\r\n        }\r\n    }\r\n};\r\n\r\nBaseRenderer.prototype.setProjectInterface = function(pInterface){\r\n    this.globalData.projectInterface = pInterface;\r\n};\r\n\r\nBaseRenderer.prototype.initItems = function(){\r\n    if(!this.globalData.progressiveLoad){\r\n        this.buildAllItems();\r\n    }\r\n};\r\nBaseRenderer.prototype.buildElementParenting = function(element, parentName, hierarchy) {\r\n    var elements = this.elements;\r\n    var layers = this.layers;\r\n    var i=0, len = layers.length;\r\n    while (i < len) {\r\n        if (layers[i].ind == parentName) {\r\n            if (!elements[i] || elements[i] === true) {\r\n                this.buildItem(i);\r\n                this.addPendingElement(element);\r\n            } else {\r\n                hierarchy.push(elements[i]);\r\n                elements[i].setAsParent();\r\n                if(layers[i].parent !== undefined) {\r\n                    this.buildElementParenting(element, layers[i].parent, hierarchy);\r\n                } else {\r\n                    element.setHierarchy(hierarchy);\r\n                }\r\n            }\r\n        }\r\n        i += 1;\r\n    }\r\n};\r\n\r\nBaseRenderer.prototype.addPendingElement = function(element){\r\n    this.pendingElements.push(element);\r\n};\r\n\r\nBaseRenderer.prototype.searchExtraCompositions = function(assets){\r\n    var i, len = assets.length;\r\n    for(i=0;i<len;i+=1){\r\n        if(assets[i].xt){\r\n            var comp = this.createComp(assets[i]);\r\n            comp.initExpressions();\r\n            this.globalData.projectInterface.registerComposition(comp);\r\n        }\r\n    }\r\n};\r\n\r\nBaseRenderer.prototype.setupGlobalData = function(animData, fontsContainer) {\r\n    this.globalData.fontManager = new FontManager();\r\n    this.globalData.fontManager.addChars(animData.chars);\r\n    this.globalData.fontManager.addFonts(animData.fonts, fontsContainer);\r\n    this.globalData.getAssetData = this.animationItem.getAssetData.bind(this.animationItem);\r\n    this.globalData.getAssetsPath = this.animationItem.getAssetsPath.bind(this.animationItem);\r\n    this.globalData.imageLoader = this.animationItem.imagePreloader;\r\n    this.globalData.frameId = 0;\r\n    this.globalData.frameRate = animData.fr;\r\n    this.globalData.nm = animData.nm;\r\n    this.globalData.compSize = {\r\n        w: animData.w,\r\n        h: animData.h\r\n    }\r\n}\r\nfunction SVGRenderer(animationItem, config){\r\n    this.animationItem = animationItem;\r\n    this.layers = null;\r\n    this.renderedFrame = -1;\r\n    this.svgElement = createNS('svg');\r\n    var ariaLabel = '';\r\n    if (config && config.title) {\r\n        var titleElement = createNS('title');\r\n        var titleId = createElementID();\r\n        titleElement.setAttribute('id', titleId);\r\n        titleElement.textContent = config.title;\r\n        this.svgElement.appendChild(titleElement);\r\n        ariaLabel += titleId;\r\n    }\r\n    if (config && config.description) {\r\n        var descElement = createNS('desc');\r\n        var descId = createElementID();\r\n        descElement.setAttribute('id', descId);\r\n        descElement.textContent = config.description;\r\n        this.svgElement.appendChild(descElement);\r\n        ariaLabel += ' ' + descId;\r\n    }\r\n    if (ariaLabel) {\r\n        this.svgElement.setAttribute('aria-labelledby', ariaLabel)\r\n    }\r\n    var defs = createNS( 'defs');\r\n    this.svgElement.appendChild(defs);\r\n    var maskElement = createNS('g');\r\n    this.svgElement.appendChild(maskElement);\r\n    this.layerElement = maskElement;\r\n    this.renderConfig = {\r\n        preserveAspectRatio: (config && config.preserveAspectRatio) || 'xMidYMid meet',\r\n        imagePreserveAspectRatio: (config && config.imagePreserveAspectRatio) || 'xMidYMid slice',\r\n        progressiveLoad: (config && config.progressiveLoad) || false,\r\n        hideOnTransparent: (config && config.hideOnTransparent === false) ? false : true,\r\n        viewBoxOnly: (config && config.viewBoxOnly) || false,\r\n        viewBoxSize: (config && config.viewBoxSize) || false,\r\n        className: (config && config.className) || '',\r\n        focusable: config && config.focusable\r\n    };\r\n\r\n    this.globalData = {\r\n        _mdf: false,\r\n        frameNum: -1,\r\n        defs: defs,\r\n        renderConfig: this.renderConfig\r\n    };\r\n    this.elements = [];\r\n    this.pendingElements = [];\r\n    this.destroyed = false;\r\n    this.rendererType = 'svg';\r\n\r\n}\r\n\r\nextendPrototype([BaseRenderer],SVGRenderer);\r\n\r\nSVGRenderer.prototype.createNull = function (data) {\r\n    return new NullElement(data,this.globalData,this);\r\n};\r\n\r\nSVGRenderer.prototype.createShape = function (data) {\r\n    return new SVGShapeElement(data,this.globalData,this);\r\n};\r\n\r\nSVGRenderer.prototype.createText = function (data) {\r\n    return new SVGTextElement(data,this.globalData,this);\r\n\r\n};\r\n\r\nSVGRenderer.prototype.createImage = function (data) {\r\n    return new IImageElement(data,this.globalData,this);\r\n};\r\n\r\nSVGRenderer.prototype.createComp = function (data) {\r\n    return new SVGCompElement(data,this.globalData,this);\r\n\r\n};\r\n\r\nSVGRenderer.prototype.createSolid = function (data) {\r\n    return new ISolidElement(data,this.globalData,this);\r\n};\r\n\r\nSVGRenderer.prototype.configAnimation = function(animData){\r\n    this.svgElement.setAttribute('xmlns','http://www.w3.org/2000/svg');\r\n    if(this.renderConfig.viewBoxSize) {\r\n        this.svgElement.setAttribute('viewBox',this.renderConfig.viewBoxSize);\r\n    } else {\r\n        this.svgElement.setAttribute('viewBox','0 0 '+animData.w+' '+animData.h);\r\n    }\r\n\r\n    if(!this.renderConfig.viewBoxOnly) {\r\n        this.svgElement.setAttribute('width',animData.w);\r\n        this.svgElement.setAttribute('height',animData.h);\r\n        this.svgElement.style.width = '100%';\r\n        this.svgElement.style.height = '100%';\r\n        this.svgElement.style.transform = 'translate3d(0,0,0)';\r\n    }\r\n    if(this.renderConfig.className) {\r\n        this.svgElement.setAttribute('class', this.renderConfig.className);\r\n    }\r\n    if(this.renderConfig.focusable !== undefined) {\r\n        this.svgElement.setAttribute('focusable', this.renderConfig.focusable);\r\n    }\r\n    this.svgElement.setAttribute('preserveAspectRatio',this.renderConfig.preserveAspectRatio);\r\n    //this.layerElement.style.transform = 'translate3d(0,0,0)';\r\n    //this.layerElement.style.transformOrigin = this.layerElement.style.mozTransformOrigin = this.layerElement.style.webkitTransformOrigin = this.layerElement.style['-webkit-transform'] = \"0px 0px 0px\";\r\n    this.animationItem.wrapper.appendChild(this.svgElement);\r\n    //Mask animation\r\n    var defs = this.globalData.defs;\r\n\r\n    this.setupGlobalData(animData, defs);\r\n    this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\r\n    this.data = animData;\r\n\r\n    var maskElement = createNS( 'clipPath');\r\n    var rect = createNS('rect');\r\n    rect.setAttribute('width',animData.w);\r\n    rect.setAttribute('height',animData.h);\r\n    rect.setAttribute('x',0);\r\n    rect.setAttribute('y',0);\r\n    var maskId = createElementID();\r\n    maskElement.setAttribute('id', maskId);\r\n    maskElement.appendChild(rect);\r\n    this.layerElement.setAttribute(\"clip-path\", \"url(\" + locationHref + \"#\"+maskId+\")\");\r\n\r\n    defs.appendChild(maskElement);\r\n    this.layers = animData.layers;\r\n    this.elements = createSizedArray(animData.layers.length);\r\n};\r\n\r\n\r\nSVGRenderer.prototype.destroy = function () {\r\n    this.animationItem.wrapper.innerHTML = '';\r\n    this.layerElement = null;\r\n    this.globalData.defs = null;\r\n    var i, len = this.layers ? this.layers.length : 0;\r\n    for (i = 0; i < len; i++) {\r\n        if(this.elements[i]){\r\n            this.elements[i].destroy();\r\n        }\r\n    }\r\n    this.elements.length = 0;\r\n    this.destroyed = true;\r\n    this.animationItem = null;\r\n};\r\n\r\nSVGRenderer.prototype.updateContainerSize = function () {\r\n};\r\n\r\nSVGRenderer.prototype.buildItem  = function(pos){\r\n    var elements = this.elements;\r\n    if(elements[pos] || this.layers[pos].ty == 99){\r\n        return;\r\n    }\r\n    elements[pos] = true;\r\n    var element = this.createItem(this.layers[pos]);\r\n\r\n    elements[pos] = element;\r\n    if(expressionsPlugin){\r\n        if(this.layers[pos].ty === 0){\r\n            this.globalData.projectInterface.registerComposition(element);\r\n        }\r\n        element.initExpressions();\r\n    }\r\n    this.appendElementInPos(element,pos);\r\n    if(this.layers[pos].tt){\r\n        if(!this.elements[pos - 1] || this.elements[pos - 1] === true){\r\n            this.buildItem(pos - 1);\r\n            this.addPendingElement(element);\r\n        } else {\r\n            element.setMatte(elements[pos - 1].layerId);\r\n        }\r\n    }\r\n};\r\n\r\nSVGRenderer.prototype.checkPendingElements  = function(){\r\n    while(this.pendingElements.length){\r\n        var element = this.pendingElements.pop();\r\n        element.checkParenting();\r\n        if(element.data.tt){\r\n            var i = 0, len = this.elements.length;\r\n            while(i<len){\r\n                if(this.elements[i] === element){\r\n                    element.setMatte(this.elements[i - 1].layerId);\r\n                    break;\r\n                }\r\n                i += 1;\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nSVGRenderer.prototype.renderFrame = function(num){\r\n    if(this.renderedFrame === num || this.destroyed){\r\n        return;\r\n    }\r\n    if(num === null){\r\n        num = this.renderedFrame;\r\n    }else{\r\n        this.renderedFrame = num;\r\n    }\r\n    // console.log('-------');\r\n    // console.log('FRAME ',num);\r\n    this.globalData.frameNum = num;\r\n    this.globalData.frameId += 1;\r\n    this.globalData.projectInterface.currentFrame = num;\r\n    this.globalData._mdf = false;\r\n    var i, len = this.layers.length;\r\n    if(!this.completeLayers){\r\n        this.checkLayers(num);\r\n    }\r\n    for (i = len - 1; i >= 0; i--) {\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].prepareFrame(num - this.layers[i].st);\r\n        }\r\n    }\r\n    if(this.globalData._mdf) {\r\n        for (i = 0; i < len; i += 1) {\r\n            if(this.completeLayers || this.elements[i]){\r\n                this.elements[i].renderFrame();\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nSVGRenderer.prototype.appendElementInPos = function(element, pos){\r\n    var newElement = element.getBaseElement();\r\n    if(!newElement){\r\n        return;\r\n    }\r\n    var i = 0;\r\n    var nextElement;\r\n    while(i<pos){\r\n        if(this.elements[i] && this.elements[i]!== true && this.elements[i].getBaseElement()){\r\n            nextElement = this.elements[i].getBaseElement();\r\n        }\r\n        i += 1;\r\n    }\r\n    if(nextElement){\r\n        this.layerElement.insertBefore(newElement, nextElement);\r\n    } else {\r\n        this.layerElement.appendChild(newElement);\r\n    }\r\n};\r\n\r\nSVGRenderer.prototype.hide = function(){\r\n    this.layerElement.style.display = 'none';\r\n};\r\n\r\nSVGRenderer.prototype.show = function(){\r\n    this.layerElement.style.display = 'block';\r\n};\r\n\r\nfunction MaskElement(data,element,globalData) {\r\n    this.data = data;\r\n    this.element = element;\r\n    this.globalData = globalData;\r\n    this.storedData = [];\r\n    this.masksProperties = this.data.masksProperties || [];\r\n    this.maskElement = null;\r\n    var defs = this.globalData.defs;\r\n    var i, len = this.masksProperties ? this.masksProperties.length : 0;\r\n    this.viewData = createSizedArray(len);\r\n    this.solidPath = '';\r\n\r\n\r\n    var path, properties = this.masksProperties;\r\n    var count = 0;\r\n    var currentMasks = [];\r\n    var j, jLen;\r\n    var layerId = createElementID();\r\n    var rect, expansor, feMorph,x;\r\n    var maskType = 'clipPath', maskRef = 'clip-path';\r\n    for (i = 0; i < len; i++) {\r\n        if((properties[i].mode !== 'a' && properties[i].mode !== 'n')|| properties[i].inv || properties[i].o.k !== 100 || properties[i].o.x){\r\n            maskType = 'mask';\r\n            maskRef = 'mask';\r\n        }\r\n\r\n        if((properties[i].mode == 's' || properties[i].mode == 'i') && count === 0){\r\n            rect = createNS( 'rect');\r\n            rect.setAttribute('fill', '#ffffff');\r\n            rect.setAttribute('width', this.element.comp.data.w || 0);\r\n            rect.setAttribute('height', this.element.comp.data.h || 0);\r\n            currentMasks.push(rect);\r\n        } else {\r\n            rect = null;\r\n        }\r\n\r\n        path = createNS( 'path');\r\n        if(properties[i].mode == 'n') {\r\n            // TODO move this to a factory or to a constructor\r\n            this.viewData[i] = {\r\n                op: PropertyFactory.getProp(this.element,properties[i].o,0,0.01,this.element),\r\n                prop: ShapePropertyFactory.getShapeProp(this.element,properties[i],3),\r\n                elem: path,\r\n                lastPath: ''\r\n            };\r\n            defs.appendChild(path);\r\n            continue;\r\n        }\r\n        count += 1;\r\n\r\n        path.setAttribute('fill', properties[i].mode === 's' ? '#000000':'#ffffff');\r\n        path.setAttribute('clip-rule','nonzero');\r\n        var filterID;\r\n\r\n        if (properties[i].x.k !== 0) {\r\n            maskType = 'mask';\r\n            maskRef = 'mask';\r\n            x = PropertyFactory.getProp(this.element,properties[i].x,0,null,this.element);\r\n            filterID = createElementID();\r\n            expansor = createNS('filter');\r\n            expansor.setAttribute('id',filterID);\r\n            feMorph = createNS('feMorphology');\r\n            feMorph.setAttribute('operator','erode');\r\n            feMorph.setAttribute('in','SourceGraphic');\r\n            feMorph.setAttribute('radius','0');\r\n            expansor.appendChild(feMorph);\r\n            defs.appendChild(expansor);\r\n            path.setAttribute('stroke', properties[i].mode === 's' ? '#000000':'#ffffff');\r\n        } else {\r\n            feMorph = null;\r\n            x = null;\r\n        }\r\n\r\n        // TODO move this to a factory or to a constructor\r\n        this.storedData[i] = {\r\n             elem: path,\r\n             x: x,\r\n             expan: feMorph,\r\n            lastPath: '',\r\n            lastOperator:'',\r\n            filterId:filterID,\r\n            lastRadius:0\r\n        };\r\n        if(properties[i].mode == 'i'){\r\n            jLen = currentMasks.length;\r\n            var g = createNS('g');\r\n            for(j=0;j<jLen;j+=1){\r\n                g.appendChild(currentMasks[j]);\r\n            }\r\n            var mask = createNS('mask');\r\n            mask.setAttribute('mask-type','alpha');\r\n            mask.setAttribute('id',layerId+'_'+count);\r\n            mask.appendChild(path);\r\n            defs.appendChild(mask);\r\n            g.setAttribute('mask','url(' + locationHref + '#'+layerId+'_'+count+')');\r\n\r\n            currentMasks.length = 0;\r\n            currentMasks.push(g);\r\n        }else{\r\n            currentMasks.push(path);\r\n        }\r\n        if(properties[i].inv && !this.solidPath){\r\n            this.solidPath = this.createLayerSolidPath();\r\n        }\r\n        // TODO move this to a factory or to a constructor\r\n        this.viewData[i] = {\r\n            elem: path,\r\n            lastPath: '',\r\n            op: PropertyFactory.getProp(this.element,properties[i].o,0,0.01,this.element),\r\n            prop:ShapePropertyFactory.getShapeProp(this.element,properties[i],3),\r\n            invRect: rect\r\n        };\r\n        if(!this.viewData[i].prop.k){\r\n            this.drawPath(properties[i],this.viewData[i].prop.v,this.viewData[i]);\r\n        }\r\n    }\r\n\r\n    this.maskElement = createNS( maskType);\r\n\r\n    len = currentMasks.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.maskElement.appendChild(currentMasks[i]);\r\n    }\r\n\r\n    if(count > 0){\r\n        this.maskElement.setAttribute('id', layerId);\r\n        this.element.maskedElement.setAttribute(maskRef, \"url(\" + locationHref + \"#\" + layerId + \")\");\r\n        defs.appendChild(this.maskElement);\r\n    }\r\n    if (this.viewData.length) {\r\n        this.element.addRenderableComponent(this);\r\n    }\r\n\r\n}\r\n\r\nMaskElement.prototype.getMaskProperty = function(pos){\r\n    return this.viewData[pos].prop;\r\n};\r\n\r\nMaskElement.prototype.renderFrame = function (isFirstFrame) {\r\n    var finalMat = this.element.finalTransform.mat;\r\n    var i, len = this.masksProperties.length;\r\n    for (i = 0; i < len; i++) {\r\n        if(this.viewData[i].prop._mdf || isFirstFrame){\r\n            this.drawPath(this.masksProperties[i],this.viewData[i].prop.v,this.viewData[i]);\r\n        }\r\n        if(this.viewData[i].op._mdf || isFirstFrame){\r\n            this.viewData[i].elem.setAttribute('fill-opacity',this.viewData[i].op.v);\r\n        }\r\n        if(this.masksProperties[i].mode !== 'n'){\r\n            if(this.viewData[i].invRect && (this.element.finalTransform.mProp._mdf || isFirstFrame)){\r\n                this.viewData[i].invRect.setAttribute('x', -finalMat.props[12]);\r\n                this.viewData[i].invRect.setAttribute('y', -finalMat.props[13]);\r\n            }\r\n            if(this.storedData[i].x && (this.storedData[i].x._mdf || isFirstFrame)){\r\n                var feMorph = this.storedData[i].expan;\r\n                if(this.storedData[i].x.v < 0){\r\n                    if(this.storedData[i].lastOperator !== 'erode'){\r\n                        this.storedData[i].lastOperator = 'erode';\r\n                        this.storedData[i].elem.setAttribute('filter','url(' + locationHref + '#'+this.storedData[i].filterId+')');\r\n                    }\r\n                    feMorph.setAttribute('radius',-this.storedData[i].x.v);\r\n                }else{\r\n                    if(this.storedData[i].lastOperator !== 'dilate'){\r\n                        this.storedData[i].lastOperator = 'dilate';\r\n                        this.storedData[i].elem.setAttribute('filter',null);\r\n                    }\r\n                    this.storedData[i].elem.setAttribute('stroke-width', this.storedData[i].x.v*2);\r\n\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nMaskElement.prototype.getMaskelement = function () {\r\n    return this.maskElement;\r\n};\r\n\r\nMaskElement.prototype.createLayerSolidPath = function(){\r\n    var path = 'M0,0 ';\r\n    path += ' h' + this.globalData.compSize.w ;\r\n    path += ' v' + this.globalData.compSize.h ;\r\n    path += ' h-' + this.globalData.compSize.w ;\r\n    path += ' v-' + this.globalData.compSize.h + ' ';\r\n    return path;\r\n};\r\n\r\nMaskElement.prototype.drawPath = function(pathData,pathNodes,viewData){\r\n    var pathString = \" M\"+pathNodes.v[0][0]+','+pathNodes.v[0][1];\r\n    var i, len;\r\n    len = pathNodes._length;\r\n    for(i=1;i<len;i+=1){\r\n        //pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[i][0]+','+pathNodes.i[i][1] + \" \"+pathNodes.v[i][0]+','+pathNodes.v[i][1];\r\n        pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[i][0]+','+pathNodes.i[i][1] + \" \"+pathNodes.v[i][0]+','+pathNodes.v[i][1];\r\n    }\r\n        //pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[0][0]+','+pathNodes.i[0][1] + \" \"+pathNodes.v[0][0]+','+pathNodes.v[0][1];\r\n    if(pathNodes.c && len > 1){\r\n        pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[0][0]+','+pathNodes.i[0][1] + \" \"+pathNodes.v[0][0]+','+pathNodes.v[0][1];\r\n    }\r\n    //pathNodes.__renderedString = pathString;\r\n\r\n    if(viewData.lastPath !== pathString){\r\n        var pathShapeValue = '';\r\n        if(viewData.elem){\r\n            if(pathNodes.c){\r\n                pathShapeValue = pathData.inv ? this.solidPath + pathString : pathString;\r\n            }\r\n            viewData.elem.setAttribute('d',pathShapeValue);\r\n        }\r\n        viewData.lastPath = pathString;\r\n    }\r\n};\r\n\r\nMaskElement.prototype.destroy = function(){\r\n    this.element = null;\r\n    this.globalData = null;\r\n    this.maskElement = null;\r\n    this.data = null;\r\n    this.masksProperties = null;\r\n};\r\n\r\n/**\r\n * @file \r\n * Handles AE's layer parenting property.\r\n *\r\n */\r\n\r\nfunction HierarchyElement(){}\r\n\r\nHierarchyElement.prototype = {\r\n\t/**\r\n     * @function \r\n     * Initializes hierarchy properties\r\n     *\r\n     */\r\n\tinitHierarchy: function() {\r\n\t\t//element's parent list\r\n\t    this.hierarchy = [];\r\n\t    //if element is parent of another layer _isParent will be true\r\n\t    this._isParent = false;\r\n\t    this.checkParenting();\r\n\t},\r\n\t/**\r\n     * @function \r\n     * Sets layer's hierarchy.\r\n     * @param {array} hierarch\r\n     * layer's parent list\r\n     *\r\n     */ \r\n\tsetHierarchy: function(hierarchy){\r\n\t    this.hierarchy = hierarchy;\r\n\t},\r\n\t/**\r\n     * @function \r\n     * Sets layer as parent.\r\n     *\r\n     */ \r\n\tsetAsParent: function() {\r\n\t    this._isParent = true;\r\n\t},\r\n\t/**\r\n     * @function \r\n     * Searches layer's parenting chain\r\n     *\r\n     */ \r\n\tcheckParenting: function(){\r\n\t    if (this.data.parent !== undefined){\r\n\t        this.comp.buildElementParenting(this, this.data.parent, []);\r\n\t    }\r\n\t}\r\n};\r\n/**\r\n * @file \r\n * Handles element's layer frame update.\r\n * Checks layer in point and out point\r\n *\r\n */\r\n\r\nfunction FrameElement(){}\r\n\r\nFrameElement.prototype = {\r\n    /**\r\n     * @function \r\n     * Initializes frame related properties.\r\n     *\r\n     */\r\n    initFrame: function(){\r\n        //set to true when inpoint is rendered\r\n        this._isFirstFrame = false;\r\n        //list of animated properties\r\n        this.dynamicProperties = [];\r\n        // If layer has been modified in current tick this will be true\r\n        this._mdf = false;\r\n    },\r\n    /**\r\n     * @function \r\n     * Calculates all dynamic values\r\n     *\r\n     * @param {number} num\r\n     * current frame number in Layer's time\r\n     * @param {boolean} isVisible\r\n     * if layers is currently in range\r\n     * \r\n     */\r\n    prepareProperties: function(num, isVisible) {\r\n        var i, len = this.dynamicProperties.length;\r\n        for (i = 0;i < len; i += 1) {\r\n            if (isVisible || (this._isParent && this.dynamicProperties[i].propType === 'transform')) {\r\n                this.dynamicProperties[i].getValue();\r\n                if (this.dynamicProperties[i]._mdf) {\r\n                    this.globalData._mdf = true;\r\n                    this._mdf = true;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    addDynamicProperty: function(prop) {\r\n        if(this.dynamicProperties.indexOf(prop) === -1) {\r\n            this.dynamicProperties.push(prop);\r\n        }\r\n    }\r\n};\r\nfunction TransformElement(){}\r\n\r\nTransformElement.prototype = {\r\n    initTransform: function() {\r\n        this.finalTransform = {\r\n            mProp: this.data.ks ? TransformPropertyFactory.getTransformProperty(this, this.data.ks, this) : {o:0},\r\n            _matMdf: false,\r\n            _opMdf: false,\r\n            mat: new Matrix()\r\n        };\r\n        if (this.data.ao) {\r\n            this.finalTransform.mProp.autoOriented = true;\r\n        }\r\n\r\n        //TODO: check TYPE 11: Guided elements\r\n        if (this.data.ty !== 11) {\r\n            //this.createElements();\r\n        }\r\n    },\r\n    renderTransform: function() {\r\n\r\n        this.finalTransform._opMdf = this.finalTransform.mProp.o._mdf || this._isFirstFrame;\r\n        this.finalTransform._matMdf = this.finalTransform.mProp._mdf || this._isFirstFrame;\r\n\r\n        if (this.hierarchy) {\r\n            var mat;\r\n            var finalMat = this.finalTransform.mat;\r\n            var i = 0, len = this.hierarchy.length;\r\n            //Checking if any of the transformation matrices in the hierarchy chain has changed.\r\n            if (!this.finalTransform._matMdf) {\r\n                while (i < len) {\r\n                    if (this.hierarchy[i].finalTransform.mProp._mdf) {\r\n                        this.finalTransform._matMdf = true;\r\n                        break;\r\n                    }\r\n                    i += 1;\r\n                }\r\n            }\r\n            \r\n            if (this.finalTransform._matMdf) {\r\n                mat = this.finalTransform.mProp.v.props;\r\n                finalMat.cloneFromProps(mat);\r\n                for (i = 0; i < len; i += 1) {\r\n                    mat = this.hierarchy[i].finalTransform.mProp.v.props;\r\n                    finalMat.transform(mat[0], mat[1], mat[2], mat[3], mat[4], mat[5], mat[6], mat[7], mat[8], mat[9], mat[10], mat[11], mat[12], mat[13], mat[14], mat[15]);\r\n                }\r\n            }\r\n        }\r\n    },\r\n    globalToLocal: function(pt) {\r\n        var transforms = [];\r\n        transforms.push(this.finalTransform);\r\n        var flag = true;\r\n        var comp = this.comp;\r\n        while (flag) {\r\n            if (comp.finalTransform) {\r\n                if (comp.data.hasMask) {\r\n                    transforms.splice(0, 0, comp.finalTransform);\r\n                }\r\n                comp = comp.comp;\r\n            } else {\r\n                flag = false;\r\n            }\r\n        }\r\n        var i, len = transforms.length,ptNew;\r\n        for (i = 0; i < len; i += 1) {\r\n            ptNew = transforms[i].mat.applyToPointArray(0, 0, 0);\r\n            //ptNew = transforms[i].mat.applyToPointArray(pt[0],pt[1],pt[2]);\r\n            pt = [pt[0] - ptNew[0], pt[1] - ptNew[1], 0];\r\n        }\r\n        return pt;\r\n    },\r\n    mHelper: new Matrix()\r\n};\r\nfunction RenderableElement(){\r\n\r\n}\r\n\r\nRenderableElement.prototype = {\r\n    initRenderable: function() {\r\n        //layer's visibility related to inpoint and outpoint. Rename isVisible to isInRange\r\n        this.isInRange = false;\r\n        //layer's display state\r\n        this.hidden = false;\r\n        // If layer's transparency equals 0, it can be hidden\r\n        this.isTransparent = false;\r\n        //list of animated components\r\n        this.renderableComponents = [];\r\n    },\r\n    addRenderableComponent: function(component) {\r\n        if(this.renderableComponents.indexOf(component) === -1) {\r\n            this.renderableComponents.push(component);\r\n        }\r\n    },\r\n    removeRenderableComponent: function(component) {\r\n        if(this.renderableComponents.indexOf(component) !== -1) {\r\n            this.renderableComponents.splice(this.renderableComponents.indexOf(component), 1);\r\n        }\r\n    },\r\n    prepareRenderableFrame: function(num) {\r\n        this.checkLayerLimits(num);\r\n    },\r\n    checkTransparency: function(){\r\n        if(this.finalTransform.mProp.o.v <= 0) {\r\n            if(!this.isTransparent && this.globalData.renderConfig.hideOnTransparent){\r\n                this.isTransparent = true;\r\n                this.hide();\r\n            }\r\n        } else if(this.isTransparent) {\r\n            this.isTransparent = false;\r\n            this.show();\r\n        }\r\n    },\r\n    /**\r\n     * @function \r\n     * Initializes frame related properties.\r\n     *\r\n     * @param {number} num\r\n     * current frame number in Layer's time\r\n     * \r\n     */\r\n    checkLayerLimits: function(num) {\r\n        if(this.data.ip - this.data.st <= num && this.data.op - this.data.st > num)\r\n        {\r\n            if(this.isInRange !== true){\r\n                this.globalData._mdf = true;\r\n                this._mdf = true;\r\n                this.isInRange = true;\r\n                this.show();\r\n            }\r\n        } else {\r\n            if(this.isInRange !== false){\r\n                this.globalData._mdf = true;\r\n                this.isInRange = false;\r\n                this.hide();\r\n            }\r\n        }\r\n    },\r\n    renderRenderable: function() {\r\n        var i, len = this.renderableComponents.length;\r\n        for(i = 0; i < len; i += 1) {\r\n            this.renderableComponents[i].renderFrame(this._isFirstFrame);\r\n        }\r\n        /*this.maskManager.renderFrame(this.finalTransform.mat);\r\n        this.renderableEffectsManager.renderFrame(this._isFirstFrame);*/\r\n    },\r\n    sourceRectAtTime: function(){\r\n        return {\r\n            top:0,\r\n            left:0,\r\n            width:100,\r\n            height:100\r\n        };\r\n    },\r\n    getLayerSize: function(){\r\n        if(this.data.ty === 5){\r\n            return {w:this.data.textData.width,h:this.data.textData.height};\r\n        }else{\r\n            return {w:this.data.width,h:this.data.height};\r\n        }\r\n    }\r\n};\r\nfunction RenderableDOMElement() {}\r\n\r\n(function(){\r\n    var _prototype = {\r\n        initElement: function(data,globalData,comp) {\r\n            this.initFrame();\r\n            this.initBaseData(data, globalData, comp);\r\n            this.initTransform(data, globalData, comp);\r\n            this.initHierarchy();\r\n            this.initRenderable();\r\n            this.initRendererElement();\r\n            this.createContainerElements();\r\n            this.createRenderableComponents();\r\n            this.createContent();\r\n            this.hide();\r\n        },\r\n        hide: function(){\r\n            if (!this.hidden && (!this.isInRange || this.isTransparent)) {\r\n                var elem = this.baseElement || this.layerElement;\r\n                elem.style.display = 'none';\r\n                this.hidden = true;\r\n            }\r\n        },\r\n        show: function(){\r\n            if (this.isInRange && !this.isTransparent){\r\n                if (!this.data.hd) {\r\n                    var elem = this.baseElement || this.layerElement;\r\n                    elem.style.display = 'block';\r\n                }\r\n                this.hidden = false;\r\n                this._isFirstFrame = true;\r\n            }\r\n        },\r\n        renderFrame: function() {\r\n            //If it is exported as hidden (data.hd === true) no need to render\r\n            //If it is not visible no need to render\r\n            if (this.data.hd || this.hidden) {\r\n                return;\r\n            }\r\n            this.renderTransform();\r\n            this.renderRenderable();\r\n            this.renderElement();\r\n            this.renderInnerContent();\r\n            if (this._isFirstFrame) {\r\n                this._isFirstFrame = false;\r\n            }\r\n        },\r\n        renderInnerContent: function() {},\r\n        prepareFrame: function(num) {\r\n            this._mdf = false;\r\n            this.prepareRenderableFrame(num);\r\n            this.prepareProperties(num, this.isInRange);\r\n            this.checkTransparency();\r\n        },\r\n        destroy: function(){\r\n            this.innerElem =  null;\r\n            this.destroyBaseElement();\r\n        }\r\n    };\r\n    extendPrototype([RenderableElement, createProxyFunction(_prototype)], RenderableDOMElement);\r\n}());\r\nfunction ProcessedElement(element, position) {\r\n\tthis.elem = element;\r\n\tthis.pos = position;\r\n}\r\nfunction SVGStyleData(data, level) {\r\n\tthis.data = data;\r\n\tthis.type = data.ty;\r\n\tthis.d = '';\r\n\tthis.lvl = level;\r\n\tthis._mdf = false;\r\n\tthis.closed = data.hd === true;\r\n\tthis.pElem = createNS('path');\r\n\tthis.msElem = null;\r\n}\r\n\r\nSVGStyleData.prototype.reset = function() {\r\n\tthis.d = '';\r\n\tthis._mdf = false;\r\n};\r\nfunction SVGShapeData(transformers, level, shape) {\r\n    this.caches = [];\r\n    this.styles = [];\r\n    this.transformers = transformers;\r\n    this.lStr = '';\r\n    this.sh = shape;\r\n    this.lvl = level;\r\n    //TODO find if there are some cases where _isAnimated can be false. \r\n    // For now, since shapes add up with other shapes. They have to be calculated every time.\r\n    // One way of finding out is checking if all styles associated to this shape depend only of this shape\r\n    this._isAnimated = !!shape.k;\r\n    // TODO: commenting this for now since all shapes are animated\r\n    var i = 0, len = transformers.length;\r\n    while(i < len) {\r\n    \tif(transformers[i].mProps.dynamicProperties.length) {\r\n    \t\tthis._isAnimated = true;\r\n    \t\tbreak;\r\n    \t}\r\n    \ti += 1;\r\n    }\r\n}\r\n\r\nSVGShapeData.prototype.setAsAnimated = function() {\r\n    this._isAnimated = true;\r\n}\r\nfunction SVGTransformData(mProps, op, container) {\r\n\tthis.transform = {\r\n\t\tmProps: mProps,\r\n\t\top: op,\r\n\t\tcontainer: container\r\n\t};\r\n\tthis.elements = [];\r\n    this._isAnimated = this.transform.mProps.dynamicProperties.length || this.transform.op.effectsSequence.length;\r\n}\r\nfunction SVGStrokeStyleData(elem, data, styleOb){\r\n\tthis.initDynamicPropertyContainer(elem);\r\n\tthis.getValue = this.iterateDynamicProperties;\r\n\tthis.o = PropertyFactory.getProp(elem,data.o,0,0.01,this);\r\n\tthis.w = PropertyFactory.getProp(elem,data.w,0,null,this);\r\n\tthis.d = new DashProperty(elem,data.d||{},'svg',this);\r\n\tthis.c = PropertyFactory.getProp(elem,data.c,1,255,this);\r\n\tthis.style = styleOb;\r\n    this._isAnimated = !!this._isAnimated;\r\n}\r\n\r\nextendPrototype([DynamicPropertyContainer], SVGStrokeStyleData);\r\nfunction SVGFillStyleData(elem, data, styleOb){\r\n\tthis.initDynamicPropertyContainer(elem);\r\n\tthis.getValue = this.iterateDynamicProperties;\r\n\tthis.o = PropertyFactory.getProp(elem,data.o,0,0.01,this);\r\n\tthis.c = PropertyFactory.getProp(elem,data.c,1,255,this);\r\n\tthis.style = styleOb;\r\n}\r\n\r\nextendPrototype([DynamicPropertyContainer], SVGFillStyleData);\r\nfunction SVGGradientFillStyleData(elem, data, styleOb){\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.getValue = this.iterateDynamicProperties;\r\n    this.initGradientData(elem, data, styleOb);\r\n}\r\n\r\nSVGGradientFillStyleData.prototype.initGradientData = function(elem, data, styleOb){\r\n    this.o = PropertyFactory.getProp(elem,data.o,0,0.01,this);\r\n    this.s = PropertyFactory.getProp(elem,data.s,1,null,this);\r\n    this.e = PropertyFactory.getProp(elem,data.e,1,null,this);\r\n    this.h = PropertyFactory.getProp(elem,data.h||{k:0},0,0.01,this);\r\n    this.a = PropertyFactory.getProp(elem,data.a||{k:0},0,degToRads,this);\r\n    this.g = new GradientProperty(elem,data.g,this);\r\n    this.style = styleOb;\r\n    this.stops = [];\r\n    this.setGradientData(styleOb.pElem, data);\r\n    this.setGradientOpacity(data, styleOb);\r\n    this._isAnimated = !!this._isAnimated;\r\n\r\n};\r\n\r\nSVGGradientFillStyleData.prototype.setGradientData = function(pathElement,data){\r\n\r\n    var gradientId = createElementID();\r\n    var gfill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\r\n    gfill.setAttribute('id',gradientId);\r\n    gfill.setAttribute('spreadMethod','pad');\r\n    gfill.setAttribute('gradientUnits','userSpaceOnUse');\r\n    var stops = [];\r\n    var stop, j, jLen;\r\n    jLen = data.g.p*4;\r\n    for(j=0;j<jLen;j+=4){\r\n        stop = createNS('stop');\r\n        gfill.appendChild(stop);\r\n        stops.push(stop);\r\n    }\r\n    pathElement.setAttribute( data.ty === 'gf' ? 'fill':'stroke','url(' + locationHref + '#'+gradientId+')');\r\n    \r\n    this.gf = gfill;\r\n    this.cst = stops;\r\n};\r\n\r\nSVGGradientFillStyleData.prototype.setGradientOpacity = function(data, styleOb){\r\n    if(this.g._hasOpacity && !this.g._collapsable){\r\n        var stop, j, jLen;\r\n        var mask = createNS(\"mask\");\r\n        var maskElement = createNS( 'path');\r\n        mask.appendChild(maskElement);\r\n        var opacityId = createElementID();\r\n        var maskId = createElementID();\r\n        mask.setAttribute('id',maskId);\r\n        var opFill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\r\n        opFill.setAttribute('id',opacityId);\r\n        opFill.setAttribute('spreadMethod','pad');\r\n        opFill.setAttribute('gradientUnits','userSpaceOnUse');\r\n        jLen = data.g.k.k[0].s ? data.g.k.k[0].s.length : data.g.k.k.length;\r\n        var stops = this.stops;\r\n        for(j=data.g.p*4;j<jLen;j+=2){\r\n            stop = createNS('stop');\r\n            stop.setAttribute('stop-color','rgb(255,255,255)');\r\n            opFill.appendChild(stop);\r\n            stops.push(stop);\r\n        }\r\n        maskElement.setAttribute( data.ty === 'gf' ? 'fill':'stroke','url(' + locationHref + '#'+opacityId+')');\r\n        this.of = opFill;\r\n        this.ms = mask;\r\n        this.ost = stops;\r\n        this.maskId = maskId;\r\n        styleOb.msElem = maskElement;\r\n    }\r\n};\r\n\r\nextendPrototype([DynamicPropertyContainer], SVGGradientFillStyleData);\r\nfunction SVGGradientStrokeStyleData(elem, data, styleOb){\r\n\tthis.initDynamicPropertyContainer(elem);\r\n\tthis.getValue = this.iterateDynamicProperties;\r\n\tthis.w = PropertyFactory.getProp(elem,data.w,0,null,this);\r\n\tthis.d = new DashProperty(elem,data.d||{},'svg',this);\r\n    this.initGradientData(elem, data, styleOb);\r\n    this._isAnimated = !!this._isAnimated;\r\n}\r\n\r\nextendPrototype([SVGGradientFillStyleData, DynamicPropertyContainer], SVGGradientStrokeStyleData);\r\nfunction ShapeGroupData() {\r\n\tthis.it = [];\r\n    this.prevViewData = [];\r\n    this.gr = createNS('g');\r\n}\r\nvar SVGElementsRenderer = (function() {\r\n\tvar _identityMatrix = new Matrix();\r\n\tvar _matrixHelper = new Matrix();\r\n\r\n\tvar ob = {\r\n\t\tcreateRenderFunction: createRenderFunction\r\n\t}\r\n\r\n\tfunction createRenderFunction(data) {\r\n\t    var ty = data.ty;\r\n\t    switch(data.ty) {\r\n\t        case 'fl':\r\n\t        return renderFill;\r\n\t        case 'gf':\r\n\t        return renderGradient;\r\n\t        case 'gs':\r\n\t        return renderGradientStroke;\r\n\t        case 'st':\r\n\t        return renderStroke;\r\n\t        case 'sh':\r\n\t        case 'el':\r\n\t        case 'rc':\r\n\t        case 'sr':\r\n\t        return renderPath;\r\n\t        case 'tr':\r\n\t        return renderContentTransform;\r\n\t    }\r\n\t}\r\n\r\n\tfunction renderContentTransform(styleData, itemData, isFirstFrame) {\r\n\t    if(isFirstFrame || itemData.transform.op._mdf){\r\n\t        itemData.transform.container.setAttribute('opacity',itemData.transform.op.v);\r\n\t    }\r\n\t    if(isFirstFrame || itemData.transform.mProps._mdf){\r\n\t        itemData.transform.container.setAttribute('transform',itemData.transform.mProps.v.to2dCSS());\r\n\t    }\r\n\t}\r\n\r\n\tfunction renderPath(styleData, itemData, isFirstFrame) {\r\n\t    var j, jLen,pathStringTransformed,redraw,pathNodes,l, lLen = itemData.styles.length;\r\n\t    var lvl = itemData.lvl;\r\n\t    var paths, mat, props, iterations, k;\r\n\t    for(l=0;l<lLen;l+=1){\r\n\t        redraw = itemData.sh._mdf || isFirstFrame;\r\n\t        if(itemData.styles[l].lvl < lvl){\r\n\t            mat = _matrixHelper.reset();\r\n\t            iterations = lvl - itemData.styles[l].lvl;\r\n\t            k = itemData.transformers.length-1;\r\n\t            while(!redraw && iterations > 0) {\r\n\t                redraw = itemData.transformers[k].mProps._mdf || redraw;\r\n\t                iterations --;\r\n\t                k --;\r\n\t            }\r\n\t            if(redraw) {\r\n\t                iterations = lvl - itemData.styles[l].lvl;\r\n\t                k = itemData.transformers.length-1;\r\n\t                while(iterations > 0) {\r\n\t                    props = itemData.transformers[k].mProps.v.props;\r\n\t                    mat.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15]);\r\n\t                    iterations --;\r\n\t                    k --;\r\n\t                }\r\n\t            }\r\n\t        } else {\r\n\t            mat = _identityMatrix;\r\n\t        }\r\n\t        paths = itemData.sh.paths;\r\n\t        jLen = paths._length;\r\n\t        if(redraw){\r\n\t            pathStringTransformed = '';\r\n\t            for(j=0;j<jLen;j+=1){\r\n\t                pathNodes = paths.shapes[j];\r\n\t                if(pathNodes && pathNodes._length){\r\n\t                    pathStringTransformed += buildShapeString(pathNodes, pathNodes._length, pathNodes.c, mat);\r\n\t                }\r\n\t            }\r\n\t            itemData.caches[l] = pathStringTransformed;\r\n\t        } else {\r\n\t            pathStringTransformed = itemData.caches[l];\r\n\t        }\r\n\t        itemData.styles[l].d += styleData.hd === true ? '' : pathStringTransformed;\r\n\t        itemData.styles[l]._mdf = redraw || itemData.styles[l]._mdf;\r\n\t    }\r\n\t}\r\n\r\n\tfunction renderFill (styleData,itemData, isFirstFrame){\r\n\t    var styleElem = itemData.style;\r\n\r\n\t    if(itemData.c._mdf || isFirstFrame){\r\n\t        styleElem.pElem.setAttribute('fill','rgb('+bm_floor(itemData.c.v[0])+','+bm_floor(itemData.c.v[1])+','+bm_floor(itemData.c.v[2])+')');\r\n\t    }\r\n\t    if(itemData.o._mdf || isFirstFrame){\r\n\t        styleElem.pElem.setAttribute('fill-opacity',itemData.o.v);\r\n\t    }\r\n\t};\r\n\r\n\tfunction renderGradientStroke (styleData, itemData, isFirstFrame) {\r\n\t    renderGradient(styleData, itemData, isFirstFrame);\r\n\t    renderStroke(styleData, itemData, isFirstFrame);\r\n\t}\r\n\r\n\tfunction renderGradient(styleData, itemData, isFirstFrame) {\r\n\t    var gfill = itemData.gf;\r\n\t    var hasOpacity = itemData.g._hasOpacity;\r\n\t    var pt1 = itemData.s.v, pt2 = itemData.e.v;\r\n\r\n\t    if (itemData.o._mdf || isFirstFrame) {\r\n\t        var attr = styleData.ty === 'gf' ? 'fill-opacity' : 'stroke-opacity';\r\n\t        itemData.style.pElem.setAttribute(attr, itemData.o.v);\r\n\t    }\r\n\t    if (itemData.s._mdf || isFirstFrame) {\r\n\t        var attr1 = styleData.t === 1 ? 'x1' : 'cx';\r\n\t        var attr2 = attr1 === 'x1' ? 'y1' : 'cy';\r\n\t        gfill.setAttribute(attr1, pt1[0]);\r\n\t        gfill.setAttribute(attr2, pt1[1]);\r\n\t        if (hasOpacity && !itemData.g._collapsable) {\r\n\t            itemData.of.setAttribute(attr1, pt1[0]);\r\n\t            itemData.of.setAttribute(attr2, pt1[1]);\r\n\t        }\r\n\t    }\r\n\t    var stops, i, len, stop;\r\n\t    if (itemData.g._cmdf || isFirstFrame) {\r\n\t        stops = itemData.cst;\r\n\t        var cValues = itemData.g.c;\r\n\t        len = stops.length;\r\n\t        for (i = 0; i < len; i += 1){\r\n\t            stop = stops[i];\r\n\t            stop.setAttribute('offset', cValues[i * 4] + '%');\r\n\t            stop.setAttribute('stop-color','rgb('+ cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ','+cValues[i * 4 + 3] + ')');\r\n\t        }\r\n\t    }\r\n\t    if (hasOpacity && (itemData.g._omdf || isFirstFrame)) {\r\n\t        var oValues = itemData.g.o;\r\n\t        if(itemData.g._collapsable) {\r\n\t            stops = itemData.cst;\r\n\t        } else {\r\n\t            stops = itemData.ost;\r\n\t        }\r\n\t        len = stops.length;\r\n\t        for (i = 0; i < len; i += 1) {\r\n\t            stop = stops[i];\r\n\t            if(!itemData.g._collapsable) {\r\n\t                stop.setAttribute('offset', oValues[i * 2] + '%');\r\n\t            }\r\n\t            stop.setAttribute('stop-opacity', oValues[i * 2 + 1]);\r\n\t        }\r\n\t    }\r\n\t    if (styleData.t === 1) {\r\n\t        if (itemData.e._mdf  || isFirstFrame) {\r\n\t            gfill.setAttribute('x2', pt2[0]);\r\n\t            gfill.setAttribute('y2', pt2[1]);\r\n\t            if (hasOpacity && !itemData.g._collapsable) {\r\n\t                itemData.of.setAttribute('x2', pt2[0]);\r\n\t                itemData.of.setAttribute('y2', pt2[1]);\r\n\t            }\r\n\t        }\r\n\t    } else {\r\n\t        var rad;\r\n\t        if (itemData.s._mdf || itemData.e._mdf || isFirstFrame) {\r\n\t            rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n\t            gfill.setAttribute('r', rad);\r\n\t            if(hasOpacity && !itemData.g._collapsable){\r\n\t                itemData.of.setAttribute('r', rad);\r\n\t            }\r\n\t        }\r\n\t        if (itemData.e._mdf || itemData.h._mdf || itemData.a._mdf || isFirstFrame) {\r\n\t            if (!rad) {\r\n\t                rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n\t            }\r\n\t            var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\r\n\r\n\t            var percent = itemData.h.v >= 1 ? 0.99 : itemData.h.v <= -1 ? -0.99: itemData.h.v;\r\n\t            var dist = rad * percent;\r\n\t            var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\r\n\t            var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\r\n\t            gfill.setAttribute('fx', x);\r\n\t            gfill.setAttribute('fy', y);\r\n\t            if (hasOpacity && !itemData.g._collapsable) {\r\n\t                itemData.of.setAttribute('fx', x);\r\n\t                itemData.of.setAttribute('fy', y);\r\n\t            }\r\n\t        }\r\n\t        //gfill.setAttribute('fy','200');\r\n\t    }\r\n\t};\r\n\r\n\tfunction renderStroke(styleData, itemData, isFirstFrame) {\r\n\t    var styleElem = itemData.style;\r\n\t    var d = itemData.d;\r\n\t    if (d && (d._mdf || isFirstFrame) && d.dashStr) {\r\n\t        styleElem.pElem.setAttribute('stroke-dasharray', d.dashStr);\r\n\t        styleElem.pElem.setAttribute('stroke-dashoffset', d.dashoffset[0]);\r\n\t    }\r\n\t    if(itemData.c && (itemData.c._mdf || isFirstFrame)){\r\n\t        styleElem.pElem.setAttribute('stroke','rgb(' + bm_floor(itemData.c.v[0]) + ',' + bm_floor(itemData.c.v[1]) + ',' + bm_floor(itemData.c.v[2]) + ')');\r\n\t    }\r\n\t    if(itemData.o._mdf || isFirstFrame){\r\n\t        styleElem.pElem.setAttribute('stroke-opacity', itemData.o.v);\r\n\t    }\r\n\t    if(itemData.w._mdf || isFirstFrame){\r\n\t        styleElem.pElem.setAttribute('stroke-width', itemData.w.v);\r\n\t        if(styleElem.msElem){\r\n\t            styleElem.msElem.setAttribute('stroke-width', itemData.w.v);\r\n\t        }\r\n\t    }\r\n\t};\r\n\r\n\treturn ob;\r\n}())\r\nfunction ShapeTransformManager() {\r\n\tthis.sequences = {};\r\n\tthis.sequenceList = [];\r\n    this.transform_key_count = 0;\r\n}\r\n\r\nShapeTransformManager.prototype = {\r\n\taddTransformSequence: function(transforms) {\r\n\t\tvar i, len = transforms.length;\r\n\t\tvar key = '_';\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\tkey += transforms[i].transform.key + '_';\r\n\t\t}\r\n\t\tvar sequence = this.sequences[key];\r\n\t\tif(!sequence) {\r\n\t\t\tsequence = {\r\n\t\t\t\ttransforms: [].concat(transforms),\r\n\t\t\t\tfinalTransform: new Matrix(),\r\n\t\t\t\t_mdf: false\r\n\t\t\t};\r\n\t\t\tthis.sequences[key] = sequence;\r\n\t\t\tthis.sequenceList.push(sequence);\r\n\t\t}\r\n\t\treturn sequence;\r\n\t},\r\n\tprocessSequence: function(sequence, isFirstFrame) {\r\n\t\tvar i = 0, len = sequence.transforms.length, _mdf = isFirstFrame;\r\n\t\twhile (i < len && !isFirstFrame) {\r\n\t\t\tif (sequence.transforms[i].transform.mProps._mdf) {\r\n\t\t\t\t_mdf = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\ti += 1\r\n\t\t}\r\n\t\tif (_mdf) {\r\n\t\t\tvar props;\r\n\t\t\tsequence.finalTransform.reset();\r\n\t\t\tfor (i = len - 1; i >= 0; i -= 1) {\r\n\t\t        props = sequence.transforms[i].transform.mProps.v.props;\r\n\t\t        sequence.finalTransform.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tsequence._mdf = _mdf;\r\n\t\t\r\n\t},\r\n\tprocessSequences: function(isFirstFrame) {\r\n\t\tvar i, len = this.sequenceList.length;\r\n\t\tfor (i = 0; i < len; i += 1) {\r\n\t\t\tthis.processSequence(this.sequenceList[i], isFirstFrame);\r\n\t\t}\r\n\r\n\t},\r\n\tgetNewKey: function() {\r\n\t\treturn '_' + this.transform_key_count++;\r\n\t}\r\n}\r\nfunction BaseElement(){\r\n}\r\n\r\nBaseElement.prototype = {\r\n    checkMasks: function(){\r\n        if(!this.data.hasMask){\r\n            return false;\r\n        }\r\n        var i = 0, len = this.data.masksProperties.length;\r\n        while(i<len) {\r\n            if((this.data.masksProperties[i].mode !== 'n' && this.data.masksProperties[i].cl !== false)) {\r\n                return true;\r\n            }\r\n            i += 1;\r\n        }\r\n        return false;\r\n    },\r\n    initExpressions: function(){\r\n        this.layerInterface = LayerExpressionInterface(this);\r\n        if(this.data.hasMask && this.maskManager) {\r\n            this.layerInterface.registerMaskInterface(this.maskManager);\r\n        }\r\n        var effectsInterface = EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);\r\n        this.layerInterface.registerEffectsInterface(effectsInterface);\r\n\r\n        if(this.data.ty === 0 || this.data.xt){\r\n            this.compInterface = CompExpressionInterface(this);\r\n        } else if(this.data.ty === 4){\r\n            this.layerInterface.shapeInterface = ShapeExpressionInterface(this.shapesData,this.itemsData,this.layerInterface);\r\n            this.layerInterface.content = this.layerInterface.shapeInterface;\r\n        } else if(this.data.ty === 5){\r\n            this.layerInterface.textInterface = TextExpressionInterface(this);\r\n            this.layerInterface.text = this.layerInterface.textInterface;\r\n        }\r\n    },\r\n    setBlendMode: function(){\r\n        var blendModeValue = getBlendMode(this.data.bm);\r\n        var elem = this.baseElement || this.layerElement;\r\n\r\n        elem.style['mix-blend-mode'] = blendModeValue;\r\n    },\r\n    initBaseData: function(data, globalData, comp){\r\n        this.globalData = globalData;\r\n        this.comp = comp;\r\n        this.data = data;\r\n        this.layerId = createElementID();\r\n        \r\n        //Stretch factor for old animations missing this property.\r\n        if(!this.data.sr){\r\n            this.data.sr = 1;\r\n        }\r\n        // effects manager\r\n        this.effectsManager = new EffectsManager(this.data,this,this.dynamicProperties);\r\n        \r\n    },\r\n    getType: function(){\r\n        return this.type;\r\n    }\r\n    ,sourceRectAtTime: function(){}\r\n}\r\nfunction NullElement(data,globalData,comp){\r\n    this.initFrame();\r\n\tthis.initBaseData(data, globalData, comp);\r\n    this.initFrame();\r\n    this.initTransform(data, globalData, comp);\r\n    this.initHierarchy();\r\n}\r\n\r\nNullElement.prototype.prepareFrame = function(num) {\r\n    this.prepareProperties(num, true);\r\n};\r\n\r\nNullElement.prototype.renderFrame = function() {\r\n};\r\n\r\nNullElement.prototype.getBaseElement = function() {\r\n\treturn null;\r\n};\r\n\r\nNullElement.prototype.destroy = function() {\r\n};\r\n\r\nNullElement.prototype.sourceRectAtTime = function() {\r\n};\r\n\r\nNullElement.prototype.hide = function() {\r\n};\r\n\r\nextendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement], NullElement);\r\n\r\nfunction SVGBaseElement(){\r\n}\r\n\r\nSVGBaseElement.prototype = {\r\n    initRendererElement: function() {\r\n        this.layerElement = createNS('g');\r\n    },\r\n    createContainerElements: function(){\r\n        this.matteElement = createNS('g');\r\n        this.transformedElement = this.layerElement;\r\n        this.maskedElement = this.layerElement;\r\n        this._sizeChanged = false;\r\n        var layerElementParent = null;\r\n        //If this layer acts as a mask for the following layer\r\n        var filId, fil, gg;\r\n        if (this.data.td) {\r\n            if (this.data.td == 3 || this.data.td == 1) {\r\n                var masker = createNS('mask');\r\n                masker.setAttribute('id', this.layerId);\r\n                masker.setAttribute('mask-type', this.data.td == 3 ? 'luminance' : 'alpha');\r\n                masker.appendChild(this.layerElement);\r\n                layerElementParent = masker;\r\n                this.globalData.defs.appendChild(masker);\r\n                // This is only for IE and Edge when mask if of type alpha\r\n                if (!featureSupport.maskType && this.data.td == 1) {\r\n                    masker.setAttribute('mask-type', 'luminance');\r\n                    filId = createElementID();\r\n                    fil = filtersFactory.createFilter(filId);\r\n                    this.globalData.defs.appendChild(fil);\r\n                    fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\r\n                    gg = createNS('g');\r\n                    gg.appendChild(this.layerElement);\r\n                    layerElementParent = gg;\r\n                    masker.appendChild(gg);\r\n                    gg.setAttribute('filter','url(' + locationHref + '#' + filId + ')');\r\n                }\r\n            } else if(this.data.td == 2) {\r\n                var maskGroup = createNS('mask');\r\n                maskGroup.setAttribute('id', this.layerId);\r\n                maskGroup.setAttribute('mask-type','alpha');\r\n                var maskGrouper = createNS('g');\r\n                maskGroup.appendChild(maskGrouper);\r\n                filId = createElementID();\r\n                fil = filtersFactory.createFilter(filId);\r\n                ////\r\n\r\n                // This solution doesn't work on Android when meta tag with viewport attribute is set\r\n                /*var feColorMatrix = createNS('feColorMatrix');\r\n                feColorMatrix.setAttribute('type', 'matrix');\r\n                feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\r\n                feColorMatrix.setAttribute('values','1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 -1 1');\r\n                fil.appendChild(feColorMatrix);*/\r\n                ////\r\n                var feCTr = createNS('feComponentTransfer');\r\n                feCTr.setAttribute('in','SourceGraphic');\r\n                fil.appendChild(feCTr);\r\n                var feFunc = createNS('feFuncA');\r\n                feFunc.setAttribute('type','table');\r\n                feFunc.setAttribute('tableValues','1.0 0.0');\r\n                feCTr.appendChild(feFunc);\r\n                ////\r\n                this.globalData.defs.appendChild(fil);\r\n                var alphaRect = createNS('rect');\r\n                alphaRect.setAttribute('width',  this.comp.data.w);\r\n                alphaRect.setAttribute('height', this.comp.data.h);\r\n                alphaRect.setAttribute('x','0');\r\n                alphaRect.setAttribute('y','0');\r\n                alphaRect.setAttribute('fill','#ffffff');\r\n                alphaRect.setAttribute('opacity','0');\r\n                maskGrouper.setAttribute('filter', 'url(' + locationHref + '#'+filId+')');\r\n                maskGrouper.appendChild(alphaRect);\r\n                maskGrouper.appendChild(this.layerElement);\r\n                layerElementParent = maskGrouper;\r\n                if (!featureSupport.maskType) {\r\n                    maskGroup.setAttribute('mask-type', 'luminance');\r\n                    fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\r\n                    gg = createNS('g');\r\n                    maskGrouper.appendChild(alphaRect);\r\n                    gg.appendChild(this.layerElement);\r\n                    layerElementParent = gg;\r\n                    maskGrouper.appendChild(gg);\r\n                }\r\n                this.globalData.defs.appendChild(maskGroup);\r\n            }\r\n        } else if (this.data.tt) {\r\n            this.matteElement.appendChild(this.layerElement);\r\n            layerElementParent = this.matteElement;\r\n            this.baseElement = this.matteElement;\r\n        } else {\r\n            this.baseElement = this.layerElement;\r\n        }\r\n        if (this.data.ln) {\r\n            this.layerElement.setAttribute('id', this.data.ln);\r\n        }\r\n        if (this.data.cl) {\r\n            this.layerElement.setAttribute('class', this.data.cl);\r\n        }\r\n        //Clipping compositions to hide content that exceeds boundaries. If collapsed transformations is on, component should not be clipped\r\n        if (this.data.ty === 0 && !this.data.hd) {\r\n            var cp = createNS( 'clipPath');\r\n            var pt = createNS('path');\r\n            pt.setAttribute('d','M0,0 L' + this.data.w + ',0' + ' L' + this.data.w + ',' + this.data.h + ' L0,' + this.data.h + 'z');\r\n            var clipId = createElementID();\r\n            cp.setAttribute('id',clipId);\r\n            cp.appendChild(pt);\r\n            this.globalData.defs.appendChild(cp);\r\n\r\n            if (this.checkMasks()) {\r\n                var cpGroup = createNS('g');\r\n                cpGroup.setAttribute('clip-path','url(' + locationHref + '#'+clipId + ')');\r\n                cpGroup.appendChild(this.layerElement);\r\n                this.transformedElement = cpGroup;\r\n                if (layerElementParent) {\r\n                    layerElementParent.appendChild(this.transformedElement);\r\n                } else {\r\n                    this.baseElement = this.transformedElement;\r\n                }\r\n            } else {\r\n                this.layerElement.setAttribute('clip-path','url(' + locationHref + '#'+clipId+')');\r\n            }\r\n            \r\n        }\r\n        if (this.data.bm !== 0) {\r\n            this.setBlendMode();\r\n        }\r\n\r\n    },\r\n    renderElement: function() {\r\n        if (this.finalTransform._matMdf) {\r\n            this.transformedElement.setAttribute('transform', this.finalTransform.mat.to2dCSS());\r\n        }\r\n        if (this.finalTransform._opMdf) {\r\n            this.transformedElement.setAttribute('opacity', this.finalTransform.mProp.o.v);\r\n        }\r\n    },\r\n    destroyBaseElement: function() {\r\n        this.layerElement = null;\r\n        this.matteElement = null;\r\n        this.maskManager.destroy();\r\n    },\r\n    getBaseElement: function() {\r\n        if (this.data.hd) {\r\n            return null;\r\n        }\r\n        return this.baseElement;\r\n    },\r\n    createRenderableComponents: function() {\r\n        this.maskManager = new MaskElement(this.data, this, this.globalData);\r\n        this.renderableEffectsManager = new SVGEffects(this);\r\n    },\r\n    setMatte: function(id) {\r\n        if (!this.matteElement) {\r\n            return;\r\n        }\r\n        this.matteElement.setAttribute(\"mask\", \"url(\" + locationHref + \"#\" + id + \")\");\r\n    }\r\n};\r\nfunction IShapeElement(){\r\n}\r\n\r\nIShapeElement.prototype = {\r\n    addShapeToModifiers: function(data) {\r\n        var i, len = this.shapeModifiers.length;\r\n        for(i=0;i<len;i+=1){\r\n            this.shapeModifiers[i].addShape(data);\r\n        }\r\n    },\r\n    isShapeInAnimatedModifiers: function(data) {\r\n        var i = 0, len = this.shapeModifiers.length;\r\n        while(i < len) {\r\n            if(this.shapeModifiers[i].isAnimatedWithShape(data)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n    renderModifiers: function() {\r\n        if(!this.shapeModifiers.length){\r\n            return;\r\n        }\r\n        var i, len = this.shapes.length;\r\n        for(i=0;i<len;i+=1){\r\n            this.shapes[i].sh.reset();\r\n        }\r\n\r\n        len = this.shapeModifiers.length;\r\n        for(i=len-1;i>=0;i-=1){\r\n            this.shapeModifiers[i].processShapes(this._isFirstFrame);\r\n        }\r\n    },\r\n    lcEnum: {\r\n        '1': 'butt',\r\n        '2': 'round',\r\n        '3': 'square'\r\n    },\r\n    ljEnum: {\r\n        '1': 'miter',\r\n        '2': 'round',\r\n        '3': 'bevel'\r\n    },\r\n    searchProcessedElement: function(elem){\r\n        var elements = this.processedElements;\r\n        var i = 0, len = elements.length;\r\n        while (i < len) {\r\n            if (elements[i].elem === elem) {\r\n                return elements[i].pos;\r\n            }\r\n            i += 1;\r\n        }\r\n        return 0;\r\n    },\r\n    addProcessedElement: function(elem, pos){\r\n        var elements = this.processedElements;\r\n        var i = elements.length;\r\n        while(i) {\r\n            i -= 1;\r\n            if (elements[i].elem === elem) {\r\n                elements[i].pos = pos;\r\n                return;\r\n            }\r\n        }\r\n        elements.push(new ProcessedElement(elem, pos));\r\n    },\r\n    prepareFrame: function(num) {\r\n        this.prepareRenderableFrame(num);\r\n        this.prepareProperties(num, this.isInRange);\r\n    }\r\n};\r\nfunction ITextElement(){\r\n}\r\n\r\nITextElement.prototype.initElement = function(data,globalData,comp){\r\n    this.lettersChangedFlag = true;\r\n    this.initFrame();\r\n    this.initBaseData(data, globalData, comp);\r\n    this.textProperty = new TextProperty(this, data.t, this.dynamicProperties);\r\n    this.textAnimator = new TextAnimatorProperty(data.t, this.renderType, this);\r\n    this.initTransform(data, globalData, comp);\r\n    this.initHierarchy();\r\n    this.initRenderable();\r\n    this.initRendererElement();\r\n    this.createContainerElements();\r\n    this.createRenderableComponents();\r\n    this.createContent();\r\n    this.hide();\r\n    this.textAnimator.searchProperties(this.dynamicProperties);\r\n};\r\n\r\nITextElement.prototype.prepareFrame = function(num) {\r\n    this._mdf = false;\r\n    this.prepareRenderableFrame(num);\r\n    this.prepareProperties(num, this.isInRange);\r\n    if(this.textProperty._mdf || this.textProperty._isFirstFrame) {\r\n        this.buildNewText();\r\n        this.textProperty._isFirstFrame = false;\r\n        this.textProperty._mdf = false;\r\n    }\r\n};\r\n\r\nITextElement.prototype.createPathShape = function(matrixHelper, shapes) {\r\n    var j,jLen = shapes.length;\r\n    var k, kLen, pathNodes;\r\n    var shapeStr = '';\r\n    for(j=0;j<jLen;j+=1){\r\n        pathNodes = shapes[j].ks.k;\r\n        shapeStr += buildShapeString(pathNodes, pathNodes.i.length, true, matrixHelper);\r\n    }\r\n    return shapeStr;\r\n};\r\n\r\nITextElement.prototype.updateDocumentData = function(newData, index) {\r\n    this.textProperty.updateDocumentData(newData, index);\r\n};\r\n\r\nITextElement.prototype.canResizeFont = function(_canResize) {\r\n    this.textProperty.canResizeFont(_canResize);\r\n};\r\n\r\nITextElement.prototype.setMinimumFontSize = function(_fontSize) {\r\n    this.textProperty.setMinimumFontSize(_fontSize);\r\n};\r\n\r\nITextElement.prototype.applyTextPropertiesToMatrix = function(documentData, matrixHelper, lineNumber, xPos, yPos) {\r\n    if(documentData.ps){\r\n        matrixHelper.translate(documentData.ps[0],documentData.ps[1] + documentData.ascent,0);\r\n    }\r\n    matrixHelper.translate(0,-documentData.ls,0);\r\n    switch(documentData.j){\r\n        case 1:\r\n            matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber]),0,0);\r\n            break;\r\n        case 2:\r\n            matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber] )/2,0,0);\r\n            break;\r\n    }\r\n    matrixHelper.translate(xPos, yPos, 0);\r\n};\r\n\r\n\r\nITextElement.prototype.buildColor = function(colorData) {\r\n    return 'rgb(' + Math.round(colorData[0]*255) + ',' + Math.round(colorData[1]*255) + ',' + Math.round(colorData[2]*255) + ')';\r\n};\r\n\r\nITextElement.prototype.emptyProp = new LetterProps();\r\n\r\nITextElement.prototype.destroy = function(){\r\n    \r\n};\r\nfunction ICompElement(){}\r\n\r\nextendPrototype([BaseElement, TransformElement, HierarchyElement, FrameElement, RenderableDOMElement], ICompElement);\r\n\r\nICompElement.prototype.initElement = function(data,globalData,comp) {\r\n    this.initFrame();\r\n    this.initBaseData(data, globalData, comp);\r\n    this.initTransform(data, globalData, comp);\r\n    this.initRenderable();\r\n    this.initHierarchy();\r\n    this.initRendererElement();\r\n    this.createContainerElements();\r\n    this.createRenderableComponents();\r\n    if(this.data.xt || !globalData.progressiveLoad){\r\n        this.buildAllItems();\r\n    }\r\n    this.hide();\r\n};\r\n\r\n/*ICompElement.prototype.hide = function(){\r\n    if(!this.hidden){\r\n        this.hideElement();\r\n        var i,len = this.elements.length;\r\n        for( i = 0; i < len; i+=1 ){\r\n            if(this.elements[i]){\r\n                this.elements[i].hide();\r\n            }\r\n        }\r\n    }\r\n};*/\r\n\r\nICompElement.prototype.prepareFrame = function(num){\r\n    this._mdf = false;\r\n    this.prepareRenderableFrame(num);\r\n    this.prepareProperties(num, this.isInRange);\r\n    if(!this.isInRange && !this.data.xt){\r\n        return;\r\n    }\r\n\r\n    if (!this.tm._placeholder) {\r\n        var timeRemapped = this.tm.v;\r\n        if(timeRemapped === this.data.op){\r\n            timeRemapped = this.data.op - 1;\r\n        }\r\n        this.renderedFrame = timeRemapped;\r\n    } else {\r\n        this.renderedFrame = num/this.data.sr;\r\n    }\r\n    var i,len = this.elements.length;\r\n    if(!this.completeLayers){\r\n        this.checkLayers(this.renderedFrame);\r\n    }\r\n    //This iteration needs to be backwards because of how expressions connect between each other\r\n    for( i = len - 1; i >= 0; i -= 1 ){\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].prepareFrame(this.renderedFrame - this.layers[i].st);\r\n            if(this.elements[i]._mdf) {\r\n                this._mdf = true;\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nICompElement.prototype.renderInnerContent = function() {\r\n    var i,len = this.layers.length;\r\n    for( i = 0; i < len; i += 1 ){\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].renderFrame();\r\n        }\r\n    }\r\n};\r\n\r\nICompElement.prototype.setElements = function(elems){\r\n    this.elements = elems;\r\n};\r\n\r\nICompElement.prototype.getElements = function(){\r\n    return this.elements;\r\n};\r\n\r\nICompElement.prototype.destroyElements = function(){\r\n    var i,len = this.layers.length;\r\n    for( i = 0; i < len; i+=1 ){\r\n        if(this.elements[i]){\r\n            this.elements[i].destroy();\r\n        }\r\n    }\r\n};\r\n\r\nICompElement.prototype.destroy = function(){\r\n    this.destroyElements();\r\n    this.destroyBaseElement();\r\n};\r\n\r\nfunction IImageElement(data,globalData,comp){\r\n    this.assetData = globalData.getAssetData(data.refId);\r\n    this.initElement(data,globalData,comp);\r\n    this.sourceRect = {top:0,left:0,width:this.assetData.w,height:this.assetData.h};\r\n}\r\n\r\nextendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement], IImageElement);\r\n\r\nIImageElement.prototype.createContent = function(){\r\n\r\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n\r\n    this.innerElem = createNS('image');\r\n    this.innerElem.setAttribute('width',this.assetData.w+\"px\");\r\n    this.innerElem.setAttribute('height',this.assetData.h+\"px\");\r\n    this.innerElem.setAttribute('preserveAspectRatio',this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio);\r\n    this.innerElem.setAttributeNS('http://www.w3.org/1999/xlink','href',assetPath);\r\n    \r\n    this.layerElement.appendChild(this.innerElem);\r\n};\r\n\r\nIImageElement.prototype.sourceRectAtTime = function() {\r\n\treturn this.sourceRect;\r\n}\r\nfunction ISolidElement(data,globalData,comp){\r\n    this.initElement(data,globalData,comp);\r\n}\r\nextendPrototype([IImageElement], ISolidElement);\r\n\r\nISolidElement.prototype.createContent = function(){\r\n\r\n    var rect = createNS('rect');\r\n    ////rect.style.width = this.data.sw;\r\n    ////rect.style.height = this.data.sh;\r\n    ////rect.style.fill = this.data.sc;\r\n    rect.setAttribute('width',this.data.sw);\r\n    rect.setAttribute('height',this.data.sh);\r\n    rect.setAttribute('fill',this.data.sc);\r\n    this.layerElement.appendChild(rect);\r\n};\r\nfunction SVGCompElement(data,globalData,comp){\r\n    this.layers = data.layers;\r\n    this.supports3d = true;\r\n    this.completeLayers = false;\r\n    this.pendingElements = [];\r\n    this.elements = this.layers ? createSizedArray(this.layers.length) : [];\r\n    //this.layerElement = createNS('g');\r\n    this.initElement(data,globalData,comp);\r\n    this.tm = data.tm ? PropertyFactory.getProp(this,data.tm,0,globalData.frameRate,this) : {_placeholder:true};\r\n}\r\n\r\nextendPrototype([SVGRenderer, ICompElement, SVGBaseElement], SVGCompElement);\r\nfunction SVGTextElement(data,globalData,comp){\r\n    this.textSpans = [];\r\n    this.renderType = 'svg';\r\n    this.initElement(data,globalData,comp);\r\n}\r\n\r\nextendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement], SVGTextElement);\r\n\r\nSVGTextElement.prototype.createContent = function(){\r\n\r\n    if (this.data.singleShape && !this.globalData.fontManager.chars) {\r\n        this.textContainer = createNS('text');\r\n    }\r\n};\r\n\r\nSVGTextElement.prototype.buildTextContents = function(textArray) {\r\n    var i = 0, len = textArray.length;\r\n    var textContents = [], currentTextContent = '';\r\n    while (i < len) {\r\n        if(textArray[i] === String.fromCharCode(13) || textArray[i] === String.fromCharCode(3)) {\r\n            textContents.push(currentTextContent);\r\n            currentTextContent = '';\r\n        } else {\r\n            currentTextContent += textArray[i];\r\n        }\r\n        i += 1;\r\n    }\r\n    textContents.push(currentTextContent);\r\n    return textContents;\r\n}\r\n\r\nSVGTextElement.prototype.buildNewText = function(){\r\n    var i, len;\r\n\r\n    var documentData = this.textProperty.currentData;\r\n    this.renderedLetters = createSizedArray(documentData ? documentData.l.length : 0);\r\n    if(documentData.fc) {\r\n        this.layerElement.setAttribute('fill', this.buildColor(documentData.fc));\r\n    }else{\r\n        this.layerElement.setAttribute('fill', 'rgba(0,0,0,0)');\r\n    }\r\n    if(documentData.sc){\r\n        this.layerElement.setAttribute('stroke', this.buildColor(documentData.sc));\r\n        this.layerElement.setAttribute('stroke-width', documentData.sw);\r\n    }\r\n    this.layerElement.setAttribute('font-size', documentData.finalSize);\r\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n    if(fontData.fClass){\r\n        this.layerElement.setAttribute('class',fontData.fClass);\r\n    } else {\r\n        this.layerElement.setAttribute('font-family', fontData.fFamily);\r\n        var fWeight = documentData.fWeight, fStyle = documentData.fStyle;\r\n        this.layerElement.setAttribute('font-style', fStyle);\r\n        this.layerElement.setAttribute('font-weight', fWeight);\r\n    }\r\n    this.layerElement.setAttribute('aria-label', documentData.t);\r\n\r\n    var letters = documentData.l || [];\r\n    var usesGlyphs = !!this.globalData.fontManager.chars;\r\n    len = letters.length;\r\n\r\n    var tSpan;\r\n    var matrixHelper = this.mHelper;\r\n    var shapes, shapeStr = '', singleShape = this.data.singleShape;\r\n    var xPos = 0, yPos = 0, firstLine = true;\r\n    var trackingOffset = documentData.tr/1000*documentData.finalSize;\r\n    if(singleShape && !usesGlyphs && !documentData.sz) {\r\n        var tElement = this.textContainer;\r\n        var justify = 'start';\r\n        switch(documentData.j) {\r\n            case 1:\r\n                justify = 'end';\r\n                break;\r\n            case 2:\r\n                justify = 'middle';\r\n                break;\r\n        }\r\n        tElement.setAttribute('text-anchor',justify);\r\n        tElement.setAttribute('letter-spacing',trackingOffset);\r\n        var textContent = this.buildTextContents(documentData.finalText);\r\n        len = textContent.length;\r\n        yPos = documentData.ps ? documentData.ps[1] + documentData.ascent : 0;\r\n        for ( i = 0; i < len; i += 1) {\r\n            tSpan = this.textSpans[i] || createNS('tspan');\r\n            tSpan.textContent = textContent[i];\r\n            tSpan.setAttribute('x', 0);\r\n            tSpan.setAttribute('y', yPos);\r\n            tSpan.style.display = 'inherit';\r\n            tElement.appendChild(tSpan);\r\n            this.textSpans[i] = tSpan;\r\n            yPos += documentData.finalLineHeight;\r\n        }\r\n        \r\n        this.layerElement.appendChild(tElement);\r\n    } else {\r\n        var cachedSpansLength = this.textSpans.length;\r\n        var shapeData, charData;\r\n        for (i = 0; i < len; i += 1) {\r\n            if(!usesGlyphs || !singleShape || i === 0){\r\n                tSpan = cachedSpansLength > i ? this.textSpans[i] : createNS(usesGlyphs?'path':'text');\r\n                if (cachedSpansLength <= i) {\r\n                    tSpan.setAttribute('stroke-linecap', 'butt');\r\n                    tSpan.setAttribute('stroke-linejoin','round');\r\n                    tSpan.setAttribute('stroke-miterlimit','4');\r\n                    this.textSpans[i] = tSpan;\r\n                    this.layerElement.appendChild(tSpan);\r\n                }\r\n                tSpan.style.display = 'inherit';\r\n            }\r\n            \r\n            matrixHelper.reset();\r\n            matrixHelper.scale(documentData.finalSize / 100, documentData.finalSize / 100);\r\n            if (singleShape) {\r\n                if(letters[i].n) {\r\n                    xPos = -trackingOffset;\r\n                    yPos += documentData.yOffset;\r\n                    yPos += firstLine ? 1 : 0;\r\n                    firstLine = false;\r\n                }\r\n                this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\r\n                xPos += letters[i].l || 0;\r\n                //xPos += letters[i].val === ' ' ? 0 : trackingOffset;\r\n                xPos += trackingOffset;\r\n            }\r\n            if(usesGlyphs) {\r\n                charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n                shapeData = charData && charData.data || {};\r\n                shapes = shapeData.shapes ? shapeData.shapes[0].it : [];\r\n                if(!singleShape){\r\n                    tSpan.setAttribute('d',this.createPathShape(matrixHelper,shapes));\r\n                } else {\r\n                    shapeStr += this.createPathShape(matrixHelper,shapes);\r\n                }\r\n            } else {\r\n                if(singleShape) {\r\n                    tSpan.setAttribute(\"transform\", \"translate(\" + matrixHelper.props[12] + \",\" + matrixHelper.props[13] + \")\");\r\n                }\r\n                tSpan.textContent = letters[i].val;\r\n                tSpan.setAttributeNS(\"http://www.w3.org/XML/1998/namespace\", \"xml:space\",\"preserve\");\r\n            }\r\n            //\r\n        }\r\n        if (singleShape && tSpan) {\r\n            tSpan.setAttribute('d',shapeStr);\r\n        }\r\n    }\r\n    while (i < this.textSpans.length){\r\n        this.textSpans[i].style.display = 'none';\r\n        i += 1;\r\n    }\r\n    \r\n    this._sizeChanged = true;\r\n};\r\n\r\nSVGTextElement.prototype.sourceRectAtTime = function(time){\r\n    this.prepareFrame(this.comp.renderedFrame - this.data.st);\r\n    this.renderInnerContent();\r\n    if(this._sizeChanged){\r\n        this._sizeChanged = false;\r\n        var textBox = this.layerElement.getBBox();\r\n        this.bbox = {\r\n            top: textBox.y,\r\n            left: textBox.x,\r\n            width: textBox.width,\r\n            height: textBox.height\r\n        };\r\n    }\r\n    return this.bbox;\r\n};\r\n\r\nSVGTextElement.prototype.renderInnerContent = function(){\r\n\r\n    if(!this.data.singleShape){\r\n        this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n        if(this.lettersChangedFlag || this.textAnimator.lettersChangedFlag){\r\n            this._sizeChanged = true;\r\n            var  i,len;\r\n            var renderedLetters = this.textAnimator.renderedLetters;\r\n\r\n            var letters = this.textProperty.currentData.l;\r\n\r\n            len = letters.length;\r\n            var renderedLetter, textSpan;\r\n            for(i=0;i<len;i+=1){\r\n                if(letters[i].n){\r\n                    continue;\r\n                }\r\n                renderedLetter = renderedLetters[i];\r\n                textSpan = this.textSpans[i];\r\n                if(renderedLetter._mdf.m) {\r\n                    textSpan.setAttribute('transform',renderedLetter.m);\r\n                }\r\n                if(renderedLetter._mdf.o) {\r\n                    textSpan.setAttribute('opacity',renderedLetter.o);\r\n                }\r\n                if(renderedLetter._mdf.sw){\r\n                    textSpan.setAttribute('stroke-width',renderedLetter.sw);\r\n                }\r\n                if(renderedLetter._mdf.sc){\r\n                    textSpan.setAttribute('stroke',renderedLetter.sc);\r\n                }\r\n                if(renderedLetter._mdf.fc){\r\n                    textSpan.setAttribute('fill',renderedLetter.fc);\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nfunction SVGShapeElement(data,globalData,comp){\r\n    //List of drawable elements\r\n    this.shapes = [];\r\n    // Full shape data\r\n    this.shapesData = data.shapes;\r\n    //List of styles that will be applied to shapes\r\n    this.stylesList = [];\r\n    //List of modifiers that will be applied to shapes\r\n    this.shapeModifiers = [];\r\n    //List of items in shape tree\r\n    this.itemsData = [];\r\n    //List of items in previous shape tree\r\n    this.processedElements = [];\r\n    // List of animated components\r\n    this.animatedContents = [];\r\n    this.initElement(data,globalData,comp);\r\n    //Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n    // List of elements that have been created\r\n    this.prevViewData = [];\r\n    //Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n}\r\n\r\nextendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement], SVGShapeElement);\r\n\r\nSVGShapeElement.prototype.initSecondaryElement = function() {\r\n};\r\n\r\nSVGShapeElement.prototype.identityMatrix = new Matrix();\r\n\r\nSVGShapeElement.prototype.buildExpressionInterface = function(){};\r\n\r\nSVGShapeElement.prototype.createContent = function(){\r\n    this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement, 0, [], true);\r\n    this.filterUniqueShapes();\r\n};\r\n\r\n/*\r\nThis method searches for multiple shapes that affect a single element and one of them is animated\r\n*/\r\nSVGShapeElement.prototype.filterUniqueShapes = function(){\r\n    var i, len = this.shapes.length, shape;\r\n    var j, jLen = this.stylesList.length;\r\n    var style, count = 0;\r\n    var tempShapes = [];\r\n    var areAnimated = false;\r\n    for(j = 0; j < jLen; j += 1) {\r\n        style = this.stylesList[j];\r\n        areAnimated = false;\r\n        tempShapes.length = 0;\r\n        for(i = 0; i < len; i += 1) {\r\n            shape = this.shapes[i];\r\n            if(shape.styles.indexOf(style) !== -1) {\r\n                tempShapes.push(shape);\r\n                areAnimated = shape._isAnimated || areAnimated;\r\n            }\r\n        }\r\n        if(tempShapes.length > 1 && areAnimated) {\r\n            this.setShapesAsAnimated(tempShapes);\r\n        }\r\n    }\r\n}\r\n\r\nSVGShapeElement.prototype.setShapesAsAnimated = function(shapes){\r\n    var i, len = shapes.length;\r\n    for(i = 0; i < len; i += 1) {\r\n        shapes[i].setAsAnimated();\r\n    }\r\n}\r\n\r\nSVGShapeElement.prototype.createStyleElement = function(data, level){\r\n    //TODO: prevent drawing of hidden styles\r\n    var elementData;\r\n    var styleOb = new SVGStyleData(data, level);\r\n\r\n    var pathElement = styleOb.pElem;\r\n    if(data.ty === 'st') {\r\n        elementData = new SVGStrokeStyleData(this, data, styleOb);\r\n    } else if(data.ty === 'fl') {\r\n        elementData = new SVGFillStyleData(this, data, styleOb);\r\n    } else if(data.ty === 'gf' || data.ty === 'gs') {\r\n        var gradientConstructor = data.ty === 'gf' ? SVGGradientFillStyleData : SVGGradientStrokeStyleData;\r\n        elementData = new gradientConstructor(this, data, styleOb);\r\n        this.globalData.defs.appendChild(elementData.gf);\r\n        if (elementData.maskId) {\r\n            this.globalData.defs.appendChild(elementData.ms);\r\n            this.globalData.defs.appendChild(elementData.of);\r\n            pathElement.setAttribute('mask','url(' + locationHref + '#' + elementData.maskId + ')');\r\n        }\r\n    }\r\n    \r\n    if(data.ty === 'st' || data.ty === 'gs') {\r\n        pathElement.setAttribute('stroke-linecap', this.lcEnum[data.lc] || 'round');\r\n        pathElement.setAttribute('stroke-linejoin',this.ljEnum[data.lj] || 'round');\r\n        pathElement.setAttribute('fill-opacity','0');\r\n        if(data.lj === 1) {\r\n            pathElement.setAttribute('stroke-miterlimit',data.ml);\r\n        }\r\n    }\r\n\r\n    if(data.r === 2) {\r\n        pathElement.setAttribute('fill-rule', 'evenodd');\r\n    }\r\n\r\n    if(data.ln){\r\n        pathElement.setAttribute('id',data.ln);\r\n    }\r\n    if(data.cl){\r\n        pathElement.setAttribute('class',data.cl);\r\n    }\r\n    if(data.bm){\r\n        pathElement.style['mix-blend-mode'] = getBlendMode(data.bm);\r\n    }\r\n    this.stylesList.push(styleOb);\r\n    this.addToAnimatedContents(data, elementData);\r\n    return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.createGroupElement = function(data) {\r\n    var elementData = new ShapeGroupData();\r\n    if(data.ln){\r\n        elementData.gr.setAttribute('id',data.ln);\r\n    }\r\n    if(data.cl){\r\n        elementData.gr.setAttribute('class',data.cl);\r\n    }\r\n    if(data.bm){\r\n        elementData.gr.style['mix-blend-mode'] = getBlendMode(data.bm);\r\n    }\r\n    return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.createTransformElement = function(data, container) {\r\n    var transformProperty = TransformPropertyFactory.getTransformProperty(this,data,this);\r\n    var elementData = new SVGTransformData(transformProperty, transformProperty.o, container);\r\n    this.addToAnimatedContents(data, elementData);\r\n    return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.createShapeElement = function(data, ownTransformers, level) {\r\n    var ty = 4;\r\n    if(data.ty === 'rc'){\r\n        ty = 5;\r\n    }else if(data.ty === 'el'){\r\n        ty = 6;\r\n    }else if(data.ty === 'sr'){\r\n        ty = 7;\r\n    }\r\n    var shapeProperty = ShapePropertyFactory.getShapeProp(this,data,ty,this);\r\n    var elementData = new SVGShapeData(ownTransformers, level, shapeProperty);\r\n    this.shapes.push(elementData);\r\n    this.addShapeToModifiers(elementData);\r\n    this.addToAnimatedContents(data, elementData);\r\n    return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.addToAnimatedContents = function(data, element) {\r\n    var i = 0, len = this.animatedContents.length;\r\n    while(i < len) {\r\n        if(this.animatedContents[i].element === element) {\r\n            return;\r\n        }\r\n        i += 1;\r\n    }\r\n    this.animatedContents.push({\r\n        fn: SVGElementsRenderer.createRenderFunction(data),\r\n        element: element,\r\n        data: data\r\n    });\r\n};\r\n\r\nSVGShapeElement.prototype.setElementStyles = function(elementData){\r\n    var arr = elementData.styles;\r\n    var j, jLen = this.stylesList.length;\r\n    for (j = 0; j < jLen; j += 1) {\r\n        if (!this.stylesList[j].closed) {\r\n            arr.push(this.stylesList[j]);\r\n        }\r\n    }\r\n};\r\n\r\nSVGShapeElement.prototype.reloadShapes = function(){\r\n    this._isFirstFrame = true;\r\n    var i, len = this.itemsData.length;\r\n    for( i = 0; i < len; i += 1) {\r\n        this.prevViewData[i] = this.itemsData[i];\r\n    }\r\n    this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement, 0, [], true);\r\n    this.filterUniqueShapes();\r\n    len = this.dynamicProperties.length;\r\n    for(i = 0; i < len; i += 1) {\r\n        this.dynamicProperties[i].getValue();\r\n    }\r\n    this.renderModifiers();\r\n};\r\n\r\nSVGShapeElement.prototype.searchShapes = function(arr,itemsData,prevViewData,container, level, transformers, render){\r\n    var ownTransformers = [].concat(transformers);\r\n    var i, len = arr.length - 1;\r\n    var j, jLen;\r\n    var ownStyles = [], ownModifiers = [], styleOb, currentTransform, modifier, processedPos;\r\n    for(i=len;i>=0;i-=1){\r\n        processedPos = this.searchProcessedElement(arr[i]);\r\n        if(!processedPos){\r\n            arr[i]._render = render;\r\n        } else {\r\n            itemsData[i] = prevViewData[processedPos - 1];\r\n        }\r\n        if(arr[i].ty == 'fl' || arr[i].ty == 'st' || arr[i].ty == 'gf' || arr[i].ty == 'gs'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createStyleElement(arr[i], level);\r\n            } else {\r\n                itemsData[i].style.closed = false;\r\n            }\r\n            if(arr[i]._render){\r\n                container.appendChild(itemsData[i].style.pElem);\r\n            }\r\n            ownStyles.push(itemsData[i].style);\r\n        }else if(arr[i].ty == 'gr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createGroupElement(arr[i]);\r\n            } else {\r\n                jLen = itemsData[i].it.length;\r\n                for(j=0;j<jLen;j+=1){\r\n                    itemsData[i].prevViewData[j] = itemsData[i].it[j];\r\n                }\r\n            }\r\n            this.searchShapes(arr[i].it,itemsData[i].it,itemsData[i].prevViewData,itemsData[i].gr, level + 1, ownTransformers, render);\r\n            if(arr[i]._render){\r\n                container.appendChild(itemsData[i].gr);\r\n            }\r\n        }else if(arr[i].ty == 'tr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createTransformElement(arr[i], container);\r\n            }\r\n            currentTransform = itemsData[i].transform;\r\n            ownTransformers.push(currentTransform);\r\n        }else if(arr[i].ty == 'sh' || arr[i].ty == 'rc' || arr[i].ty == 'el' || arr[i].ty == 'sr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createShapeElement(arr[i], ownTransformers, level);\r\n            }\r\n            this.setElementStyles(itemsData[i]);\r\n\r\n        }else if(arr[i].ty == 'tm' || arr[i].ty == 'rd' || arr[i].ty == 'ms'){\r\n            if(!processedPos){\r\n                modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n                modifier.init(this,arr[i]);\r\n                itemsData[i] = modifier;\r\n                this.shapeModifiers.push(modifier);\r\n            } else {\r\n                modifier = itemsData[i];\r\n                modifier.closed = false;\r\n            }\r\n            ownModifiers.push(modifier);\r\n        }else if(arr[i].ty == 'rp'){\r\n            if(!processedPos){\r\n                modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n                itemsData[i] = modifier;\r\n                modifier.init(this,arr,i,itemsData);\r\n                this.shapeModifiers.push(modifier);\r\n                render = false;\r\n            }else{\r\n                modifier = itemsData[i];\r\n                modifier.closed = true;\r\n            }\r\n            ownModifiers.push(modifier);\r\n        }\r\n        this.addProcessedElement(arr[i], i + 1);\r\n    }\r\n    len = ownStyles.length;\r\n    for(i=0;i<len;i+=1){\r\n        ownStyles[i].closed = true;\r\n    }\r\n    len = ownModifiers.length;\r\n    for(i=0;i<len;i+=1){\r\n        ownModifiers[i].closed = true;\r\n    }\r\n};\r\n\r\nSVGShapeElement.prototype.renderInnerContent = function() {\r\n    this.renderModifiers();\r\n    var i, len = this.stylesList.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.stylesList[i].reset();\r\n    }\r\n    this.renderShape();\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n        if (this.stylesList[i]._mdf || this._isFirstFrame) {\r\n            if(this.stylesList[i].msElem){\r\n                this.stylesList[i].msElem.setAttribute('d', this.stylesList[i].d);\r\n                //Adding M0 0 fixes same mask bug on all browsers\r\n                this.stylesList[i].d = 'M0 0' + this.stylesList[i].d;\r\n            }\r\n            this.stylesList[i].pElem.setAttribute('d', this.stylesList[i].d || 'M0 0');\r\n        }\r\n    }\r\n};\r\n\r\nSVGShapeElement.prototype.renderShape = function() {\r\n    var i, len = this.animatedContents.length;\r\n    var animatedContent;\r\n    for(i = 0; i < len; i += 1) {\r\n        animatedContent = this.animatedContents[i];\r\n        if((this._isFirstFrame || animatedContent.element._isAnimated) && animatedContent.data !== true) {\r\n            animatedContent.fn(animatedContent.data, animatedContent.element, this._isFirstFrame);\r\n        }\r\n    }\r\n}\r\n\r\nSVGShapeElement.prototype.destroy = function(){\r\n    this.destroyBaseElement();\r\n    this.shapesData = null;\r\n    this.itemsData = null;\r\n};\r\n\r\nfunction SVGTintFilter(filter, filterManager){\r\n    this.filterManager = filterManager;\r\n    var feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type','matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters','linearRGB');\r\n    feColorMatrix.setAttribute('values','0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0');\r\n    feColorMatrix.setAttribute('result','f1');\r\n    filter.appendChild(feColorMatrix);\r\n    feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type','matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters','sRGB');\r\n    feColorMatrix.setAttribute('values','1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\r\n    feColorMatrix.setAttribute('result','f2');\r\n    filter.appendChild(feColorMatrix);\r\n    this.matrixFilter = feColorMatrix;\r\n    if(filterManager.effectElements[2].p.v !== 100 || filterManager.effectElements[2].p.k){\r\n        var feMerge = createNS('feMerge');\r\n        filter.appendChild(feMerge);\r\n        var feMergeNode;\r\n        feMergeNode = createNS('feMergeNode');\r\n        feMergeNode.setAttribute('in','SourceGraphic');\r\n        feMerge.appendChild(feMergeNode);\r\n        feMergeNode = createNS('feMergeNode');\r\n        feMergeNode.setAttribute('in','f2');\r\n        feMerge.appendChild(feMergeNode);\r\n    }\r\n}\r\n\r\nSVGTintFilter.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        var colorBlack = this.filterManager.effectElements[0].p.v;\r\n        var colorWhite = this.filterManager.effectElements[1].p.v;\r\n        var opacity = this.filterManager.effectElements[2].p.v/100;\r\n        this.matrixFilter.setAttribute('values',(colorWhite[0]- colorBlack[0])+' 0 0 0 '+ colorBlack[0] +' '+ (colorWhite[1]- colorBlack[1]) +' 0 0 0 '+ colorBlack[1] +' '+ (colorWhite[2]- colorBlack[2]) +' 0 0 0 '+ colorBlack[2] +' 0 0 0 ' + opacity + ' 0');\r\n    }\r\n};\r\nfunction SVGFillFilter(filter, filterManager){\r\n    this.filterManager = filterManager;\r\n    var feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type','matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters','sRGB');\r\n    feColorMatrix.setAttribute('values','1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\r\n    filter.appendChild(feColorMatrix);\r\n    this.matrixFilter = feColorMatrix;\r\n}\r\nSVGFillFilter.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        var color = this.filterManager.effectElements[2].p.v;\r\n        var opacity = this.filterManager.effectElements[6].p.v;\r\n        this.matrixFilter.setAttribute('values','0 0 0 0 '+color[0]+' 0 0 0 0 '+color[1]+' 0 0 0 0 '+color[2]+' 0 0 0 '+opacity+' 0');\r\n    }\r\n};\r\nfunction SVGGaussianBlurEffect(filter, filterManager){\r\n    // Outset the filter region by 100% on all sides to accommodate blur expansion.\r\n    filter.setAttribute('x','-100%');\r\n    filter.setAttribute('y','-100%');\r\n    filter.setAttribute('width','300%');\r\n    filter.setAttribute('height','300%');\r\n\r\n    this.filterManager = filterManager;\r\n    var feGaussianBlur = createNS('feGaussianBlur');\r\n    filter.appendChild(feGaussianBlur);\r\n    this.feGaussianBlur = feGaussianBlur;\r\n}\r\n\r\nSVGGaussianBlurEffect.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        // Empirical value, matching AE's blur appearance.\r\n        var kBlurrinessToSigma = 0.3;\r\n        var sigma = this.filterManager.effectElements[0].p.v * kBlurrinessToSigma;\r\n\r\n        // Dimensions mapping:\r\n        //\r\n        //   1 -> horizontal & vertical\r\n        //   2 -> horizontal only\r\n        //   3 -> vertical only\r\n        //\r\n        var dimensions = this.filterManager.effectElements[1].p.v;\r\n        var sigmaX = (dimensions == 3) ? 0 : sigma;\r\n        var sigmaY = (dimensions == 2) ? 0 : sigma;\r\n\r\n        this.feGaussianBlur.setAttribute('stdDeviation', sigmaX + \" \" + sigmaY);\r\n\r\n        // Repeat edges mapping:\r\n        //\r\n        //   0 -> off -> duplicate\r\n        //   1 -> on  -> wrap\r\n        var edgeMode = (this.filterManager.effectElements[2].p.v == 1) ? 'wrap' : 'duplicate';\r\n        this.feGaussianBlur.setAttribute('edgeMode', edgeMode);\r\n    }\r\n}\r\nfunction SVGStrokeEffect(elem, filterManager){\r\n    this.initialized = false;\r\n    this.filterManager = filterManager;\r\n    this.elem = elem;\r\n    this.paths = [];\r\n}\r\n\r\nSVGStrokeEffect.prototype.initialize = function(){\r\n\r\n    var elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\r\n    var path,groupPath, i, len;\r\n    if(this.filterManager.effectElements[1].p.v === 1){\r\n        len = this.elem.maskManager.masksProperties.length;\r\n        i = 0;\r\n    } else {\r\n        i = this.filterManager.effectElements[0].p.v - 1;\r\n        len = i + 1;\r\n    }\r\n    groupPath = createNS('g'); \r\n    groupPath.setAttribute('fill','none');\r\n    groupPath.setAttribute('stroke-linecap','round');\r\n    groupPath.setAttribute('stroke-dashoffset',1);\r\n    for(i;i<len;i+=1){\r\n        path = createNS('path');\r\n        groupPath.appendChild(path);\r\n        this.paths.push({p:path,m:i});\r\n    }\r\n    if(this.filterManager.effectElements[10].p.v === 3){\r\n        var mask = createNS('mask');\r\n        var id = createElementID();\r\n        mask.setAttribute('id',id);\r\n        mask.setAttribute('mask-type','alpha');\r\n        mask.appendChild(groupPath);\r\n        this.elem.globalData.defs.appendChild(mask);\r\n        var g = createNS('g');\r\n        g.setAttribute('mask','url(' + locationHref + '#'+id+')');\r\n        while (elemChildren[0]) {\r\n            g.appendChild(elemChildren[0]);\r\n        }\r\n        this.elem.layerElement.appendChild(g);\r\n        this.masker = mask;\r\n        groupPath.setAttribute('stroke','#fff');\r\n    } else if(this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2){\r\n        if(this.filterManager.effectElements[10].p.v === 2){\r\n            elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\r\n            while(elemChildren.length){\r\n                this.elem.layerElement.removeChild(elemChildren[0]);\r\n            }\r\n        }\r\n        this.elem.layerElement.appendChild(groupPath);\r\n        this.elem.layerElement.removeAttribute('mask');\r\n        groupPath.setAttribute('stroke','#fff');\r\n    }\r\n    this.initialized = true;\r\n    this.pathMasker = groupPath;\r\n};\r\n\r\nSVGStrokeEffect.prototype.renderFrame = function(forceRender){\r\n    if(!this.initialized){\r\n        this.initialize();\r\n    }\r\n    var i, len = this.paths.length;\r\n    var mask, path;\r\n    for(i=0;i<len;i+=1){\r\n        if(this.paths[i].m === -1) {\r\n            continue;\r\n        }\r\n        mask = this.elem.maskManager.viewData[this.paths[i].m];\r\n        path = this.paths[i].p;\r\n        if(forceRender || this.filterManager._mdf || mask.prop._mdf){\r\n            path.setAttribute('d',mask.lastPath);\r\n        }\r\n        if(forceRender || this.filterManager.effectElements[9].p._mdf || this.filterManager.effectElements[4].p._mdf || this.filterManager.effectElements[7].p._mdf || this.filterManager.effectElements[8].p._mdf || mask.prop._mdf){\r\n            var dasharrayValue;\r\n            if(this.filterManager.effectElements[7].p.v !== 0 || this.filterManager.effectElements[8].p.v !== 100){\r\n                var s = Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100;\r\n                var e = Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100;\r\n                var l = path.getTotalLength();\r\n                dasharrayValue = '0 0 0 ' + l*s + ' ';\r\n                var lineLength = l*(e-s);\r\n                var segment = 1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v/100;\r\n                var units = Math.floor(lineLength/segment);\r\n                var j;\r\n                for(j=0;j<units;j+=1){\r\n                    dasharrayValue += '1 ' + this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v/100 + ' ';\r\n                }\r\n                dasharrayValue += '0 ' + l*10 + ' 0 0';\r\n            } else {\r\n                dasharrayValue = '1 ' + this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v/100;\r\n            }\r\n            path.setAttribute('stroke-dasharray',dasharrayValue);\r\n        }\r\n    }\r\n    if(forceRender || this.filterManager.effectElements[4].p._mdf){\r\n        this.pathMasker.setAttribute('stroke-width',this.filterManager.effectElements[4].p.v*2);\r\n    }\r\n    \r\n    if(forceRender || this.filterManager.effectElements[6].p._mdf){\r\n        this.pathMasker.setAttribute('opacity',this.filterManager.effectElements[6].p.v);\r\n    }\r\n    if(this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2){\r\n        if(forceRender || this.filterManager.effectElements[3].p._mdf){\r\n            var color = this.filterManager.effectElements[3].p.v;\r\n            this.pathMasker.setAttribute('stroke','rgb('+bm_floor(color[0]*255)+','+bm_floor(color[1]*255)+','+bm_floor(color[2]*255)+')');\r\n        }\r\n    }\r\n};\r\nfunction SVGTritoneFilter(filter, filterManager){\r\n    this.filterManager = filterManager;\r\n    var feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type','matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters','linearRGB');\r\n    feColorMatrix.setAttribute('values','0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0');\r\n    feColorMatrix.setAttribute('result','f1');\r\n    filter.appendChild(feColorMatrix);\r\n    var feComponentTransfer = createNS('feComponentTransfer');\r\n    feComponentTransfer.setAttribute('color-interpolation-filters','sRGB');\r\n    filter.appendChild(feComponentTransfer);\r\n    this.matrixFilter = feComponentTransfer;\r\n    var feFuncR = createNS('feFuncR');\r\n    feFuncR.setAttribute('type','table');\r\n    feComponentTransfer.appendChild(feFuncR);\r\n    this.feFuncR = feFuncR;\r\n    var feFuncG = createNS('feFuncG');\r\n    feFuncG.setAttribute('type','table');\r\n    feComponentTransfer.appendChild(feFuncG);\r\n    this.feFuncG = feFuncG;\r\n    var feFuncB = createNS('feFuncB');\r\n    feFuncB.setAttribute('type','table');\r\n    feComponentTransfer.appendChild(feFuncB);\r\n    this.feFuncB = feFuncB;\r\n}\r\n\r\nSVGTritoneFilter.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        var color1 = this.filterManager.effectElements[0].p.v;\r\n        var color2 = this.filterManager.effectElements[1].p.v;\r\n        var color3 = this.filterManager.effectElements[2].p.v;\r\n        var tableR = color3[0] + ' ' + color2[0] + ' ' + color1[0];\r\n        var tableG = color3[1] + ' ' + color2[1] + ' ' + color1[1];\r\n        var tableB = color3[2] + ' ' + color2[2] + ' ' + color1[2];\r\n        this.feFuncR.setAttribute('tableValues', tableR);\r\n        this.feFuncG.setAttribute('tableValues', tableG);\r\n        this.feFuncB.setAttribute('tableValues', tableB);\r\n        //var opacity = this.filterManager.effectElements[2].p.v/100;\r\n        //this.matrixFilter.setAttribute('values',(colorWhite[0]- colorBlack[0])+' 0 0 0 '+ colorBlack[0] +' '+ (colorWhite[1]- colorBlack[1]) +' 0 0 0 '+ colorBlack[1] +' '+ (colorWhite[2]- colorBlack[2]) +' 0 0 0 '+ colorBlack[2] +' 0 0 0 ' + opacity + ' 0');\r\n    }\r\n};\r\nfunction SVGProLevelsFilter(filter, filterManager){\r\n    this.filterManager = filterManager;\r\n    var effectElements = this.filterManager.effectElements;\r\n    var feComponentTransfer = createNS('feComponentTransfer');\r\n    var feFuncR, feFuncG, feFuncB;\r\n    \r\n    if(effectElements[10].p.k || effectElements[10].p.v !== 0 || effectElements[11].p.k || effectElements[11].p.v !== 1 || effectElements[12].p.k || effectElements[12].p.v !== 1 || effectElements[13].p.k || effectElements[13].p.v !== 0 || effectElements[14].p.k || effectElements[14].p.v !== 1){\r\n        this.feFuncR = this.createFeFunc('feFuncR', feComponentTransfer);\r\n    }\r\n    if(effectElements[17].p.k || effectElements[17].p.v !== 0 || effectElements[18].p.k || effectElements[18].p.v !== 1 || effectElements[19].p.k || effectElements[19].p.v !== 1 || effectElements[20].p.k || effectElements[20].p.v !== 0 || effectElements[21].p.k || effectElements[21].p.v !== 1){\r\n        this.feFuncG = this.createFeFunc('feFuncG', feComponentTransfer);\r\n    }\r\n    if(effectElements[24].p.k || effectElements[24].p.v !== 0 || effectElements[25].p.k || effectElements[25].p.v !== 1 || effectElements[26].p.k || effectElements[26].p.v !== 1 || effectElements[27].p.k || effectElements[27].p.v !== 0 || effectElements[28].p.k || effectElements[28].p.v !== 1){\r\n        this.feFuncB = this.createFeFunc('feFuncB', feComponentTransfer);\r\n    }\r\n    if(effectElements[31].p.k || effectElements[31].p.v !== 0 || effectElements[32].p.k || effectElements[32].p.v !== 1 || effectElements[33].p.k || effectElements[33].p.v !== 1 || effectElements[34].p.k || effectElements[34].p.v !== 0 || effectElements[35].p.k || effectElements[35].p.v !== 1){\r\n        this.feFuncA = this.createFeFunc('feFuncA', feComponentTransfer);\r\n    }\r\n    \r\n    if(this.feFuncR || this.feFuncG || this.feFuncB || this.feFuncA){\r\n        feComponentTransfer.setAttribute('color-interpolation-filters','sRGB');\r\n        filter.appendChild(feComponentTransfer);\r\n        feComponentTransfer = createNS('feComponentTransfer');\r\n    }\r\n\r\n    if(effectElements[3].p.k || effectElements[3].p.v !== 0 || effectElements[4].p.k || effectElements[4].p.v !== 1 || effectElements[5].p.k || effectElements[5].p.v !== 1 || effectElements[6].p.k || effectElements[6].p.v !== 0 || effectElements[7].p.k || effectElements[7].p.v !== 1){\r\n\r\n        feComponentTransfer.setAttribute('color-interpolation-filters','sRGB');\r\n        filter.appendChild(feComponentTransfer);\r\n        this.feFuncRComposed = this.createFeFunc('feFuncR', feComponentTransfer);\r\n        this.feFuncGComposed = this.createFeFunc('feFuncG', feComponentTransfer);\r\n        this.feFuncBComposed = this.createFeFunc('feFuncB', feComponentTransfer);\r\n    }\r\n}\r\n\r\nSVGProLevelsFilter.prototype.createFeFunc = function(type, feComponentTransfer) {\r\n    var feFunc = createNS(type);\r\n    feFunc.setAttribute('type','table');\r\n    feComponentTransfer.appendChild(feFunc);\r\n    return feFunc;\r\n};\r\n\r\nSVGProLevelsFilter.prototype.getTableValue = function(inputBlack, inputWhite, gamma, outputBlack, outputWhite) {\r\n    var cnt = 0;\r\n    var segments = 256;\r\n    var perc;\r\n    var min = Math.min(inputBlack, inputWhite);\r\n    var max = Math.max(inputBlack, inputWhite);\r\n    var table = Array.call(null,{length:segments});\r\n    var colorValue;\r\n    var pos = 0;\r\n    var outputDelta = outputWhite - outputBlack; \r\n    var inputDelta = inputWhite - inputBlack; \r\n    while(cnt <= 256) {\r\n        perc = cnt/256;\r\n        if(perc <= min){\r\n            colorValue = inputDelta < 0 ? outputWhite : outputBlack;\r\n        } else if(perc >= max){\r\n            colorValue = inputDelta < 0 ? outputBlack : outputWhite;\r\n        } else {\r\n            colorValue = (outputBlack + outputDelta * Math.pow((perc - inputBlack) / inputDelta, 1 / gamma));\r\n        }\r\n        table[pos++] = colorValue;\r\n        cnt += 256/(segments-1);\r\n    }\r\n    return table.join(' ');\r\n};\r\n\r\nSVGProLevelsFilter.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        var val, cnt, perc, bezier;\r\n        var effectElements = this.filterManager.effectElements;\r\n        if(this.feFuncRComposed && (forceRender || effectElements[3].p._mdf || effectElements[4].p._mdf || effectElements[5].p._mdf || effectElements[6].p._mdf || effectElements[7].p._mdf)){\r\n            val = this.getTableValue(effectElements[3].p.v,effectElements[4].p.v,effectElements[5].p.v,effectElements[6].p.v,effectElements[7].p.v);\r\n            this.feFuncRComposed.setAttribute('tableValues',val);\r\n            this.feFuncGComposed.setAttribute('tableValues',val);\r\n            this.feFuncBComposed.setAttribute('tableValues',val);\r\n        }\r\n\r\n\r\n        if(this.feFuncR && (forceRender || effectElements[10].p._mdf || effectElements[11].p._mdf || effectElements[12].p._mdf || effectElements[13].p._mdf || effectElements[14].p._mdf)){\r\n            val = this.getTableValue(effectElements[10].p.v,effectElements[11].p.v,effectElements[12].p.v,effectElements[13].p.v,effectElements[14].p.v);\r\n            this.feFuncR.setAttribute('tableValues',val);\r\n        }\r\n\r\n        if(this.feFuncG && (forceRender || effectElements[17].p._mdf || effectElements[18].p._mdf || effectElements[19].p._mdf || effectElements[20].p._mdf || effectElements[21].p._mdf)){\r\n            val = this.getTableValue(effectElements[17].p.v,effectElements[18].p.v,effectElements[19].p.v,effectElements[20].p.v,effectElements[21].p.v);\r\n            this.feFuncG.setAttribute('tableValues',val);\r\n        }\r\n\r\n        if(this.feFuncB && (forceRender || effectElements[24].p._mdf || effectElements[25].p._mdf || effectElements[26].p._mdf || effectElements[27].p._mdf || effectElements[28].p._mdf)){\r\n            val = this.getTableValue(effectElements[24].p.v,effectElements[25].p.v,effectElements[26].p.v,effectElements[27].p.v,effectElements[28].p.v);\r\n            this.feFuncB.setAttribute('tableValues',val);\r\n        }\r\n\r\n        if(this.feFuncA && (forceRender || effectElements[31].p._mdf || effectElements[32].p._mdf || effectElements[33].p._mdf || effectElements[34].p._mdf || effectElements[35].p._mdf)){\r\n            val = this.getTableValue(effectElements[31].p.v,effectElements[32].p.v,effectElements[33].p.v,effectElements[34].p.v,effectElements[35].p.v);\r\n            this.feFuncA.setAttribute('tableValues',val);\r\n        }\r\n        \r\n    }\r\n};\r\nfunction SVGDropShadowEffect(filter, filterManager){\r\n    filter.setAttribute('x','-100%');\r\n    filter.setAttribute('y','-100%');\r\n    filter.setAttribute('width','400%');\r\n    filter.setAttribute('height','400%');\r\n    this.filterManager = filterManager;\r\n\r\n    var feGaussianBlur = createNS('feGaussianBlur');\r\n    feGaussianBlur.setAttribute('in','SourceAlpha');\r\n    feGaussianBlur.setAttribute('result','drop_shadow_1');\r\n    feGaussianBlur.setAttribute('stdDeviation','0');\r\n    this.feGaussianBlur = feGaussianBlur;\r\n    filter.appendChild(feGaussianBlur);\r\n\r\n    var feOffset = createNS('feOffset');\r\n    feOffset.setAttribute('dx','25');\r\n    feOffset.setAttribute('dy','0');\r\n    feOffset.setAttribute('in','drop_shadow_1');\r\n    feOffset.setAttribute('result','drop_shadow_2');\r\n    this.feOffset = feOffset;\r\n    filter.appendChild(feOffset);\r\n    var feFlood = createNS('feFlood');\r\n    feFlood.setAttribute('flood-color','#00ff00');\r\n    feFlood.setAttribute('flood-opacity','1');\r\n    feFlood.setAttribute('result','drop_shadow_3');\r\n    this.feFlood = feFlood;\r\n    filter.appendChild(feFlood);\r\n\r\n    var feComposite = createNS('feComposite');\r\n    feComposite.setAttribute('in','drop_shadow_3');\r\n    feComposite.setAttribute('in2','drop_shadow_2');\r\n    feComposite.setAttribute('operator','in');\r\n    feComposite.setAttribute('result','drop_shadow_4');\r\n    filter.appendChild(feComposite);\r\n\r\n\r\n    var feMerge = createNS('feMerge');\r\n    filter.appendChild(feMerge);\r\n    var feMergeNode;\r\n    feMergeNode = createNS('feMergeNode');\r\n    feMerge.appendChild(feMergeNode);\r\n    feMergeNode = createNS('feMergeNode');\r\n    feMergeNode.setAttribute('in','SourceGraphic');\r\n    this.feMergeNode = feMergeNode;\r\n    this.feMerge = feMerge;\r\n    this.originalNodeAdded = false;\r\n    feMerge.appendChild(feMergeNode);\r\n}\r\n\r\nSVGDropShadowEffect.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        if(forceRender || this.filterManager.effectElements[4].p._mdf){\r\n            this.feGaussianBlur.setAttribute('stdDeviation', this.filterManager.effectElements[4].p.v / 4);\r\n        }\r\n        if(forceRender || this.filterManager.effectElements[0].p._mdf){\r\n            var col = this.filterManager.effectElements[0].p.v;\r\n            this.feFlood.setAttribute('flood-color',rgbToHex(Math.round(col[0]*255),Math.round(col[1]*255),Math.round(col[2]*255)));\r\n        }\r\n        if(forceRender || this.filterManager.effectElements[1].p._mdf){\r\n            this.feFlood.setAttribute('flood-opacity',this.filterManager.effectElements[1].p.v/255);\r\n        }\r\n        if(forceRender || this.filterManager.effectElements[2].p._mdf || this.filterManager.effectElements[3].p._mdf){\r\n            var distance = this.filterManager.effectElements[3].p.v;\r\n            var angle = (this.filterManager.effectElements[2].p.v - 90) * degToRads;\r\n            var x = distance * Math.cos(angle);\r\n            var y = distance * Math.sin(angle);\r\n            this.feOffset.setAttribute('dx', x);\r\n            this.feOffset.setAttribute('dy', y);\r\n        }\r\n        /*if(forceRender || this.filterManager.effectElements[5].p._mdf){\r\n            if(this.filterManager.effectElements[5].p.v === 1 && this.originalNodeAdded) {\r\n                this.feMerge.removeChild(this.feMergeNode);\r\n                this.originalNodeAdded = false;\r\n            } else if(this.filterManager.effectElements[5].p.v === 0 && !this.originalNodeAdded) {\r\n                this.feMerge.appendChild(this.feMergeNode);\r\n                this.originalNodeAdded = true;\r\n            }\r\n        }*/\r\n    }\r\n};\r\nvar _svgMatteSymbols = [];\r\n\r\nfunction SVGMatte3Effect(filterElem, filterManager, elem){\r\n    this.initialized = false;\r\n    this.filterManager = filterManager;\r\n    this.filterElem = filterElem;\r\n    this.elem = elem;\r\n    elem.matteElement = createNS('g');\r\n    elem.matteElement.appendChild(elem.layerElement);\r\n    elem.matteElement.appendChild(elem.transformedElement);\r\n    elem.baseElement = elem.matteElement;\r\n}\r\n\r\nSVGMatte3Effect.prototype.findSymbol = function(mask) {\r\n    var i = 0, len = _svgMatteSymbols.length;\r\n    while(i < len) {\r\n        if(_svgMatteSymbols[i] === mask) {\r\n            return _svgMatteSymbols[i];\r\n        }\r\n        i += 1;\r\n    }\r\n    return null;\r\n};\r\n\r\nSVGMatte3Effect.prototype.replaceInParent = function(mask, symbolId) {\r\n    var parentNode = mask.layerElement.parentNode;\r\n    if(!parentNode) {\r\n        return;\r\n    }\r\n    var children = parentNode.children;\r\n    var i = 0, len = children.length;\r\n    while (i < len) {\r\n        if (children[i] === mask.layerElement) {\r\n            break;\r\n        }\r\n        i += 1;\r\n    }\r\n    var nextChild;\r\n    if (i <= len - 2) {\r\n        nextChild = children[i + 1];\r\n    }\r\n    var useElem = createNS('use');\r\n    useElem.setAttribute('href', '#' + symbolId);\r\n    if(nextChild) {\r\n        parentNode.insertBefore(useElem, nextChild);\r\n    } else {\r\n        parentNode.appendChild(useElem);\r\n    }\r\n};\r\n\r\nSVGMatte3Effect.prototype.setElementAsMask = function(elem, mask) {\r\n    if(!this.findSymbol(mask)) {\r\n        var symbolId = createElementID();\r\n        var masker = createNS('mask');\r\n        masker.setAttribute('id', mask.layerId);\r\n        masker.setAttribute('mask-type', 'alpha');\r\n        _svgMatteSymbols.push(mask);\r\n        var defs = elem.globalData.defs;\r\n        defs.appendChild(masker);\r\n        var symbol = createNS('symbol');\r\n        symbol.setAttribute('id', symbolId);\r\n        this.replaceInParent(mask, symbolId);\r\n        symbol.appendChild(mask.layerElement);\r\n        defs.appendChild(symbol);\r\n        var useElem = createNS('use');\r\n        useElem.setAttribute('href', '#' + symbolId);\r\n        masker.appendChild(useElem);\r\n        mask.data.hd = false;\r\n        mask.show();\r\n    }\r\n    elem.setMatte(mask.layerId);\r\n};\r\n\r\nSVGMatte3Effect.prototype.initialize = function() {\r\n    var ind = this.filterManager.effectElements[0].p.v;\r\n    var elements = this.elem.comp.elements;\r\n    var i = 0, len = elements.length;\r\n    while (i < len) {\r\n    \tif (elements[i] && elements[i].data.ind === ind) {\r\n    \t\tthis.setElementAsMask(this.elem, elements[i]);\r\n    \t}\r\n    \ti += 1;\r\n    }\r\n    this.initialized = true;\r\n};\r\n\r\nSVGMatte3Effect.prototype.renderFrame = function() {\r\n\tif(!this.initialized) {\r\n\t\tthis.initialize();\r\n\t}\r\n};\r\nfunction SVGEffects(elem){\r\n    var i, len = elem.data.ef ? elem.data.ef.length : 0;\r\n    var filId = createElementID();\r\n    var fil = filtersFactory.createFilter(filId);\r\n    var count = 0;\r\n    this.filters = [];\r\n    var filterManager;\r\n    for(i=0;i<len;i+=1){\r\n        filterManager = null;\r\n        if(elem.data.ef[i].ty === 20){\r\n            count += 1;\r\n            filterManager = new SVGTintFilter(fil, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 21){\r\n            count += 1;\r\n            filterManager = new SVGFillFilter(fil, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 22){\r\n            filterManager = new SVGStrokeEffect(elem, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 23){\r\n            count += 1;\r\n            filterManager = new SVGTritoneFilter(fil, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 24){\r\n            count += 1;\r\n            filterManager = new SVGProLevelsFilter(fil, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 25){\r\n            count += 1;\r\n            filterManager = new SVGDropShadowEffect(fil, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 28){\r\n            //count += 1;\r\n            filterManager = new SVGMatte3Effect(fil, elem.effectsManager.effectElements[i], elem);\r\n        }else if(elem.data.ef[i].ty === 29){\r\n            count += 1;\r\n            filterManager = new SVGGaussianBlurEffect(fil, elem.effectsManager.effectElements[i]);\r\n        }\r\n        if(filterManager) {\r\n            this.filters.push(filterManager);\r\n        }\r\n    }\r\n    if(count){\r\n        elem.globalData.defs.appendChild(fil);\r\n        elem.layerElement.setAttribute('filter','url(' + locationHref + '#'+filId+')');\r\n    }\r\n    if (this.filters.length) {\r\n        elem.addRenderableComponent(this);\r\n    }\r\n}\r\n\r\nSVGEffects.prototype.renderFrame = function(_isFirstFrame){\r\n    var i, len = this.filters.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.filters[i].renderFrame(_isFirstFrame);\r\n    }\r\n};\r\nvar animationManager = (function(){\r\n    var moduleOb = {};\r\n    var registeredAnimations = [];\r\n    var initTime = 0;\r\n    var len = 0;\r\n    var playingAnimationsNum = 0;\r\n    var _stopped = true;\r\n    var _isFrozen = false;\r\n\r\n    function removeElement(ev){\r\n        var i = 0;\r\n        var animItem = ev.target;\r\n        while(i<len) {\r\n            if (registeredAnimations[i].animation === animItem) {\r\n                registeredAnimations.splice(i, 1);\r\n                i -= 1;\r\n                len -= 1;\r\n                if(!animItem.isPaused){\r\n                    subtractPlayingCount();\r\n                }\r\n            }\r\n            i += 1;\r\n        }\r\n    }\r\n\r\n    function registerAnimation(element, animationData){\r\n        if(!element){\r\n            return null;\r\n        }\r\n        var i=0;\r\n        while(i<len){\r\n            if(registeredAnimations[i].elem == element && registeredAnimations[i].elem !== null ){\r\n                return registeredAnimations[i].animation;\r\n            }\r\n            i+=1;\r\n        }\r\n        var animItem = new AnimationItem();\r\n        setupAnimation(animItem, element);\r\n        animItem.setData(element, animationData);\r\n        return animItem;\r\n    }\r\n\r\n    function getRegisteredAnimations() {\r\n        var i, len = registeredAnimations.length;\r\n        var animations = [];\r\n        for(i = 0; i < len; i += 1) {\r\n            animations.push(registeredAnimations[i].animation);\r\n        }\r\n        return animations;\r\n    }\r\n\r\n    function addPlayingCount(){\r\n        playingAnimationsNum += 1;\r\n        activate();\r\n    }\r\n\r\n    function subtractPlayingCount(){\r\n        playingAnimationsNum -= 1;\r\n    }\r\n\r\n    function setupAnimation(animItem, element){\r\n        animItem.addEventListener('destroy',removeElement);\r\n        animItem.addEventListener('_active',addPlayingCount);\r\n        animItem.addEventListener('_idle',subtractPlayingCount);\r\n        registeredAnimations.push({elem: element,animation:animItem});\r\n        len += 1;\r\n    }\r\n\r\n    function loadAnimation(params){\r\n        var animItem = new AnimationItem();\r\n        setupAnimation(animItem, null);\r\n        animItem.setParams(params);\r\n        return animItem;\r\n    }\r\n\r\n\r\n    function setSpeed(val,animation){\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.setSpeed(val, animation);\r\n        }\r\n    }\r\n\r\n    function setDirection(val, animation){\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.setDirection(val, animation);\r\n        }\r\n    }\r\n\r\n    function play(animation){\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.play(animation);\r\n        }\r\n    }\r\n    function resume(nowTime) {\r\n        var elapsedTime = nowTime - initTime;\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.advanceTime(elapsedTime);\r\n        }\r\n        initTime = nowTime;\r\n        if(playingAnimationsNum && !_isFrozen) {\r\n            window.requestAnimationFrame(resume);\r\n        } else {\r\n            _stopped = true;\r\n        }\r\n    }\r\n\r\n    function first(nowTime){\r\n        initTime = nowTime;\r\n        window.requestAnimationFrame(resume);\r\n    }\r\n\r\n    function pause(animation) {\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.pause(animation);\r\n        }\r\n    }\r\n\r\n    function goToAndStop(value,isFrame,animation) {\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.goToAndStop(value,isFrame,animation);\r\n        }\r\n    }\r\n\r\n    function stop(animation) {\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.stop(animation);\r\n        }\r\n    }\r\n\r\n    function togglePause(animation) {\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.togglePause(animation);\r\n        }\r\n    }\r\n\r\n    function destroy(animation) {\r\n        var i;\r\n        for(i=(len-1);i>=0;i-=1){\r\n            registeredAnimations[i].animation.destroy(animation);\r\n        }\r\n    }\r\n\r\n    function searchAnimations(animationData, standalone, renderer){\r\n        var animElements = [].concat([].slice.call(document.getElementsByClassName('lottie')),\r\n                  [].slice.call(document.getElementsByClassName('bodymovin')));\r\n        var i, len = animElements.length;\r\n        for(i=0;i<len;i+=1){\r\n            if(renderer){\r\n                animElements[i].setAttribute('data-bm-type',renderer);\r\n            }\r\n            registerAnimation(animElements[i], animationData);\r\n        }\r\n        if(standalone && len === 0){\r\n            if(!renderer){\r\n                renderer = 'svg';\r\n            }\r\n            var body = document.getElementsByTagName('body')[0];\r\n            body.innerHTML = '';\r\n            var div = createTag('div');\r\n            div.style.width = '100%';\r\n            div.style.height = '100%';\r\n            div.setAttribute('data-bm-type',renderer);\r\n            body.appendChild(div);\r\n            registerAnimation(div, animationData);\r\n        }\r\n    }\r\n\r\n    function resize(){\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.resize();\r\n        }\r\n    }\r\n\r\n    function activate(){\r\n        if(!_isFrozen && playingAnimationsNum){\r\n            if(_stopped) {\r\n                window.requestAnimationFrame(first);\r\n                _stopped = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    function freeze() {\r\n        _isFrozen = true;\r\n    }\r\n\r\n    function unfreeze() {\r\n        _isFrozen = false;\r\n        activate();\r\n    }\r\n\r\n    moduleOb.registerAnimation = registerAnimation;\r\n    moduleOb.loadAnimation = loadAnimation;\r\n    moduleOb.setSpeed = setSpeed;\r\n    moduleOb.setDirection = setDirection;\r\n    moduleOb.play = play;\r\n    moduleOb.pause = pause;\r\n    moduleOb.stop = stop;\r\n    moduleOb.togglePause = togglePause;\r\n    moduleOb.searchAnimations = searchAnimations;\r\n    moduleOb.resize = resize;\r\n    //moduleOb.start = start;\r\n    moduleOb.goToAndStop = goToAndStop;\r\n    moduleOb.destroy = destroy;\r\n    moduleOb.freeze = freeze;\r\n    moduleOb.unfreeze = unfreeze;\r\n    moduleOb.getRegisteredAnimations = getRegisteredAnimations;\r\n    return moduleOb;\r\n}());\r\n\r\nvar AnimationItem = function () {\r\n    this._cbs = [];\r\n    this.name = '';\r\n    this.path = '';\r\n    this.isLoaded = false;\r\n    this.currentFrame = 0;\r\n    this.currentRawFrame = 0;\r\n    this.totalFrames = 0;\r\n    this.frameRate = 0;\r\n    this.frameMult = 0;\r\n    this.playSpeed = 1;\r\n    this.playDirection = 1;\r\n    this.playCount = 0;\r\n    this.animationData = {};\r\n    this.assets = [];\r\n    this.isPaused = true;\r\n    this.autoplay = false;\r\n    this.loop = true;\r\n    this.renderer = null;\r\n    this.animationID = createElementID();\r\n    this.assetsPath = '';\r\n    this.timeCompleted = 0;\r\n    this.segmentPos = 0;\r\n    this.subframeEnabled = subframeEnabled;\r\n    this.segments = [];\r\n    this._idle = true;\r\n    this._completedLoop = false;\r\n    this.projectInterface = ProjectInterface();\r\n    this.imagePreloader = new ImagePreloader();\r\n};\r\n\r\nextendPrototype([BaseEvent], AnimationItem);\r\n\r\nAnimationItem.prototype.setParams = function(params) {\r\n    if(params.context){\r\n        this.context = params.context;\r\n    }\r\n    if(params.wrapper || params.container){\r\n        this.wrapper = params.wrapper || params.container;\r\n    }\r\n    var animType = params.animType ? params.animType : params.renderer ? params.renderer : 'svg';\r\n    switch(animType){\r\n        case 'canvas':\r\n            this.renderer = new CanvasRenderer(this, params.rendererSettings);\r\n            break;\r\n        case 'svg':\r\n            this.renderer = new SVGRenderer(this, params.rendererSettings);\r\n            break;\r\n        default:\r\n            this.renderer = new HybridRenderer(this, params.rendererSettings);\r\n            break;\r\n    }\r\n    this.renderer.setProjectInterface(this.projectInterface);\r\n    this.animType = animType;\r\n\r\n    if(params.loop === '' || params.loop === null){\r\n    }else if(params.loop === false){\r\n        this.loop = false;\r\n    }else if(params.loop === true){\r\n        this.loop = true;\r\n    }else{\r\n        this.loop = parseInt(params.loop);\r\n    }\r\n    this.autoplay = 'autoplay' in params ? params.autoplay : true;\r\n    this.name = params.name ? params.name :  '';\r\n    this.autoloadSegments = params.hasOwnProperty('autoloadSegments') ? params.autoloadSegments :  true;\r\n    this.assetsPath = params.assetsPath;\r\n    if (params.animationData) {\r\n        this.configAnimation(params.animationData);\r\n    } else if(params.path){\r\n\r\n        if( params.path.lastIndexOf('\\\\') !== -1){\r\n            this.path = params.path.substr(0,params.path.lastIndexOf('\\\\')+1);\r\n        } else {\r\n            this.path = params.path.substr(0,params.path.lastIndexOf('/')+1);\r\n        }\r\n        this.fileName = params.path.substr(params.path.lastIndexOf('/')+1);\r\n        this.fileName = this.fileName.substr(0,this.fileName.lastIndexOf('.json'));\r\n\r\n        assetLoader.load(params.path, this.configAnimation.bind(this), function() {\r\n            this.trigger('data_failed');\r\n        }.bind(this));\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.setData = function (wrapper, animationData) {\r\n    var params = {\r\n        wrapper: wrapper,\r\n        animationData: animationData ? (typeof animationData  === \"object\") ? animationData : JSON.parse(animationData) : null\r\n    };\r\n    var wrapperAttributes = wrapper.attributes;\r\n\r\n    params.path = wrapperAttributes.getNamedItem('data-animation-path') ? wrapperAttributes.getNamedItem('data-animation-path').value : wrapperAttributes.getNamedItem('data-bm-path') ? wrapperAttributes.getNamedItem('data-bm-path').value :  wrapperAttributes.getNamedItem('bm-path') ? wrapperAttributes.getNamedItem('bm-path').value : '';\r\n    params.animType = wrapperAttributes.getNamedItem('data-anim-type') ? wrapperAttributes.getNamedItem('data-anim-type').value : wrapperAttributes.getNamedItem('data-bm-type') ? wrapperAttributes.getNamedItem('data-bm-type').value : wrapperAttributes.getNamedItem('bm-type') ? wrapperAttributes.getNamedItem('bm-type').value :  wrapperAttributes.getNamedItem('data-bm-renderer') ? wrapperAttributes.getNamedItem('data-bm-renderer').value : wrapperAttributes.getNamedItem('bm-renderer') ? wrapperAttributes.getNamedItem('bm-renderer').value : 'canvas';\r\n\r\n    var loop = wrapperAttributes.getNamedItem('data-anim-loop') ? wrapperAttributes.getNamedItem('data-anim-loop').value :  wrapperAttributes.getNamedItem('data-bm-loop') ? wrapperAttributes.getNamedItem('data-bm-loop').value :  wrapperAttributes.getNamedItem('bm-loop') ? wrapperAttributes.getNamedItem('bm-loop').value : '';\r\n    if(loop === ''){\r\n    }else if(loop === 'false'){\r\n        params.loop = false;\r\n    }else if(loop === 'true'){\r\n        params.loop = true;\r\n    }else{\r\n        params.loop = parseInt(loop);\r\n    }\r\n    var autoplay = wrapperAttributes.getNamedItem('data-anim-autoplay') ? wrapperAttributes.getNamedItem('data-anim-autoplay').value :  wrapperAttributes.getNamedItem('data-bm-autoplay') ? wrapperAttributes.getNamedItem('data-bm-autoplay').value :  wrapperAttributes.getNamedItem('bm-autoplay') ? wrapperAttributes.getNamedItem('bm-autoplay').value : true;\r\n    params.autoplay = autoplay !== \"false\";\r\n\r\n    params.name = wrapperAttributes.getNamedItem('data-name') ? wrapperAttributes.getNamedItem('data-name').value :  wrapperAttributes.getNamedItem('data-bm-name') ? wrapperAttributes.getNamedItem('data-bm-name').value : wrapperAttributes.getNamedItem('bm-name') ? wrapperAttributes.getNamedItem('bm-name').value :  '';\r\n    var prerender = wrapperAttributes.getNamedItem('data-anim-prerender') ? wrapperAttributes.getNamedItem('data-anim-prerender').value :  wrapperAttributes.getNamedItem('data-bm-prerender') ? wrapperAttributes.getNamedItem('data-bm-prerender').value :  wrapperAttributes.getNamedItem('bm-prerender') ? wrapperAttributes.getNamedItem('bm-prerender').value : '';\r\n\r\n    if(prerender === 'false'){\r\n        params.prerender = false;\r\n    }\r\n    this.setParams(params);\r\n};\r\n\r\nAnimationItem.prototype.includeLayers = function(data) {\r\n    if(data.op > this.animationData.op){\r\n        this.animationData.op = data.op;\r\n        this.totalFrames = Math.floor(data.op - this.animationData.ip);\r\n    }\r\n    var layers = this.animationData.layers;\r\n    var i, len = layers.length;\r\n    var newLayers = data.layers;\r\n    var j, jLen = newLayers.length;\r\n    for(j=0;j<jLen;j+=1){\r\n        i = 0;\r\n        while(i<len){\r\n            if(layers[i].id == newLayers[j].id){\r\n                layers[i] = newLayers[j];\r\n                break;\r\n            }\r\n            i += 1;\r\n        }\r\n    }\r\n    if(data.chars || data.fonts){\r\n        this.renderer.globalData.fontManager.addChars(data.chars);\r\n        this.renderer.globalData.fontManager.addFonts(data.fonts, this.renderer.globalData.defs);\r\n    }\r\n    if(data.assets){\r\n        len = data.assets.length;\r\n        for(i = 0; i < len; i += 1){\r\n            this.animationData.assets.push(data.assets[i]);\r\n        }\r\n    }\r\n    this.animationData.__complete = false;\r\n    dataManager.completeData(this.animationData,this.renderer.globalData.fontManager);\r\n    this.renderer.includeLayers(data.layers);\r\n    if(expressionsPlugin){\r\n        expressionsPlugin.initExpressions(this);\r\n    }\r\n    this.loadNextSegment();\r\n};\r\n\r\nAnimationItem.prototype.loadNextSegment = function() {\r\n    var segments = this.animationData.segments;\r\n    if(!segments || segments.length === 0 || !this.autoloadSegments){\r\n        this.trigger('data_ready');\r\n        this.timeCompleted = this.totalFrames;\r\n        return;\r\n    }\r\n    var segment = segments.shift();\r\n    this.timeCompleted = segment.time * this.frameRate;\r\n    var segmentPath = this.path+this.fileName+'_' + this.segmentPos + '.json';\r\n    this.segmentPos += 1;\r\n    assetLoader.load(segmentPath, this.includeLayers.bind(this), function() {\r\n        this.trigger('data_failed');\r\n    }.bind(this));\r\n};\r\n\r\nAnimationItem.prototype.loadSegments = function() {\r\n    var segments = this.animationData.segments;\r\n    if(!segments) {\r\n        this.timeCompleted = this.totalFrames;\r\n    }\r\n    this.loadNextSegment();\r\n};\r\n\r\nAnimationItem.prototype.imagesLoaded = function() {\r\n    this.trigger('loaded_images');\r\n    this.checkLoaded()\r\n}\r\n\r\nAnimationItem.prototype.preloadImages = function() {\r\n    this.imagePreloader.setAssetsPath(this.assetsPath);\r\n    this.imagePreloader.setPath(this.path);\r\n    this.imagePreloader.loadAssets(this.animationData.assets, this.imagesLoaded.bind(this));\r\n}\r\n\r\nAnimationItem.prototype.configAnimation = function (animData) {\r\n    if(!this.renderer){\r\n        return;\r\n    }\r\n    try {\r\n        this.animationData = animData;\r\n        this.totalFrames = Math.floor(this.animationData.op - this.animationData.ip);\r\n        this.renderer.configAnimation(animData);\r\n        if(!animData.assets){\r\n            animData.assets = [];\r\n        }\r\n\r\n        this.assets = this.animationData.assets;\r\n        this.frameRate = this.animationData.fr;\r\n        this.firstFrame = Math.round(this.animationData.ip);\r\n        this.frameMult = this.animationData.fr / 1000;\r\n        this.renderer.searchExtraCompositions(animData.assets);\r\n        this.trigger('config_ready');\r\n        this.preloadImages();\r\n        this.loadSegments();\r\n        this.updaFrameModifier();\r\n        this.waitForFontsLoaded();\r\n    } catch(error) {\r\n        this.triggerConfigError(error);\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.waitForFontsLoaded = function(){\r\n    if(!this.renderer) {\r\n        return;\r\n    }\r\n    if(this.renderer.globalData.fontManager.loaded()){\r\n        this.checkLoaded();\r\n    }else{\r\n        setTimeout(this.waitForFontsLoaded.bind(this),20);\r\n    }\r\n}\r\n\r\nAnimationItem.prototype.checkLoaded = function () {\r\n    if (!this.isLoaded && this.renderer.globalData.fontManager.loaded() && (this.imagePreloader.loaded() || this.renderer.rendererType !== 'canvas')) {\r\n        this.isLoaded = true;\r\n        dataManager.completeData(this.animationData, this.renderer.globalData.fontManager);\r\n        if(expressionsPlugin){\r\n            expressionsPlugin.initExpressions(this);\r\n        }\r\n        this.renderer.initItems();\r\n        setTimeout(function() {\r\n            this.trigger('DOMLoaded');\r\n        }.bind(this), 0);\r\n        this.gotoFrame();\r\n        if(this.autoplay){\r\n            this.play();\r\n        }\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.resize = function () {\r\n    this.renderer.updateContainerSize();\r\n};\r\n\r\nAnimationItem.prototype.setSubframe = function(flag){\r\n    this.subframeEnabled = flag ? true : false;\r\n};\r\n\r\nAnimationItem.prototype.gotoFrame = function () {\r\n    this.currentFrame = this.subframeEnabled ? this.currentRawFrame : ~~this.currentRawFrame;\r\n\r\n    if(this.timeCompleted !== this.totalFrames && this.currentFrame > this.timeCompleted){\r\n        this.currentFrame = this.timeCompleted;\r\n    }\r\n    this.trigger('enterFrame');\r\n    this.renderFrame();\r\n};\r\n\r\nAnimationItem.prototype.renderFrame = function () {\r\n    if(this.isLoaded === false){\r\n        return;\r\n    }\r\n    try {\r\n        this.renderer.renderFrame(this.currentFrame + this.firstFrame);\r\n    } catch(error) {\r\n        this.triggerRenderFrameError(error);\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.play = function (name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    if(this.isPaused === true){\r\n        this.isPaused = false;\r\n        if(this._idle){\r\n            this._idle = false;\r\n            this.trigger('_active');\r\n        }\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.pause = function (name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    if(this.isPaused === false){\r\n        this.isPaused = true;\r\n        this._idle = true;\r\n        this.trigger('_idle');\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.togglePause = function (name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    if(this.isPaused === true){\r\n        this.play();\r\n    }else{\r\n        this.pause();\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.stop = function (name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    this.pause();\r\n    this.playCount = 0;\r\n    this._completedLoop = false;\r\n    this.setCurrentRawFrameValue(0);\r\n};\r\n\r\nAnimationItem.prototype.goToAndStop = function (value, isFrame, name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    if(isFrame){\r\n        this.setCurrentRawFrameValue(value);\r\n    }else{\r\n        this.setCurrentRawFrameValue(value * this.frameModifier);\r\n    }\r\n    this.pause();\r\n};\r\n\r\nAnimationItem.prototype.goToAndPlay = function (value, isFrame, name) {\r\n    this.goToAndStop(value, isFrame, name);\r\n    this.play();\r\n};\r\n\r\nAnimationItem.prototype.advanceTime = function (value) {\r\n    if (this.isPaused === true || this.isLoaded === false) {\r\n        return;\r\n    }\r\n    var nextValue = this.currentRawFrame + value * this.frameModifier;\r\n    var _isComplete = false;\r\n    // Checking if nextValue > totalFrames - 1 for addressing non looping and looping animations.\r\n    // If animation won't loop, it should stop at totalFrames - 1. If it will loop it should complete the last frame and then loop.\r\n    if (nextValue >= this.totalFrames - 1 && this.frameModifier > 0) {\r\n        if (!this.loop || this.playCount === this.loop) {\r\n            if (!this.checkSegments(nextValue >  this.totalFrames ? nextValue % this.totalFrames : 0)) {\r\n                _isComplete = true;\r\n                nextValue = this.totalFrames - 1;\r\n            }\r\n        } else if (nextValue >= this.totalFrames) {\r\n            this.playCount += 1;\r\n            if (!this.checkSegments(nextValue % this.totalFrames)) {\r\n                this.setCurrentRawFrameValue(nextValue % this.totalFrames);\r\n                this._completedLoop = true;\r\n                this.trigger('loopComplete');\r\n            }\r\n        } else {\r\n            this.setCurrentRawFrameValue(nextValue);\r\n        }\r\n    } else if(nextValue < 0) {\r\n        if (!this.checkSegments(nextValue % this.totalFrames)) {\r\n            if (this.loop && !(this.playCount-- <= 0 && this.loop !== true)) {\r\n                this.setCurrentRawFrameValue(this.totalFrames + (nextValue % this.totalFrames));\r\n                if(!this._completedLoop) {\r\n                    this._completedLoop = true;\r\n                } else {\r\n                    this.trigger('loopComplete');\r\n                }\r\n            } else {\r\n                _isComplete = true;\r\n                nextValue = 0;\r\n            }\r\n        }\r\n    } else {\r\n        this.setCurrentRawFrameValue(nextValue);\r\n    }\r\n    if (_isComplete) {\r\n        this.setCurrentRawFrameValue(nextValue);\r\n        this.pause();\r\n        this.trigger('complete');\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.adjustSegment = function(arr, offset){\r\n    this.playCount = 0;\r\n    if(arr[1] < arr[0]){\r\n        if(this.frameModifier > 0){\r\n            if(this.playSpeed < 0){\r\n                this.setSpeed(-this.playSpeed);\r\n            } else {\r\n                this.setDirection(-1);\r\n            }\r\n        }\r\n        this.timeCompleted = this.totalFrames = arr[0] - arr[1];\r\n        this.firstFrame = arr[1];\r\n        this.setCurrentRawFrameValue(this.totalFrames - 0.001 - offset);\r\n    } else if(arr[1] > arr[0]){\r\n        if(this.frameModifier < 0){\r\n            if(this.playSpeed < 0){\r\n                this.setSpeed(-this.playSpeed);\r\n            } else {\r\n                this.setDirection(1);\r\n            }\r\n        }\r\n        this.timeCompleted = this.totalFrames = arr[1] - arr[0];\r\n        this.firstFrame = arr[0];\r\n        this.setCurrentRawFrameValue(0.001 + offset);\r\n    }\r\n    this.trigger('segmentStart');\r\n};\r\nAnimationItem.prototype.setSegment = function (init,end) {\r\n    var pendingFrame = -1;\r\n    if(this.isPaused) {\r\n        if (this.currentRawFrame + this.firstFrame < init) {\r\n            pendingFrame = init;\r\n        } else if (this.currentRawFrame + this.firstFrame > end) {\r\n            pendingFrame = end - init;\r\n        }\r\n    }\r\n\r\n    this.firstFrame = init;\r\n    this.timeCompleted = this.totalFrames = end - init;\r\n    if(pendingFrame !== -1) {\r\n        this.goToAndStop(pendingFrame,true);\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.playSegments = function (arr, forceFlag) {\r\n    if (forceFlag) {\r\n        this.segments.length = 0;\r\n    }\r\n    if (typeof arr[0] === 'object') {\r\n        var i, len = arr.length;\r\n        for (i = 0; i < len; i += 1) {\r\n            this.segments.push(arr[i]);\r\n        }\r\n    } else {\r\n        this.segments.push(arr);\r\n    }\r\n    if (this.segments.length && forceFlag) {\r\n        this.adjustSegment(this.segments.shift(), 0);\r\n    }\r\n    if (this.isPaused) {\r\n        this.play();\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.resetSegments = function (forceFlag) {\r\n    this.segments.length = 0;\r\n    this.segments.push([this.animationData.ip,this.animationData.op]);\r\n    //this.segments.push([this.animationData.ip*this.frameRate,Math.floor(this.animationData.op - this.animationData.ip+this.animationData.ip*this.frameRate)]);\r\n    if (forceFlag) {\r\n        this.checkSegments(0);\r\n    }\r\n};\r\nAnimationItem.prototype.checkSegments = function(offset) {\r\n    if (this.segments.length) {\r\n        this.adjustSegment(this.segments.shift(), offset);\r\n        return true;\r\n    }\r\n    return false;\r\n};\r\n\r\nAnimationItem.prototype.destroy = function (name) {\r\n    if ((name && this.name != name) || !this.renderer) {\r\n        return;\r\n    }\r\n    this.renderer.destroy();\r\n    this.imagePreloader.destroy();\r\n    this.trigger('destroy');\r\n    this._cbs = null;\r\n    this.onEnterFrame = this.onLoopComplete = this.onComplete = this.onSegmentStart = this.onDestroy = null;\r\n    this.renderer = null;\r\n};\r\n\r\nAnimationItem.prototype.setCurrentRawFrameValue = function(value){\r\n    this.currentRawFrame = value;\r\n    this.gotoFrame();\r\n};\r\n\r\nAnimationItem.prototype.setSpeed = function (val) {\r\n    this.playSpeed = val;\r\n    this.updaFrameModifier();\r\n};\r\n\r\nAnimationItem.prototype.setDirection = function (val) {\r\n    this.playDirection = val < 0 ? -1 : 1;\r\n    this.updaFrameModifier();\r\n};\r\n\r\nAnimationItem.prototype.updaFrameModifier = function () {\r\n    this.frameModifier = this.frameMult * this.playSpeed * this.playDirection;\r\n};\r\n\r\nAnimationItem.prototype.getPath = function () {\r\n    return this.path;\r\n};\r\n\r\nAnimationItem.prototype.getAssetsPath = function (assetData) {\r\n    var path = '';\r\n    if(assetData.e) {\r\n        path = assetData.p;\r\n    } else if(this.assetsPath){\r\n        var imagePath = assetData.p;\r\n        if(imagePath.indexOf('images/') !== -1){\r\n            imagePath = imagePath.split('/')[1];\r\n        }\r\n        path = this.assetsPath + imagePath;\r\n    } else {\r\n        path = this.path;\r\n        path += assetData.u ? assetData.u : '';\r\n        path += assetData.p;\r\n    }\r\n    return path;\r\n};\r\n\r\nAnimationItem.prototype.getAssetData = function (id) {\r\n    var i = 0, len = this.assets.length;\r\n    while (i < len) {\r\n        if(id == this.assets[i].id){\r\n            return this.assets[i];\r\n        }\r\n        i += 1;\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.hide = function () {\r\n    this.renderer.hide();\r\n};\r\n\r\nAnimationItem.prototype.show = function () {\r\n    this.renderer.show();\r\n};\r\n\r\nAnimationItem.prototype.getDuration = function (isFrame) {\r\n    return isFrame ? this.totalFrames : this.totalFrames / this.frameRate;\r\n};\r\n\r\nAnimationItem.prototype.trigger = function(name){\r\n    if(this._cbs && this._cbs[name]){\r\n        switch(name){\r\n            case 'enterFrame':\r\n                this.triggerEvent(name,new BMEnterFrameEvent(name,this.currentFrame,this.totalFrames,this.frameModifier));\r\n                break;\r\n            case 'loopComplete':\r\n                this.triggerEvent(name,new BMCompleteLoopEvent(name,this.loop,this.playCount,this.frameMult));\r\n                break;\r\n            case 'complete':\r\n                this.triggerEvent(name,new BMCompleteEvent(name,this.frameMult));\r\n                break;\r\n            case 'segmentStart':\r\n                this.triggerEvent(name,new BMSegmentStartEvent(name,this.firstFrame,this.totalFrames));\r\n                break;\r\n            case 'destroy':\r\n                this.triggerEvent(name,new BMDestroyEvent(name,this));\r\n                break;\r\n            default:\r\n                this.triggerEvent(name);\r\n        }\r\n    }\r\n    if(name === 'enterFrame' && this.onEnterFrame){\r\n        this.onEnterFrame.call(this,new BMEnterFrameEvent(name,this.currentFrame,this.totalFrames,this.frameMult));\r\n    }\r\n    if(name === 'loopComplete' && this.onLoopComplete){\r\n        this.onLoopComplete.call(this,new BMCompleteLoopEvent(name,this.loop,this.playCount,this.frameMult));\r\n    }\r\n    if(name === 'complete' && this.onComplete){\r\n        this.onComplete.call(this,new BMCompleteEvent(name,this.frameMult));\r\n    }\r\n    if(name === 'segmentStart' && this.onSegmentStart){\r\n        this.onSegmentStart.call(this,new BMSegmentStartEvent(name,this.firstFrame,this.totalFrames));\r\n    }\r\n    if(name === 'destroy' && this.onDestroy){\r\n        this.onDestroy.call(this,new BMDestroyEvent(name,this));\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.triggerRenderFrameError = function(nativeError) {\r\n\r\n    var error = new BMRenderFrameErrorEvent(nativeError, this.currentFrame);\r\n    this.triggerEvent('error', error);\r\n\r\n    if (this.onError) {\r\n        this.onError.call(this, error);\r\n    }\r\n}\r\n\r\nAnimationItem.prototype.triggerConfigError = function(nativeError) {\r\n\r\n    var error = new BMConfigErrorEvent(nativeError, this.currentFrame);\r\n    this.triggerEvent('error', error);\r\n\r\n    if (this.onError) {\r\n        this.onError.call(this, error);\r\n    }\r\n}\r\nfunction EffectsManager(){}\r\n\r\n    var lottiejs = {};\r\n\r\n    var _isFrozen = false;\r\n\r\n    function setLocationHref (href) {\r\n        locationHref = href;\r\n    }\r\n\r\n    function searchAnimations() {\r\n        if (standalone === true) {\r\n            animationManager.searchAnimations(animationData, standalone, renderer);\r\n        } else {\r\n            animationManager.searchAnimations();\r\n        }\r\n    }\r\n\r\n    function setSubframeRendering(flag) {\r\n        subframeEnabled = flag;\r\n    }\r\n\r\n    function loadAnimation(params) {\r\n        if (standalone === true) {\r\n            params.animationData = JSON.parse(animationData);\r\n        }\r\n        return animationManager.loadAnimation(params);\r\n    }\r\n\r\n    function setQuality(value) {\r\n        if (typeof value === 'string') {\r\n            switch (value) {\r\n                case 'high':\r\n                    defaultCurveSegments = 200;\r\n                    break;\r\n                case 'medium':\r\n                    defaultCurveSegments = 50;\r\n                    break;\r\n                case 'low':\r\n                    defaultCurveSegments = 10;\r\n                    break;\r\n            }\r\n        } else if (!isNaN(value) && value > 1) {\r\n            defaultCurveSegments = value;\r\n        }\r\n        if (defaultCurveSegments >= 50) {\r\n            roundValues(false);\r\n        } else {\r\n            roundValues(true);\r\n        }\r\n    }\r\n\r\n    function inBrowser() {\r\n        return typeof navigator !== 'undefined';\r\n    }\r\n\r\n    function installPlugin(type, plugin) {\r\n        if (type === 'expressions') {\r\n            expressionsPlugin = plugin;\r\n        }\r\n    }\r\n\r\n    function getFactory(name) {\r\n        switch (name) {\r\n            case \"propertyFactory\":\r\n                return PropertyFactory;\r\n            case \"shapePropertyFactory\":\r\n                return ShapePropertyFactory;\r\n            case \"matrix\":\r\n                return Matrix;\r\n        }\r\n    }\r\n\r\n    lottiejs.play = animationManager.play;\r\n    lottiejs.pause = animationManager.pause;\r\n    lottiejs.setLocationHref = setLocationHref;\r\n    lottiejs.togglePause = animationManager.togglePause;\r\n    lottiejs.setSpeed = animationManager.setSpeed;\r\n    lottiejs.setDirection = animationManager.setDirection;\r\n    lottiejs.stop = animationManager.stop;\r\n    lottiejs.searchAnimations = searchAnimations;\r\n    lottiejs.registerAnimation = animationManager.registerAnimation;\r\n    lottiejs.loadAnimation = loadAnimation;\r\n    lottiejs.setSubframeRendering = setSubframeRendering;\r\n    lottiejs.resize = animationManager.resize;\r\n    //lottiejs.start = start;\r\n    lottiejs.goToAndStop = animationManager.goToAndStop;\r\n    lottiejs.destroy = animationManager.destroy;\r\n    lottiejs.setQuality = setQuality;\r\n    lottiejs.inBrowser = inBrowser;\r\n    lottiejs.installPlugin = installPlugin;\r\n    lottiejs.freeze = animationManager.freeze;\r\n    lottiejs.unfreeze = animationManager.unfreeze;\r\n    lottiejs.getRegisteredAnimations = animationManager.getRegisteredAnimations;\r\n    lottiejs.__getFactory = getFactory;\r\n    lottiejs.version = '5.5.9';\r\n\r\n    function checkReady() {\r\n        if (document.readyState === \"complete\") {\r\n            clearInterval(readyStateCheckInterval);\r\n            searchAnimations();\r\n        }\r\n    }\r\n\r\n    function getQueryVariable(variable) {\r\n        var vars = queryString.split('&');\r\n        for (var i = 0; i < vars.length; i++) {\r\n            var pair = vars[i].split('=');\r\n            if (decodeURIComponent(pair[0]) == variable) {\r\n                return decodeURIComponent(pair[1]);\r\n            }\r\n        }\r\n    }\r\n    var standalone = '__[STANDALONE]__';\r\n    var animationData = '__[ANIMATIONDATA]__';\r\n    var renderer = '';\r\n    if (standalone) {\r\n        var scripts = document.getElementsByTagName('script');\r\n        var index = scripts.length - 1;\r\n        var myScript = scripts[index] || {\r\n            src: ''\r\n        };\r\n        var queryString = myScript.src.replace(/^[^\\?]+\\??/, '');\r\n        renderer = getQueryVariable('renderer');\r\n    }\r\n    var readyStateCheckInterval = setInterval(checkReady, 100);\r\n    return lottiejs;\r\n}));\r\n"],"sourceRoot":""}